!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,a.atomic=e()}}(function(){return function e(a,t,n){function r(o,s){if(!t[o]){if(!a[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[o]={exports:{}};a[o][0].call(u.exports,function(e){var t=a[o][1][e];return r(t?t:e)},u,u.exports,e,a,t,n)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,a,t){"use strict";var n={},r=e("./ion");r.extend(n,r),r.extend(n,{version:"1.0.0",Builder:e("./builder")}),n.db={Database:e("./db/database"),EncounterDatabase:e("./db/encounter_database"),ItemDatabase:e("./db/item_database"),ProfessionDatabase:e("./db/profession_database"),StoreDatabse:e("./db/store_database")},n.tables={Table:e("./tables/table"),HashTable:e("./tables/hash_table"),RarityTable:e("./tables/rarity_table")},n.models={Bag:e("./models/bag"),Character:e("./models/character"),Family:e("./models/family"),Gang:e("./models/gang"),IonSet:e("./models/ion_set"),Item:e("./models/item"),Model:e("./models/model"),Name:e("./models/name"),Profession:e("./models/profession"),Relationship:e("./models/relationship"),Store:e("./models/store"),Weather:e("./models/weather")},n.dice=e("./dice/dice"),n.createAppearance=e("./generators/appearance"),n.createCharacterName=e("./generators/character_name"),n.createCollectible=e("./generators/memorabilia"),n.createCorporateName=e("./generators/corporate_name"),n.createStore=e("./generators/store"),n.createWeather=e("./generators/weather"),n.createTimeSeries=e("./generators/historical_time_series"),r.extend(n,e("./generators/bag")),r.extend(n,e("./generators/character")),r.extend(n,e("./generators/data")),r.extend(n,e("./generators/family")),r.extend(n,e("./generators/gang")),r.extend(n,e("./generators/memorabilia")),r.extend(n,e("./generators/place_name")),r.extend(n,e("./generators/reading")),r.extend(n,e("./generators/relationships")),r.extend(n.models,e("./models/lib")),a.exports=n},{"./builder":2,"./db/database":3,"./db/encounter_database":4,"./db/item_database":5,"./db/profession_database":6,"./db/store_database":7,"./dice/dice":8,"./generators/appearance":9,"./generators/bag":10,"./generators/character":11,"./generators/character_name":12,"./generators/corporate_name":13,"./generators/data":14,"./generators/family":15,"./generators/gang":16,"./generators/historical_time_series":17,"./generators/memorabilia":18,"./generators/place_name":19,"./generators/reading":20,"./generators/relationships":21,"./generators/store":22,"./generators/weather":23,"./ion":24,"./models/bag":26,"./models/character":27,"./models/family":28,"./models/gang":29,"./models/ion_set":30,"./models/item":31,"./models/lib":32,"./models/model":33,"./models/name":34,"./models/profession":35,"./models/relationship":36,"./models/store":37,"./models/weather":38,"./tables/hash_table":39,"./tables/rarity_table":40,"./tables/table":41}],2:[function(e,a,t){function n(e,a){var t=this.context;(e||[]).forEach(function(e,t){this.context=e,a.call(this.context,this,e,t)},this),this.context=t}function r(){1===arguments.length?this.str+=arguments[0]:arguments[1]&&(this.str+=m.format.apply(this.context,arguments))}function i(e,a,t){e?a.call(this.context,this):t.call(this.context,this)}function o(e,a){e&&a.call(this.context,this)}function s(e,a,t){this.str+="<"+e;for(var n in a)this.str+=" "+n+'="'+a[n]+'"';this.str+=">",t.call(this.context,this),this.str+="</"+e+">"}function l(e,a,t){this.str+="<"+e;for(var n in a)this.str+=" "+n+'="'+a[n]+'"';this.str+=">"+t+"</"+e+">"}function c(e,a){e&&(this.str+=a)}function u(e,a){this.str+=m.pluralize(e,a)}function h(){return this.str}var m=e("./ion"),d=Array.prototype.map;a.exports=function(e){if(!e)throw new Error("No context obj to Builder");var a=function(){var e=d.call(arguments,function(e){return e instanceof Array?"a":(typeof e).substring(0,1)}).join("");switch(e){case"af":n.apply(a,arguments);break;case"bf":o.apply(a,arguments);break;case"bff":i.apply(a,arguments);break;case"bs":c.apply(a,arguments);break;case"sof":s.apply(a,arguments);break;case"sos":l.apply(a,arguments);break;case"sn":u.apply(a,arguments);break;default:r.apply(a,arguments)}return a};return a.context=e,a.str="",a.toString=h,a}},{"./ion":24}],3:[function(e,a,t){function n(e){if(!c.isUndefined(arguments[1])&&arguments[1].ands)return arguments[1];for(var a=i(),t=0;t<arguments.length;t++)r(e,a,arguments[t]);return a}function r(e,a,t){if(c.isString(t)&&""!==t)a=o(t).reduce(e.cbTagCollector,a);else if(c.isArray(t))for(var n=0;n<t.length;n++)a=o(t[n]).reduce(e.cbTagCollector,a)}function i(){return{ands:[],nots:[]}}function o(e){return e.trim().toLowerCase().split(/\s+/)}function s(e,a){for(var t=new u(c.identity,!1),n=0,r=e.models.length;r>n;n++){var i=e.models[n];l(a.tags,i)&&e.matches(a,i)&&t.add(i.frequency,i)}return t}function l(e,a){var t=1===e.ands.length&&"*"===e.ands[0]||c.intersection(a.tags,e.ands).length===e.ands.length&&0===c.intersection(a.tags,e.nots).length;return!t&&e.or?l(e.or,a):t}var c=e("../ion"),u=e("../tables/rarity_table");a.exports=c.define({init:function(e,a){this.models=[],this.lookupArray=e||[],this.cbTagCollector=function(e,a){if("|"===a){var t=i();return e.or=t,t}return this.lookupArray&&(a=this.lookupArray[parseInt(a,10)]||a),"-"===a.charAt(0)?e.nots.push(a.substring(1)):e.ands.push(a),e}.bind(this)},matches:c.identity,register:c.identity,find:function(e){return this.findAll(e).get()},findAll:function(e){return(c.isString(e)||c.isArray(e))&&(e={tags:e}),e.tags=n(this,e.tags),s(this,e)}})},{"../ion":24,"../tables/rarity_table":40}],4:[function(e,a,t){var n=e("../ion"),r=e("./database");a.exports=n.define(r,{init:function(e){r.call(this,e)},register:function(){for(var e=0,a=arguments.length;a>e;e++){arguments[e].split("!");this.models[this.models.length]={}}}})},{"../ion":24,"./database":3}],5:[function(e,a,t){function n(e,a){var t=r();return s.isString(a)&&""!==a&&(t=i(a).reduce(e.cbTagCollector,t)),t.ands}function r(){return{ands:[],nots:[]}}function i(e){return e.trim().toLowerCase().split(/\s+/)}function o(e){return e.replace(u,"").replace(h,"").toLowerCase()}var s=e("../ion"),l=e("./database"),c=e("../models/item"),u=/\{.*\}|\(.*\)/g,h=/\W|\s/g;a.exports=s.define(l,{init:function(e){l.call(this,e)},matches:function(e,a){return!(s.isNumber(e.minValue)&&a.value<e.minValue||s.isNumber(e.maxValue)&&a.value>e.maxValue||s.isNumber(e.minEnc)&&a.enc<e.minEnc||s.isNumber(e.maxEnc)&&a.enc>e.maxEnc)},register:function(){for(var e=0,a=arguments.length;a>e;e++){for(var t=arguments[e],r=t.split("!"),i=r[0].trim().split(/\s*;\s*/),l=n(this,r[3]),u=l.indexOf("br")>-1,h={value:parseFloat(r[1]),enc:parseFloat(r[2]),frequency:l.shift()},m=0,d=i.length;d>m;m++)h.name=i[m],h.tags=s.without(l,"br"),h.tags.push(o(h.name)),this.models[this.models.length]=Object.freeze(new c(h));if(u)for(h.tags=h.tags.concat(["br"]),h.value=Math.max(.5,~~(h.value/2)),m=0,d=i.length;d>m;m++)h.name="broken "+i[m],h.tags=[o(h.name)].concat(l),this.models[this.models.length]=Object.freeze(new c(h))}}})},{"../ion":24,"../models/item":31,"./database":3}],6:[function(e,a,t){function n(e,a){var t=r();return o.isString(a)&&""!==a&&(t=i(a).reduce(e.cbTagCollector,t)),t.ands}function r(){return{ands:[],nots:[]}}function i(e){return e.trim().toLowerCase().split(/\s+/)}var o=e("../ion"),s=e("./database");a.exports=o.define(s,{init:function(e){s.call(this,e)},register:function(){for(var e=arguments[0],a=1,t=arguments.length;t>a;a+=2){for(var r=arguments[a].split("!"),i=r[0].trim().split(/\s*;\s*/),s=n(this,r[1]),l=n(this,r[2]),c=n(this,r[3]),u=c.shift(),h=arguments[a+1]?new Function("c",arguments[a+1]):o.identity,m=0;m<i.length;m++)c[c.length]=o.toTag(i[m]);this.models[this.models.length]=new e({names:i,tags:c,seeds:s,supplements:l,postprocess:h,frequency:u})}}})},{"../ion":24,"./database":3}],7:[function(e,a,t){function n(e,a){var t=r();return s.isString(a)&&""!==a&&(t=i(a).reduce(e.cbTagCollector,t)),t.ands}function r(){return{ands:[],nots:[]}}function i(e){return e.trim().toLowerCase().split(/\s+/)}function o(e){var a="cluster:";return e.filter(function(e){return e.indexOf(a)>-1})[0].substring(8)}var s=e("../ion"),l=e("../models/model"),c=e("./database");a.exports=s.define(c,{init:function(e){c.call(this,e)},register:function(){for(var e,a,t=0,r=arguments.length;r>t;t++){for(var i=arguments[t].split("!"),c=i[0].trim().split(/\s*;\s*/),u=i[1],h=i[2],m=i[3],d=i[4],f=i[5],g=i[6],p=i[7],y=n(this,i[8]),b=y.shift(),v=0;v<c.length;v++)y[y.length]=s.toTag(c[v]);var k={};h&&(k.profession=h),m&&(k.traits={},k.traits[m]=s.roll(3)+1),this.models[this.models.length]=e=new l({frequency:b,names:c,policy:u,owner:k,tags:y}),(d||f||g||p)&&(e.inventory=a={fillBag:!1,cluster:o(y)},d&&(a.tags=d),f&&(a.totalValue=parseInt(f,10)),g&&(a.minValue=parseInt(g,10)),p&&(a.maxValue=parseInt(p,10)))}}})},{"../ion":24,"../models/model":33,"./database":3}],8:[function(e,a,t){"use strict";function n(e){e.value=[].reduce.call(e,function(e,a){return e+a.value},0)}var r=e("../ion"),i=r.define({init:function(e,a){this.faces=e,this.color=a,this.roll()},roll:function(){return this.value=r.roll(this.faces),this.value},symbol:function(){return this.value.toString()},toString:function(){return r.format("[{0} {1}]",this.color,this.symbol())}}),o=r.define(i,{init:function(e){i.call(this,6,e)},roll:function(){return this.value=r.roll(3)-2,this.value},symbol:function(){return-1===this.value?"-":1===this.value?"+":" "}}),s=r.define({init:function(){this.length=0;for(var e=0;e<arguments.length;e++){var a=arguments[e];if(a instanceof s||r.isArray(a))for(var t=0;t<a.length;t++)this[this.length++]=a[t];else this[this.length++]=arguments[e]}n(this)},push:function(e){this[this.length++]=e,n(this)},roll:function(){return[].map.call(this,function(e){return e.roll()}),n(this),this.value},toString:function(){return[].map.call(this,function(e){return e.toString()}).join(" ")}});a.exports.Die=i,a.exports.FudgeDie=o,a.exports.Dice=s},{"../ion":24}],9:[function(e,a,t){"use strict";function n(e,a){var t=k.get(),n=null;"hispanic"===e.race&&"blond"===t&&(t=s.random(["brown","black"])),e.age>40&&s.test(e.age)&&(t=s.random(["gray","silver","white"])),n=e.is("low")&&e.male&&e.age<30&&s.test(25)?"{0} mohawk":e.male?w.get():_.get(),a.push(s.resolve(n,t))}function r(e,a){var t=v.get();t&&a.push(t)}function i(e,a){var t=e.has("glasses")?70:10;s.test(t)&&(s.test(20)?a.push(e.male?"wears browline glasses":"wears cat eye glasses"):s.test(30)?a.push("wears horn-rimmed glasses"):a.push("wears glasses"));var n=e.has("tattoos")||e.has("military:tattoos")||e.has("sailor:tattoos")?30:5;if(n+=e.male?15:0,s.test(n)){var r=null,i=u({gender:e.male?"female":"male"}).given;r=e.has("military:tattoo")&&s.test(80)?m:e.has("sailor:tattoo")&&s.test(80)?h:e.male&&s.test(20)?f:!e.male&&s.test(20)?g:d,r=s.resolve(r,{name:i});var o=s.format("has a tattoo of {0} on {1} {2} {3}",r,e.possessive,s.random(["left","right"]),s.random(["shoulder","bicep","forearm","arm"]));a.push(o)}var l=e.has("injuries")?15:3;s.test(l)&&a.push(s.resolve(p,e));var c=e.has("prosthetics")?5:1;s.test(c)&&a.push(s.resolve(y,e))}function o(e,a){s.test(30)&&a.push(s.resolve(b,e))}var s=e("../ion"),l=e("../tables/table"),c=e("../tables/rarity_table"),u=e("../generators/character_name"),h=['a sailing ship with the words "Homeward Bound" below it',"an anchor"],m=["an American {flag|eagle}","an eagle carrying an American flag"],d=["a skull{| in flames| with wings| and crossbones}","a chinese dragon","a {black panther|tiger|lion|wolf}","a mermaid","a snake wrapped around a {cross|rose}","a pair of dice",'a four leaf clover with the word "lucky" across it','a heart with the name "{name}" across it','the name "{name}"',"{a crystal|an eight} ball","a {star|cross|phoenix|lion|tiger|crown|fish|scorpion|lucky clover|yin-yang symbol}","an {angel|anchor|ankh}","a heart and dagger"],f=["a{| blonde| brunette| redhead} pin-up {girl|cowgirl}","a pin-up girl {in a sailor's suit|in a WAC uniform|in a space suit}","a woman on a clamshell"],g=["a {butterfly|swallow|dragonfly|rose|fairy|heart|lotus flower}","two intertwined roses"],p=["missing a tooth","missing {possessive} {left|right} {ear|foot|hand}","has been burnt on {possessive} {left|right} arm","walks with a limp","wears an eyepatch","cast on {left|right} arm","scar on {possessive} {left|right} arm","scar on {left|right} side of {possessive} {leg|torso|face}"],y=["hook for a {right|left} hand","artificial {hand|leg|arm}","glass eye"],b=["will {be very loyal to|betray or abandon} the players in a crisis","will trade generously with players","will demand compensation for minor tasks","if angered, will drag the player group into unnecessary fights","will fight to the death if necessary","if left alone, will {drink|gamble} away any money {personal} has","will expect {a share in profits|payment} to join the group","smokes when {personal} can get them","values fine wines and liquors","chews gum when {personal} can get it"],v=(new l).add(10,"tall stature").add(10,"short stature").add(5,"short and heavy-set").add(5,"tall and heavy-set").add(70,null),k=(new l).add(15,"black").add(50,"brown").add(15,"blond").add(3,"red").add(10,"auburn (brownish-red)").add(7,"chestnut (reddish-brown)"),w=(new l).add(30,"{0} crew cut haircut").add(25,"{0} side part haircut").add(25,"{0} ivy league haircut").add(20,"{0} pompadour haircut"),_=(new c).add("common","bobbed {0} hair").add("common","short {curly|straight} {0} hair").add("uncommon","long {curly|wavy|straight} {0} hair, usually worn {in a ponytail|under a scarf|in a bun}").add("uncommon","{0} pageboy haircut").add("rare","long {curly|wavy|straight} {0} hair").add("rare","cropped {0} hair");a.exports=function(e){if(!e)throw new Error("Character required");var a=[],t=[];return n.call(this,e,a),r.call(this,e,a),i.call(this,e,a),o.call(this,e,t),[a,t].reduce(function(e,a){return a.length&&e.push(s.sentenceCase(a.join(", "))),e},[]).join(". ")}},{"../generators/character_name":12,"../ion":24,"../tables/rarity_table":40,"../tables/table":41}],10:[function(e,a,t){"use strict";function n(e,a){for(var t=a.totalValue;t>0;){a.maxValue=Math.max(Math.min(a.maxValue,t),a.minValue);var n=y.find(a);if(null===n||n.value>t)return e;e.add(n),t-=n.value}return e}function r(e){switch(e){case"low":return f.roll("2d3+5");case"medium":return f.roll("2d3+2");case"high":return f.roll("1d3+2")}}function i(e){switch(e){case"low":return f.roll("1d3*2");case"medium":return f.roll("(1d3*2)+2");case"high":return f.roll("(1d3*2)+4")}}function o(e,a){if(a>0)for(var t=y.findAll({tags:"currency",maxValue:a});a>0;){var n=t.get();if(null===n)return;e.add(n),a-=n.value}}function s(e,a){var t=f.test(60)?"firearm":"melee",n=y.find([t,a,"-br"]);if(n&&(e.add(n),n.is("firearm"))){var r=y.find(["ammo",n.typeOf("ammo"),"-bundled"]);r&&e.add(r,f.roll("4d4")),f.test(20)&&(n=y.find(["melee",a,"-scifi"]),n&&e.add(n))}}function l(e,a,t){for(var n=0;a>n;n++){var r=y.find(f.random(t));r&&e.add(r)}return e}function c(e,a,t){for(var n=new p,r=0;a>r;r++){var i=y.find(t);i&&n.add(i)}return u(e,n)}function u(e,a){return a.toArray().forEach(function(a){e.add(a)}),e}function h(e,a,t){return function(n,r,i){f.test(n)&&c(e,r,f.format(i,a,t))}}function m(e){if(e=f.extend({},e||{}),e.totalValue=e.totalValue||20,e.fillBag=f.isBoolean(e.fillBag)?e.fillBag:!0,e.minValue=f.isNumber(e.minValue)?e.minValue:0,e.maxValue=f.isNumber(e.maxValue)?e.maxValue:Number.MAX_VALUE,e.minEnc=f.isNumber(e.minEnc)?e.minEnc:0,e.maxEnc=f.isNumber(e.maxEnc)?e.maxEnc:Number.MAX_VALUE,e.maxValue<=0||e.maxEnc<=0||e.minValue>e.maxValue||e.minEnc>e.maxEnc)throw new Error("Conditions cannot match any taggable: "+JSON.stringify(e));if(!f.isUndefined(e.totalValue)&&e.totalValue<=0)throw new Error("Bag value must be more than 0");return e}function d(e){e=m(e);var a=n(new g,e);return e.fillBag!==!1&&o(a,e.totalValue-a.value()),a}var f=e("../ion"),g=e("../models/bag"),p=e("../models/ion_set"),y=e("./data").itemDatabase,b={Safe:{desc:["Safecracking+1","Safecracking","Safecracking-1","Safecracking-2","Safecracking-3","Safecracking-4"],query:{totalValue:"3d8+15",tags:"cash | firearm -scifi | secured | luxury -food",maxEnc:10,fillBag:!1}},Lockbox:{desc:["Unlocked","Lockpicking","Lockpicking-1","Lockpicking-2"],query:{totalValue:"2d6+2",tags:"cash | secured | firearm -scifi -br | asetofkeys | luxury -food",maxEnc:3,fillBag:!0}},Trunk:{desc:["Unlocked","Lockpicking+2, can be broken open","Lockpicking+3, can be broken open","Lockpicking+4, can be broken open"],query:{totalValue:"2d6",tags:"clothing | armor | firearm -scifi -br | unique",maxEnc:10,fillBag:!1}},"Cash Register":{desc:["easily opened"],query:{totalValue:"6d50/100",tags:"cash",fillBag:!0}},"Cash On Hand":{desc:["under the counter","in a lockbox"],query:{totalValue:"20+4d6",tags:"currency -cash | currency",fillBag:!0,maxValue:7}},"Clothes Closet":{desc:["no lock"],query:{totalValue:"1d8+5",tags:"clothing -research -industrial -military",fillBag:!1}}},v=Object.keys(b).sort();a.exports.createKit=function(e){var a=new g,t=f.isString(e.profession)?"kit:"+e.profession:e.profession.typeOf("kit");s(a,t);var n=h(a,e.gender,t);return n(100,1,"body {0} {1}"),n(30,1,"head {0} {1}"),n(50,1,"coat {0} {1}"),n(30,1,"accessories {0} {1} -br"),n(100,1,"feet {0} {1}"),n(100,f.roll("1d3-1"),"{1} -clothing -firearm -melee -br | kit:personal -br"),l(a,f.roll("2d3-2"),["ration","ration","food -fresh"]),a.value()<20&&o(a,f.roll(20-a.value())),a},a.exports.createBag=d,a.exports.createStockpile=function(e){if(e=m(e),e.cluster=e.cluster||"medium",e.fillBag=!1,e.tags=e.tags||"","none"===e.cluster)return d(e);var a=new g,t=r(e.cluster);"-currency ".concat(e.tags);return c(a,t,e.tags),a.entries.forEach(function(n){t=i(e.cluster),a.add(n.item,t)}),a},a.exports.createContainer=function(e){b[e]||(e=f.random(v));var a=b[e],t=f.extend({},a.query);t.totalValue=f.roll(t.totalValue);var n=d(t);return a.desc&&(n.descriptor=f.format("{0} ({1})",f.titleCase(e),f.random(a.desc))),n},a.exports.getContainerTypes=function(){return v}},{"../ion":24,"../models/bag":26,"../models/ion_set":30,"./data":14}],11:[function(e,a,t){"use strict";function n(e,a,t){if(l.isString(e)){var n=e.split(" ");return new c({given:n[0],family:n[1]})}if(e instanceof c){var r=m({gender:a,race:t});return l.extend(r,e)}return m({gender:a,race:t})}function r(e){var a=l.extend({},e);return a.gender=a.gender||l.random(["male","female"]),a.equip=l.isBoolean(a.equip)?a.equip:!0,a.race=a.race||s(),a.name=n(a.name,a.gender,a.race),a.age=l.isNumber(a.age)?l.bounded(a.age,1,100):l.roll("14+3d12"),a.traits&&(a.traits=l.extend({},a.traits)),a.profession&&(a.profession=l.toTag(a.profession)),"soldier"===a.profession&&(a.profession=l.random(["airforce","marine","army","navy"])),a}function i(e,a){delete e.profession,delete e.honorific,e.age>4&&(g.train(e,l.roll("1d3-1")),delete e.traits.Attractive)}function o(e,a,t){var n=l.sum(l.values(t.traits)),r=8+~~(t.age/10)-n;g.train(e,l.roll("2d2-1"));var i=h.find("pre -innate"),o=l.intersection(i.tags,["low","normal","high"]),s=a?a:h.find(o+" post -pre -innate"),c=i.is("high")?30:27;if(s.not("pre")&&e.age>c){var u=(e.age-10)/e.age,m=Math.floor(r*u),f=r-m;if(i.train(e,m),i.names[0]!==s.names[0]){var y=e.honorific?e.honorific:l.random(i.names),b=l.random(p);e.history.push(l.format(b,l.article(y.toLowerCase())))}delete e.honorific,s.train(e,f)}else s.train(e,r);e.profession=l.random(s.names),t.equip&&(e.inventory=d({profession:s,gender:e.gender}))}function s(){return l.test(20)?"hispanic":"anglo"}var l=e("../ion"),c=e("../models/name"),u=e("../models/character"),h=e("./data").professionDatabase,m=e("./character_name"),d=e("./bag").createKit,f=e("./appearance"),g=h.find("innate"),p=["Before the collapse, was {0}","Was {0} up until the war","Was {0} before the war"];a.exports.getProfessions=function(){return l.profDb.findAll("post").rows.map(function(e){return e.names[0]},[]).sort()},a.exports.createCharacter=function(e){var a=null,t=r(e);if(t.profession&&(a=h.find(t.profession),null===a||a.not("post")))throw new Error("Invalid profession: "+t.profession+" (must be post-war profession)");var n=new u(t);return n.age<17?i(n,t):(o(n,a,t),n.appearance=f(n),n.initiative=l.roll("2d6")+n.trait("Agile"),n.hp=10+n.trait("Tough")),"hispanic"===n.race&&n.changeTrait("Spanish",l.nonNegativeGaussian(1.5)),n},a.exports.createRace=s},{"../ion":24,"../models/character":27,"../models/name":34,"./appearance":9,"./bag":10,"./character_name":12,"./data":14}],12:[function(e,a,t){"use strict";function n(e,a){return i.random(s[i.format("hispanic"===a&&i.test(35)?"anglo {0}":"{1} {0}",e,a)])}function r(e){return i.random(s[e])}var i=e("../ion"),o=e("../models/name"),s={"anglo male":["Al","Andy","Arnie","Art","Austin","Bart","Beau","Ben","Bert","Bob","Brad","Bradley","Brock","Bruce","Bud","Burt","Caleb","Calvin","Carl","Cecil","Chuck","Clayton","Cliff","Conrad","Cooper","Cyril","Dakota","Dallas","Dalton","Dan","Dawson","Dean","Destry","Don","Doug","Dwain","Earl","Ed","Errol","Floyd","Frank","Fred","Gage","Garth","Gavin","Gene","Glen","Grady","Greg","Gus","Guy","Hal","Hank","Harlan","Holden","Hoyt","Hudson","Hugh","Huxley","Ian","Isaac","Jack","Jake","Jason","Jeremy","Jerry","Jethro","Joe","John","Johnny","Ken","Kirk","Kurt","Kyle","Larson","Levi","Lloyd","Luke","Lyle","Mack","Mark","Marty","Mason","Matt","Max","Merle","Nate","Ned","Neil","Nick","Norm","Otis","Pat","Phil","Ray","Reed","Rex","Rick","Rod","Rodger","Roy","Russell","Sam","Scott","Slim","Stan","Stratton","Ted","Tim","Todd","Tony","Travis","Tyler","Vern","Wade","Wally","Ward","Wesley","Will","Wyatt"],"anglo female":["Ada","Agnes","Alice","Amy","Ann","Au{b|d}rey","Barb","Becky","Betty","Bev","Carol","Cindy","Clara","Darla","Diane","Dona","Doris","Edith","Edna","Eileen","Ella","Ellen","Emma","Emily","Erma","Esther","Ethel","Eva","Fay","Flo","Flora","Gail","Grace","Gwen","Hazel","Helen","Holly","Ida","Ilene","Irene","Iris","Irma","Jan","Jane","Janet","Janis","Jean","Joan","Judy","June","Kathy","Kay","Lena","Linda","Lois","Lorna","Lucy","Mabel","Mae","Mary","Mavis","Nina","Nora","Norma","Olga","Pam","Patty","Paula","Pearl","Rita","Rose","Ruth","Sally","Sara","Stella","Sue","Sybil","Tina","Trudy","Velma","Vera","Viola","Wanda","Wilma"],"hispanic male":["Alonso","Bruno","Camilo","Carlos","Dante","Diego","Emilio","Felipe","Franco","Iker","Jacobo","Javier","Jorge","Jose","Juan","Julian","Lucas","Luis","Manny","Manuel","Mario","Mateo","Matias","Miguel","Pablo","Pedro","Rafael","Samuel","Sergio","Tomas","Elias"],"hispanic female":["Abril","Alexa","Alma","Ana","Ariana","Ashley","Bianca","Camila","Carla","Elena","Emilia","Isabel","Jimena","Julia","Luana","Lucia","Maite","Malena","Maria","Mia","Regina","Renata","Sofia","Sophie","Valery"],anglo:["Adams","Alexander","Anderson","Bailey","Baker","Barnes","Barton","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Cleaver","Coleman","Collins","Cook","Cooper","Cox","Davis","Edwards","Evans","Flores","Foster","Gray","Green","Griffin","Hall","Harris","Haskell","Henderson","Hill","Howard","Hughes","Jackson","James","Jenkins","Reed","Richardson","Roberts","Robinson","Rogers","Ross","Russell","Sanders","Scott","Simmons","Smith","Stewart","Taylor","Thomas","Thompson","Turner","Walker","Ward","Washington","Watson","White","Williams","Wilson","Wood","Wright","Hayes"],hispanic:["Aguilar","Aguirre","Alvarado","Alvarez","Avila","Barrera","Cabrera","Calaveras","Calderon","Camacho","Campos","Cardenas","Carrillo","Castaneda","Castillo","Castro","Cervantes","Chavez","Contreras","Cortez","Delacruz","Deleon","Diaz","Dominguez","Escobar","Espinoza","Estrada","Fernandez","Flores","Fuentes","Gallegos","Garcia","Garza","Gomez","Gonzales","Guerra","Guerrero","Gutierrez","Guzman","Hernandez","Herrera","Ibarra","Jimenez","Juarez","Lopez","Lozano","Macias","Marquez","Martinez","Medina","Mejia","Melendez","Mendez","Mendoza","Mercado","Miranda","Molina","Montoya","Morales","Moreno","Navarro","Ochoa","Orozco","Ortega","Ortiz","Pacheco","Padilla","Perez","Ramirez","Ramos","Reyes","Rivera","Rodriguez","Romero","Rosales","Ruiz","Salas","Salazar","Salinas","Sanchez","Sandoval","Santiago","Serrano","Silva","Suarez","Torres","Trevino","Trujillo","Valdez","Valencia","Vargas","Vasquez","Velasquez","Velez","Villarreal","Zamora"]};a.exports=function(e){e=e||{};var a=e.gender||(i.test(50)?"male":"female"),t=e.race||(i.test(20)?"hispanic":"anglo");return new o({given:e.given||n(a,t),family:e.family||r(t)})}},{"../ion":24,"../models/name":34}],13:[function(e,a,t){"use strict";function n(){return r.test(90)?m.get()+d.get():r.random(h)+" "+r.random(u)}var r=e("../ion"),i=e("../tables/table"),o=e("./character_name"),s="{Alpha|American|North American|National|General|Universal|International|Consolidated|Central|Western|Eastern|Union}",l="{Argon|Iridium|Micro|Radiation|Nuclear|Atomic|Radium|Uranium|Plutonium|Development|X-Ray|Gamma Ray}",c="{Engineering|Research|Scientific|Electronics|Instruments|Devices}",u="{Laboratory|Laboratories|Corporation|Supply Company|Company|Foundation|Inc.}",h=["Raytomic","Detectron","Gamma-O-Meter","Librascope","Micromatic","Micro Devices","Micro Specialties","Radiaphone","Radiometric","Ra-Tektor","Nucleonics","Scintillonics","Tracerlab"],m=new i(r.transform);m.add(60,function(){return r.random(s)+" "+r.random(l)}),m.add(10,function(){return r.random(l)}),m.add(15,function(){return o({race:"anglo"}).family+" "+r.random(l)}),m.add(15,function(){return o({race:"anglo"}).family});var d=new i(r.transform);d.add(25,function(){return" "+r.random(c)}),d.add(25,function(){return" "+r.random(u)}),d.add(50,function(){return" "+r.random(c)+" "+r.random(u)}),a.exports=function(){for(var e=n();e.split(" ").length>4;)e=n();return e}},{"../ion":24,"../tables/table":41,"./character_name":12}],14:[function(e,a,t){var n=e("../db/item_database"),r=e("../db/profession_database"),i=e("../db/store_database"),o=e("../models/atomic_profession"),s=new n(["ammo","ammo:22","ammo:30","ammo:308","ammo:357","ammo:38","ammo:44","ammo:45","ammo:fusion","ammo:laser","ammo:pulse","ammo:shell","armor","agricultural","automotive","civic","criminal","garage","hospital","house","industrial","institution","lodging","military","office","public","research","restaurant","school","tourism","travel","br","bundled","heavy","nobr","unique","accessories","body","coat","feet","head","con","con:35mm","con:battery","con:polaroid","food","fresh","meat","prepared","preserved","ration","common","rare","uncommon","female","male","alcohol","camping","cash","clothing","communications","container","currency","drug","electronics","explosive","jewelry","medical","pottery","publication","sport","tool","toy","kit:courier","kit:craftsperson","kit:doctor","kit:electrician","kit:gunslinger","kit:homesteader","kit:leader","kit:mechanic","kit:miner","kit:personal","kit:police","kit:raider","kit:rancher","kit:scavenger","kit:scientist","kit:settler","kit:soldier","kit:thief","kit:trader","kit:vagrant","hand","huge","large","medium","miniscule","small","tiny","luxury","scifi","secured","useful","firearm","melee","pistol","rifle","shotgun","smg"]);s.register("$1 bill!.01!0!51 58 62","$1 casino chip!1!0!53 62","$10 bill!.1!0!53 58 62","$10 casino chip!10!0!53 62","$100 bill!1!0!52 58 62","$20 bill!.2!0!53 58 62","$25 casino chip!25!0!52 62","$5 bill!.05!0!51 58 62","$5 casino chip!5!0!52 62",".22 caliber bullet!1!.5!53 0 1",".30 caliber bullet!1!.5!53 0 2",".357 caliber bullet!1!.5!53 0 4",".38 caliber bullet!1!.5!53 0 5",".44 caliber bullet!1!.5!53 0 6",".45 caliber bullet!1!.5!53 0 7","American flag!1!3!51 15 21 23 25 28 35","Boss of the Plains hat!2!.5!52 59 40 79 88 55 25","Dutch Lad snack cake!6!1!52 45 19 100 49","Kit-Cat klock; Tiki statue!1!3!53 19 ","Kooba Kid comic book; Bubbles and Yanks comic book; Volto from Mars comic book; Clutch Cargo comic book!6!.5!52 17 19 82 69","M1 Rifle; M1 Carbine!12!10!52 2 31 104 89 107","M14 Rifle!12!10!52 3 31 104 89 107","M1911 Pistol!9!3!52 7 31 104 79 89 106","Remington .44 Magnum Pistol; Smith & Wesson .44 Magnum Pistol; Colt .44 Magnum Pistol!9!3!52 6 31 104 73 77 79 81 83 84 86 88 91 106","Remington 870 Shotgun; Winchester 1897 Shotgun; Winchester Model 12 Shotgun!9!10!52 11 31 104 17 19 73 81 83 84 86 88 91 108","Remington Rifle!12!10!52 13 1 31 104 17 19 73 77 78 81 84 85 86 88 91 107","Ruger .22 Pistol!9!3!52 1 31 104 75 81 87 88 90 91 106","Ruger Single Six Revolver!9!3!52 1 31 104 73 81 85 86 88 91 92 106","Smith & Wesson .357 Magnum Pistol; Colt .357 Magnum Pistol!9!3!52 4 31 104 77 79 81 83 84 86 88 90 91 106","Smith & Wesson .38 Special Revolver; Colt Detective Special Revolver!9!3!52 5 31 104 73 74 75 76 79 80 81 83 86 88 90 91 106","Smith & Wesson Service Revolver; Colt Service Pistol!9!3!52 7 31 104 73 74 75 76 80 81 83 86 87 88 91 92 106","Springfield Rifle!12!10!52 2 31 104 73 77 86 89 107","Thompson Submachine Gun; M3 Submachine Gun; Browning Automatic Rifle!12!10!52 7 31 104 89 109","Twinkle Cake!3!1!53 45 19 49 28 29 30","Winchester Rifle!12!10!52 13 3 31 104 17 19 73 77 78 81 85 86 88 91 107","apple pie; cherry pie; peach pie!3!3!53 13 45 46 48 ","apple; pear; nectarine; orange; peach{es}; plum!1!.5!51 45 46 88","ashtray!1!1!51 19","axe; pickaxe!3!20!53 13 57 17 33 81 105 71","backpack!11!10!51 61 19 73 86 92 22 23  30 103","bag{s} of sugar!11!3!52 45 19 49 103","bandana; baseball cap!2!.5!51 59 54 40 19 73 74 76 78 80 81 84 85 86 88 90 92 55","baseball bat!3!3!51 17 73 78 84 86 90 92 105 70","baseball; softball; tennis ball!1!1!51 19 25 28  70","batter{y|ies}!3!.5!53 41 43","bayonet!3!1!51 89 105","belt{s} with large silver buckle{s}!2!.5!53 36 59 77 85 55","beret; boonie hat; garrison cap; patrol cap!2!.5!51 59 54 40 89 55 23","boater's straw hat; Panama straw hat!2!.5!53 15 59 40 19 75 78 79 87 88 91 92 22 55 25","bolo tie!2!.5!51 36 59 19 77 85 91 22 55 ","book!1!3!51 69 28","book{s} of cattle brands!1!1!51 85 35","boomerang; bubble gum cigar; frisbee; hula hoop; Hopalong Cassidy cap gun; coonskin cap; slinky!1!3!53 19  72","bottle{s} of milk!1!3!51 45 46 19 88","bottle{s} of scotch; bottle{s} of whiskey; bottle{s} of vodka; bottle{s} of wine!13!10!53 56 63 19 82 100","bowling ball!6!20!52 33 19 25 70","box{es} of .22 ammo (20 rounds)!30!3!52 0 1 32","box{es} of .30 ammo (20 rounds)!30!3!52 0 2 32","box{es} of .308 ammo (20 rounds)!30!3!52 0 3 32","box{es} of .357 ammo (20 rounds)!30!3!52 0 4 32","box{es} of .38 ammo (20 rounds)!30!3!52 0 5 32","box{es} of .44 ammo (20 rounds)!30!3!52 0 6 32","box{es} of .45 ammo (20 rounds)!30!3!52 0 7 32","box{es} of Sugar Jets cereal!3!3!53 45 19 49","box{es} of Velveteena cheese!6!3!53 45 18 19 100 49 27","box{es} of candies!9!3!52 19 100","box{es} of candles!9!3!51 57 17 19 81 86 103","box{es} of chocolates!6!3!52 45 19 100 49","box{es} of hardtack!9!3!53 45 23 50 103","box{es} of matches!3!.5!51 57 16 17 19 82 84 85 86 88 90 71 103","box{es} of shotgun shells (20 shells)!30!3!52 0 11 32","box{|es} of toaster pastries!3!3!53 45 19 49","bracelet!10!1!53 66 102","briefcase!1!10!51 31 15 24 25 26","bucket hat; coonskin cap!2!.5!53 59 54 40 73 78 84 86 88 91 92 55","bulletproof vest!11!10!53 12 31 16 83 86 89 103","business suit!2!3!51 37 59 19 79 88 22 55","butcher's kni{fe|ves}!3!3!51 19 88 105 27","camera!3!3!53 31 42 82","canteen; water bottle!1!3!51 82 23","can{s} of Brylcreem!3!1!53 19 82","can{s} of Fido dog food!3!3!51 45 19 47 49","can{s} of Rinso Detergent!1!3!51 19","can{s} of coffee; jar{s} of instant coffee!6!3!52 45 19 100 49","can{s} of milk; can{s} of pork & beans; box{es} of crackers; can{s} of wham!3!3!51 45 19 49","can{|s} of mace; can{|s} of pepper spray!3!1!53 74 75 76 79 80 87 88 90 105","carton{s} of cigarettes!150!3!52 63 100","casualwear outfit!2!3!51 37 59 54 19 88 22 55","ceramic cup; ceramic plate; ceramic bowl; large ceramic bowl; pottery cup; pottery bowl; pottery vase; clay figurine!3!6!53 13 31 33 19 68 29","cigarette lighter!3!.5!51 16 19 82 88 71 103","clipboard!1!3!51 24","coat; overcoat; parka; windbreaker!2!3!51 13 15 59 38 54 18 19 20 21 78 82 83 22 55 24 25 27 ","coffee mug!1!1!51 19 24","coffee pot!1!3!51 19","coil{s} of rope (50 feet)!3!10!53 13 17  71","comb; handkerchief!1!.5!51 19 82","combat helmet!2!.5!51 12 59 54 40 84 86 89 55 23","compass!6!.5!52 57 17","cowboy hat!2!.5!51 13 59 54 40 77 85 55","crowbar; tire iron!3!6!51 17 33 84 86 105 71","crutch{es}!3!10!53 67","dagger!3!1!51 77 84 86 88 89 90 105","day pack!4!10!51 15 61 19 20 73 74 76 80 81 84 86 88 90 92 22 23 28  30 103","day{s} of C rations!11!6!51 45 33 23 49 50 103","death ray!27!3!52 8 31 104 106 26 101","deck{s} of playing cards!6!1!51 16 19 82 103","denim jacket!2!.5!51 59 38 54 74 76 80 90 92 55","doctor's bag!2!10!51 36 59 61 54 18 75 55","duster; buckskin coat; poncho!2!.5!53 13 59 38 54 73 77 84 85 91 55","egg; potato{es}!1!.5!51 45 46","empty fuel can!1!10!51 14 61 17 20 73","fedora; flat cap; porkpie hat!2!.5!51 59 40 19 75 79 87 88 91 92 22 55 25  30","fire axe!3!10!53 14 15 16 18 20 21 74 76 80 81 86 92 105 23","fire extinguisher!1!15!51 14 15 16 33 18 20 21 22 23 24 25 26 28 30","first aid kit!13!10!53 67 103","flashlight!6!1!51 14 31 57 15 43 17 19 20 21 82 26  71 103","floral dress; jumper{s} with {a |}blouse{s}; jumper{s} with {a |}T-shirt{s}; skirt{s} and blouse{s}; prairie skirt{s} and blouse{s}; shirtwaist dress!2!.5!51 37 59 54 74 75 78 79 87 88 91 92","football; tennis racket!1!10!51 19 25 28  70","force field belt!15!1!52 12 31 26 101","gas mask!1!3!53 12 31 83 89 23","geiger counter!11!3!53 31 64 20 81 86 87 89 26 71 103","gold krugerrand!10!1!53 62 33 102","gravity rifle!36!20!52 8 31 104 33 23 26 107 101","hand grenade!5!1!53 65 84 86 89 23","hard hat{s} with lamp{s}; hard hat!2!.5!53 59 54 40 20 81 55","hockey mask!1!3!53 12 84","hoe; rake; shovel!3!10!53 13 17 88 105 71","holster!2!1!53 36 59 54 77 82 89 55 35","house deed!6!1!52 102","hunting kni{fe|ves}!3!1!51 77 78 79 85 86 88 91 92 105","ice pick!3!20!53 17 33 105 71","jar{s} of Ersatz instant coffee!6!3!52 15 45 19 100 24 49 30","jar{s} of Gusto pasta sauce; box{es} of Gusto spaghetti; jar{s} of Gusto olives; box{es} of Gusto bread sticks; can{s} of Gusto ravioli!3!3!51 45 19 49 27","jar{s} of jam!1!1!51 45 46 19 48 27","jug{s} of moonshine!10!10!53 13 63 82","jumpsuit; {|}work coveralls!2!3!51 13 14 37 59 54 20 21 74 76 80 81 86 55","knife; fork; spoon!1!1!51 19 27","lab coat!2!3!51 59 38 54 18 21 75 87 55 26","lamb chop; {|}lamb ribs{|}; lamb roast; {|}lamb spareribs{|}!3!10!53 45 46 47","lariat!1!3!51 85 35","laser pistol!27!3!52 9 31 104 87 89 106 26 101","laser rifle!36!10!52 9 31 104 89 26 107 101","letter sweater!2!.5!53 59 38 54 88 55","loa{f|ves} of bread!1!3!51 45 46 88 48","lockpick set!11!1!52 16 90 71 103","lunchbox{es}!3!10!53 19","magazine!1!3!51 69 30","medical brace!3!10!53 67","metal detector!6!10!52 31 17 86 23  71 35","military helmet!9!3!53 12 86 89 103","motorcycle helmet; football helmet!9!3!53 12 17 84 86 103","motorcycle jacket!10!3!53 59 38 54 17 73 77 84 86 55 103","mouse trap!3!1!53 17 19 71","necklace!12!1!53 66 102","newspaper!1!3!51 14 15 16 17 18 19 20 21 22 23 24 25 69 27 29 30","notebook; journal; sketchbook!6!3!52 14 15 18 19 21 82 23 24 26 28  29 35","package{s} of hot dogs!3!3!51 45 47 49","pack{s} of chemical light sticks (5 sticks)!8!1!53 57 17 73 76 80 81 83 86 92  71 103","pack{s} of chewing gum; pack{s} of Blackjack chewing gum!6!.5!52 45 82 100 49 29 30","pack{s} of cigarettes!13!1!53 63 82 100","pair{s} of safety goggles!2!1!52 59 54 40 20 87 55 26","peaked cap; campaign hat!2!.5!51 15 59 54 40 83 55","pencil; pen!1!1!51 24 28","pipe; chain!3!3!53 17 20 84 105","pitchfork!3!10!53 13 71","plastic cup; glass!1!3!51 31 19 27 28 ","plate!1!3!51 19 27","polaroid camera!3!3!53 31 15 44 19 21 82 22 25 26  29 30","police baton; nightstick!3!3!53 83 105","police uniform!2!3!51 37 15 59 54 83 55","pool table!24!80!52 33 19 103","pork chop; {|}pork ribs{|}; pork roast; {|}pork spareribs{|}; pork loin chop{|s}; pork sausage!3!10!51 45 46 47","portable stove!3!3!53 31 57 17 73 86 91 92 70","portable water purification filter!14!3!52 31  71 103","pressure cooker; hot plate!6!10!52 31 19","pulse pistol!27!6!52 10 31 104 33 87 89 106 26 101","pulse rifle!36!20!52 10 31 104 33 89 26 107 101","purse; handbag!1!3!51 15 61 19 22 24 25 30","rabbit's {foot|feet}; {|pairs of }Starlight Casino dice; deck{s} of Elvis Presley playing cards; poker chip{s} from the Sands Casino in Reno; Gideon's bible; pocket crucifix; St. Jude pendant; St. Christopher figurine; Star of David necklace; {|pairs of }Masonic cufflinks; Order of Odd Fellows tie clip; class ring!3!.5!53 82 35","radiation suit!12!10!53 31 59 38 54 20 81 86 89 55 26 103","red Gingham dress; blue Gingham dress; yellow Gingham dress; green Gingham dress; black and white Gingham dress!2!.5!51 37 59 54 74 75 78 79 87 88 91 92","rifle scope!8!1!53 13 31 19 85 88 103","ring!7!.5!53 66 102","road map!1!1!51 14 17 73 77 86 91 92 22 30","roll{s} of 35mm film (24 shots)!6!.5!52 41 42","roll{s} of polaroid film (10 shots)!3!1!53 41 44","safe-cracking kit!20!20!52 31 15 16 86 90 71 103","scalpel!1!1!51 67 71","set{s} of horse tack!1!20!51 13","set{|s} of keys!1!.5!51 14 15 19 20 21 22 23 24 26 28 35","shawl!2!.5!53 13 59 38 54 19 75 78 79 88 91 92","shiv; switchblade!3!1!51 16 84 86 90 105","shotgun shell!1!.5!53 0 11","slab{s} of bacon!3!1!51 45 19 47 49","sleeping bag; tent!1!10!51 57 17 73 86 92","sombrero!2!.5!52 13 59 40 77 85 92 55","stick{s} of beef jerky!3!1!51 45 19 47 49","stick{s} of dynamite!3!1!53 65 20 81","straw sun hat!2!.5!53 15 59 54 40 19 75 78 79 87 88 91 92 22 25","stun baton!11!3!52 83 89 105 103","suit{|s} of riot gear!15!20!53 12 31 15 16 83 86 23 103","sword; machete!3!3!52 73 88 89 105","tabletop radio!1!10!51 14 31 15 60 64 17 19 21 23 ","teargas grenade!3!1!53 15 65 83","thermos!11!3!53 57 17 19 85 86 103","toaster!1!10!51 31 19","toy robot!6!3!52 31 43 19 72","trenchcoat; sports jacket!2!.5!53 59 38 79 55","walkie-talkie!6!3!52 31 15 60 64 20 21 79 83 86 89 23 26","wanted poster!3!.5!53 73 77 83","whole chicken!3!10!51 45 46 47","will; contract; war bond; passport!1!1!51 102","wrench{es}; hammer!1!3!51 14 17 20 74 80 86  71","{|pairs of }Mary Jane shoes!2!.5!51 15 59 39 54 19 21 74 75 79 87 88 90 91 92 23","{|pairs of }black leather shoes!2!.5!51 15 59 39 54 19 21 73 74 75 76 79 80 83 87 88 89 90 91 92 55 23","{|pairs of }blue suede loafers; {|pairs of }saddle shoes!2!.5!53 59 39 54 88 55","{|pairs of }chaps!2!.5!51 36 13 59 54 85 55","{|pairs of }combat boots!2!.5!51 12 59 39 54 73 77 83 84 86 89 92 55 23","{|pairs of }cowboy boots!2!.5!51 59 39 54 19 73 77 78 79 80 81 84 85 86 88 90 91 92 22 55 ","{|pairs of }dice!3!.5!51 16 19 82 35 103","{|pairs of }dog tags!1!.5!51 89 23 35","{|pairs of }forceps!3!3!53 67 71","{|pairs of }military fatigues!2!3!51 37 59 54 86 89 55 23","{|pairs of }night vision goggles!10!3!52 36 31 59 43 54 83 86 89 55 23 103","{|pairs of }slacks {and a|with} button up shirt{s}!2!.5!51 37 59 19 74 75 87 88 91 92 55","{|pairs of }work boots!2!.5!51 12 59 39 54 73 77 78 81 83 84 86 88 90 92 55 23","{|sets of }football pads!11!10!53 12 17 84 86 103","{|suits of }makeshift metal armor!15!20!52 12 31 16 84 86 103","{|}beef brisket{|s}; beek flank steak{|s}; beef sirloin steak; beef prime rib; beef pot roast; beef rib roast; beef T-Bone steak!3!10!51 45 46 47","{|}binoculars!11!3!53 31 19 73 86 89 103","{|}bongos; flute!3!3!53 92 35","{|}brass knuckles!3!1!52 16 84 105","{|}jeans and a T-shirt; {|}jeans and a button up work shirt; {|}jeans and a flannel shirt; {|}jeans and a western shirt!2!.5!51 37 59 54 19 73 74 76 77 78 80 84 85 86 88 90 91 92 55");
var l=new r(["post","pre","glasses","injuries","military:tattoo","sailor:tattoo","tattoo","high","low","normal","common","rare","uncommon","kit:courier","kit:craftsperson","kit:doctor","kit:electrician","kit:gunslinger","kit:homesteader","kit:leader","kit:mechanic","kit:miner","kit:police","kit:raider","kit:rancher","kit:scavenger","kit:scientist","kit:settler","kit:soldier","kit:thief","kit:trader","kit:vagrant","innate","Agile","Attractive","Cunning","Persuasive","Smart","Strong","Tough","Willpower","Art","Athletics","Bargain","Business","Camouflage","Electrical Repair","Foraging","Forensics","Government","Homesteading","Horseback Riding","Humanities","Law","Maritime","Mathematics","Mechanical Repair","Medicine","Mining","Negotiate","Observation","Research","Scavenging","Spelunking","Tracking","Wayfinding","Archery","Explosives","Firearms","Melee Weapons","Military","Unarmed Combat","Blacksmith","Brewer","Cook","Glassblower","Leatherworker","Potter","Weaver","Woodworker","Chemical Engineering","Civil Engineering","Eletrical Engineering","Mechanical Engineering","Mining Engineering","Nuclear Engineering","Chinese","French","German","Italian","Russian","Spanish","Biology","Chemistry","Geology","Physics","Science","Social Science","Deceive","Forgery","Intimidate","Lockpicking","Pickpocket","Safe Cracking","Stealth","Streetwise","Communications","Computers","Cryptography","Programming","Robotics","Rocketry","Butcher","Carpenter","Clothier","Gunsmith","Machinist","Mason","Plumber","Wagonwright","Driving","Motorcycling","Pilot Aircraft","Trucking"]);l.register(o,"Air Force!68 70 122!59 69 71!10 28 4 9 0 1","this.assignRank(c);","Army!68 70!59 69 71 45!10 28 4 9 0 1","this.assignRank(c);","Bounty Hunter!68 100!43 45 51 64 65 69 71 104 105 121!12 3 17 8 0","","Business Executive; Manager!43 44!49 53 55 59 86 87 88 89 90 91!12 9 1","","Carnie!43 98!60 62 105 120!12 8 1 6","","Clerk; Sales Clerk; Secretary; Salesman; Hotel Clerk; Motel Clerk; Warehouse Clerk!44!43!10 8 1","","Coast Guard!54 68 70!59 69 71!11 28 4 9 0 1 5","this.assignRank(c);","Courier!51 65!66 68 120 121 122 123!12 13 9 0","","Craftsperson!43!41 44 72 73 74 75 76 77 78 79!10 14 9 0","","Doctor!57!61 92 93 96 48!11 7 15 0 1","c.honorific = 'Doctor';","Elementary school teacher; Middle school teacher; high school teacher!61!41 42 52 55 92 93 94 95 96 97!10 2 9 1","","Engineer!55 61!107 110 111 80 81 82 83 84 85!12 9 1","","Homesteader; Farmer!50!42 43 46 56 60 72 73 74 75 76 77 78 79 120 123!10 18 9 0","","Innate!!33 34 35 36 37 38 39 40!10 32","","Librarian; Archivist!61!86 87 88 89 90 91 107!12 2 9 1","","Locksmith!101!43 44 56 103 107!11 16 20 9 0 1","","Marine!68 70!59 69 71 65 45!10 28 4 9 0 1 5","this.assignRank(c);","Mayor; Council Member!43 49!44 60!11 7 19 0","","Mechanic!46 56!43 106 107 108 109 110 111!10 20 9 0 1","","Miner!58!46 56 63 67!10 21 8 0 1","","Navy!54 68 70 122!59 69 71!12 28 9 0 1 5","this.assignRank(c);","Newspaper Reporter!60 61!49 98 105 106!12 2 9 1","","Police!68!42 49 59 60 71 100 105!12 22 9 0 1","this.assignRank(c);","Professor!61!41 52 53 55 57 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 106 107 108 109 110 111!11 2 7 26 1","c.degree = 'Ph.D.'","Raider!68 69!45 51 64 66 67 71 98 100 104 121!12 3 23 8 0 6","","Rancher; Cowhand!51 68!42 43 47 50 60 64 65!10 24 9 0 1","","Scavenger!62 65!47 60 101 103 66 69 68!10 3 25 9 0","","Scientist!61!55 92 93 94 95 96 97 106 107 108 109 110 111!11 2 7 26 0 1","","Settler!50!42 43 46 56 60 72 73 74 75 76 77 78 79 120 123 105!10 27 9 0","","Thief!98 100 105!35 101 99 102 103 104 69 108 43!10 29 8 0 1","","Trader!43 44!35 46 53 56 59 62 91 98 105 106 36!12 2 30 9 0","","Tradesperson!43!44 112 113 114 115 116 117 118 119!10 14 9 0","");var c=new i(["clientele:lobrow","clientele:nobrow","cluster:low","cluster:medium","cluster:none","common","rare","uncommon","encampment","roadside","settlement","town","trade:any","trade:buylow","trade:currency","trade:luxuries","trade:necessities","trade:sellhigh","trade:stocked"]);c.register("Bar; Tavern; Saloon!May have bottles to purchase.!trader!!alcohol -bottleofwine!50!!!5 0 1 4 5 10 14","Biker Shop!!Biker Gang!!kit:raider | weapon | ammo | drug!100!!!6 0 2 6 9 12 13","Blacksmith!Will forge custom work or repair items.!Craftsperson!blacksmith!!!!!7 1 9 10 11 14 16 7","Bookstore!!trader!!publication!100!!!7 1 4 10 13 14 16 18 7","Butcher Shop; Meat Market!Will slaughter livestock (chickens 1T; pigs/goats 3T; cattle 6T).!trader!Butcher!meat -canoffidodogfood -preserved!100!!!7 1 2 10 14 15 16 17 7","Clothing Store; Outfitters; Mercantile!!trader!!clothing -military -industrial!100!!!5 1 2 5 8 10 13 14 16 18","Diner; Cafe; Restaurant; Drive-Thru; Roadhouse!A hot meal for 4T.!trader!!prepared food!!!!6 1 4 6 9 14","Diner; Cafe; Restaurant; Eatery; Luncheonette!A hot meal for 3T.!trader!!prepared food!!!!5 1 4 5 10 11 14","Feed Store!Bags of feed for 4T.!trader!!!!!!5 1 5 9 10 12 13","General Store; Mercantile; Trading Post!!trader!!-kit:personal -publication -military -food -firearm -ammo -research -br!50!3!!5 1 4 5 10 12 13","Gunsmith; Gun Shop; Firearms; Shooting Range!!tradesperson!Gunsmith!firearm -br!30!!10!7 1 4 10 14 15 16 17 18 7","Hardware Store!!tradesperson!Mechanical Repair!tool | toy | camping!50!1!20!7 1 3 9 10 11 14 16 18 7","Icehouse!They sell ice.!trader!!!!!!6 1 6 11 14 16","Liquor Store!!trader!!alcohol!100!!!6 0 1 4 8 6 9 10 14","Livestock!Will have some combination of chickens (4T), pigs (10T), goats (10T), and/or cattle (18T) for sale. Will not generally buy livestock (find a slaughterhouse or butcher).!trader!!!!!!5 1 5 10 12 13","Locksmith!Can open anything you bring to them, no questions asked (3T).!locksmith!!!!!!6 1 4 6 10 11 14 15 16","Mart; Market; Groceries!!trader!!food -ration!100!!!5 1 2 5 8 10 13 14 16","Pawn Shop; Antique Store!!trader!!-food -rare -ammo -weapon -luxury -scifi!50!3!!5 6 1 4 5 6 10 12 17","Pottery Shop!!tradesperson!Potter!-br pottery!100!!!7 1 2 10 14 16 7","Repair Shop; Electronics Shop!Electrical repair (2-6T).!mechanic!Electrical Repair!electronics | communications!20!!!7 1 4 10 11 12 13 18 7","Repair Shop; Service Station!Mechanical repair (2-6T).!mechanic!Mechanical Repair!br -firearm -house -electronics!10!!!7 1 4 10 11 12 13 18 7","Sporting Goods Store!!trader!!sport | camping!!!!6 1 3 6 9 10 12 13","Tattoo Parlor; Tattoos!3-5T for a tattoo.!trader!Art!!!!!7 0 10 14 15 16 7"),a.exports={getPlaces:function(){return["Agricultural","Automotive","Civic","Criminal","Garage","Hospital","House","Industrial","Institution","Lodging","Military","Office","Public","Research","Restaurant","School","Tourism","Travel"]},getLocations:function(){return["Encampment","Roadside","Settlement","Town"]},itemDatabase:s,professionDatabase:l,storeDatabase:c}},{"../db/item_database":5,"../db/profession_database":6,"../db/store_database":7,"../models/atomic_profession":25}],15:[function(e,a,t){"use strict";function n(){return 18+d.nonNegativeGaussian(7)}function r(e,a){var t=e.male?"female":"male",n=k(),r=new g({name:w({gender:t,race:n}),race:n,profession:u(a[0].profession),gender:t,age:d.bounded(e.age+d.gaussian(3),18)});a.push(r);var i=new p({parent:e,other:r,relationship:"couple"});return e.family=r.family=i,d.test(80)&&(i.relationship="married",d.test(90)&&(i.female.name.family=i.male.name.family)),i}function i(){return d.nonNegativeGaussian(2.5,1)||i()}function o(e,a){var t=i();if(e.female.age<40){for(var n=0;t>n;n++)s(e,a);var r=d.nonNegativeGaussian(4,1);c(a,r)}}function s(e,a){var t=d.random(["male","female"]),n=new g({name:w({gender:t,race:e.female.race}),race:e.female.race,gender:t,age:d.roll("1d3")});a.push(n),n.name.family=e.male.name.family,c(a,n.age+d.roll("1d3-1")),e.children.push(n),n.family=e}function l(e,a){var t=d.random(e.children);if(!t)throw new Error("No child in this family");var r=n();return t.age>=r?t:(c(a,r-t.age),t)}function c(e,a){e.forEach(function(e){e.age+=a})}function u(e){if(!e)throw new Error("There should always be a related profession");if(d.test(40))return e;var a=d.intersection(["high","low","normal"],f.find(d.toTag(e)).tags);return f.find(a+" -pre -innate").names[0]}function h(e){e.forEach(function(a){var t=v({name:a.name,profession:a.profession||u(e[0].profession),age:a.age,gender:a.gender,equip:!1});d.extend(a,t);var n=a.family;delete a.family,n.isParent(a)?d.test(Math.sqrt(a.age))?(a.status="absent",n.relationship="married"===n.relationship?"divorced":"separated"):d.test(Math.sqrt(a.age))&&(a.status="deceased",n.relationship=n.male===a?"widow":"widower"):d.test(Math.sqrt(a.age))&&(a.status="deceased"),a.profession&&(a.inventory=_({profession:a.profession}))})}function m(e,a,t,n){if(o(e,a),n-1>t){var i=l(e,a),s=[i];s.forEach(function(i){var o=r(i,a);e.couples.push(o),e.children.splice(e.children.indexOf(i),1),m(o,a,t+1,n)})}}var d=e("../ion"),f=e("./data").professionDatabase,g=e("../models/character"),p=e("../models/family"),y=e("../models/relationship"),b=e("../tables/rarity_table"),v=e("./character").createCharacter,k=e("./character").createRace,w=e("./character_name"),_=e("./bag").createKit,S=(f.find("innate"),{grandmother:{g:"female",a:0,r:["grandson","granddaughter"],n:25},grandfather:{g:"male",a:0,r:["grandson","granddaughter"],n:25},aunt:{g:"female",a:1,r:["niece","nephew"],n:50},uncle:{g:"male",a:1,r:["niece","nephew"],n:50},mother:{g:"female",a:1,r:["son","daughter"],n:80},father:{g:"male",a:1,r:["son","daughter"],n:100},brother:{g:"male",a:2,r:["sister","brother"],n:100},sister:{g:"female",a:2,r:["sister","brother"],n:100},cousin:{g:null,a:2,r:["cousin"],n:25},niece:{g:"female",a:2,r:["aunt","uncle"]},nephew:{g:"male",a:2,r:["aunt","uncle"]},son:{g:"male",a:2,r:["mother","father"]},daughter:{g:"female",a:2,r:["mother","father"]},grandson:{g:"male",a:2,r:["grandmother","grandfather"]},granddaughter:{g:"female",a:2,r:["grandmother","grandfather"]}}),B=[];for(var C in S)S[C].name=C,B.push(d.titleCase(C));var M=(new b).add("common",S.mother).add("common",S.father).add("common",S.brother).add("common",S.sister).add("uncommon",S.aunt).add("uncommon",S.uncle).add("uncommon",S.cousin).add("rare",S.grandmother).add("rare",S.grandfather);a.exports.createFamily=function(e){e=e||{},e.generations=e.generations||2,e.parent=e.parent||{},e.parent.age=e.parent.age||n();var a=v(e.parent),t=[a],i=r(a,t),o=i;return e.generations>1&&m(i,t,1,e.generations),h(t),o},a.exports.getRelationships=function(){return B.sort()},a.exports.createRelationship=function(e){e=d.extend({},e||{}),e.equip=d.isBoolean(e.equip)?e.equip:!0;var a,t,r=e.older?S[e.older.toLowerCase()]:M.get(),i=S[d.random(r.r)],o=Math.abs(r.a-i.a);do{a=n(),t=n();for(var s=0;o>s;s++)t+=n()}while(o>0&&18*o>t-a);var l=atomic.createCharacter({age:t,gender:r.g,profession:e.profession,equip:e.equip}),c=atomic.createCharacter({age:a,race:d.test(r.n)?l.race:atomic.createRace(),gender:i.g,profession:e.profession,equip:e.equip}),u=r===i?r.name+"s":r.name+" and "+i.name;return e.familyName&&(l.name.family=e.familyName),d.test(r.n)&&(c.name.family=l.name.family),new y(l,c,u)}},{"../ion":24,"../models/character":27,"../models/family":28,"../models/relationship":36,"../tables/rarity_table":40,"./bag":10,"./character":11,"./character_name":12,"./data":14}],16:[function(e,a,t){"use strict";function n(e,a){var t=l.find(e);a.members.forEach(function(e){e.traits.Military=.5,t.assignRank(e),e.traits.Military=1});var n=s.last(a.members),r=a.members[0].honorific;n.traits.Military=4;do t.assignRank(n);while(n.honorific===r)}function r(e,a){return e.is("food")||e.is("kit:personal")}function i(e){return m[s.test(80)?"both":e.male?"male":"female"]}function o(e){var a=i(e),t=s.random(a);return e.name.nickname=s.format(t,e.name),t}var s=e("../ion"),l=e("./data").professionDatabase,c=e("./character").createCharacter,u=e("../models/gang"),h={"Biker Gang":{prof:"raider",nicks:100,traits:{Motorcycling:1},count:"3d4-2",mil:!1,names:["Pagans","Outlaws","Bandidos","Mongols","Vagos Motorcycle Club","Free Souls","{Grim |}Reapers","Gypsy Jokers","Highwaymen","Iron Horsemen","Rebels","Comanchero","Devil's Disciples","Diablos","Finks","58s","Road Devils","{Lone |}Legion","Road {Devils|Knights}","Skeleton Crew","Low Riders"]},"Street Gang":{prof:"thief",nicks:100,count:"1d4+1",mil:!1,names:["Magnificents","Purple Hearts","Coasters","Businessmen","Gladiators","{Earls|Dukes|Counts|Barons|Lords}","Daggers","Big Dogs","Young Lords","Imperial Hoods","Bulls","Lightenings","Crowns","Senators","Hawks","Savages","Lucky Seven","Gents","Enchanters"]},"Raiding Gang":{prof:"raider",count:"3d4-1",nicks:90},"Scavenger Party":{prof:"scavenger",count:"1d4+1",nicks:50},"Cowboy Posse":{prof:"rancher",count:"1d5+1",nicks:20},"Cattle Rustler Gang":{prof:["rancher","rancher","scavenger","thief"],count:"1d3+1",nicks:50},"Army Patrol":{prof:"army",count:"1d3*4",mil:"army",nicks:5},"Marine Patrol":{prof:"marine",count:"1d3*4",mil:"marine",nicks:15}},m={female:['{given} "The {Queen|Vixen|Waitress|Witch}" {family}','"{Ma|Baby Blue Eyes|Fat Girl|Gold Digger|Hot Lips|Monkey Girl|Repo Girl|Roxy|Sweet Cakes|Wild Woman}" ({given} {family})'],male:['{given} "{Wild|Repo|Hatchet|Ice} Man" {family}','"{Bugsy|Pa|Bag Man|Monkey Boy|Muscles|Caveman|Maverick|Music Man|Nice Guy|Pretty Boy}" ({given} {family})','{given} "The {Hitman|Sandman|Watchman|Rifleman|Gunman|Trigger Man}" {family}','{given} "{Lil|Fat|Big} {Loco|Man|Boy|Daddy|Tuna} {family}"'],both:['"{Big|Fat|Little|Skinny|Greedy|Crazy|Trigger|Two-Finger|Three-Finger|Young|Old|Doc|Lowdown|Rowdy} {given}" {family}','{given} "The {Agitator|Ant|Bag|Banker|Barber|Blast|Bloodhound|Boot|Brain|Brains|Bug|Bull|Burnout|Bystander|Cartridge|Cheater|Clown|Cruiser|Dasher|Dentist|Duke|Fence|Ghost|Reaper|Groundhog|Hammer|Hatchet|Joker|Kid|Killer|Knife|Lead Foot|Machine|Menace|Monster|Mouse|Rat|Prairie Dog|Mouthpiece|Mumbler|Ox|Rabbit|Razor|Rev|Roach|Saint|Show|Shotgun|Snake|Sore|Suit|Trigger|Unwanted|Viper|Waiter|Wall|Watcher|Weasel|Whisperer|Wire|Wolf|Zealot|Zero|Zookeeper|Plumber|Kleaner}" {family}','"{Ammo|Angel|Animal|Baby Face|Babycakes|Baldo|Bananas|Band-Aid|Bats|Beans|Beef|Bench|Bix|Black Eye|Blackjack|Blaze|Bloody|Blue Eyes|Blue Nose|Books|Boxcars|Bugs|Bugsy|Butterfingers|Candles|Coins|Cold Finger|Crackers|Cranky|Creaky|Cue Ball|Cuts|Dasher|Devious|Dice|Digger|Droopy|Eyes|Fangs|Fast Trigger|Flames|Flowers|Foot Long|Framed|Freckles|Free Style|Frosty|Goldie|Greasy Thumb|Great White|Ha-Ha|Half Full|Happy|Hell Raiser|Holy Smoke|Hot Shot|Icepick|Itchy|Jezebel|Kid Blast|Kid Twist|King Kool|Knots|Knuckles|Ladykiller|Lefty|Long Hair|Looney|Lucky|Machine Gun|Maniac|Matches|Midnight|Moneybags|Needles|Nitro|Numbers|Old Creepy|One Arm|Patch-Eye|Payola|Peanuts|Pee Wee|Pinky|Popcorn|Pork \'n Beans|Roadkill|Roulette|Scarface|Scars|Scumbag|Seven Clip|Shades|Shady Eyes|Shaggy|Sharp Edge|Sharpie|Shiny|Shocker|Short Stack|Side Step|Silver Dollar|Skidmarks|Slingshot|Sluggo|Smiley|Smokey|Sneakers|Spanky|Sparkey|Spinner|Squeaky|Squinty|Sticks|Sticky Fingers|Stonewall|Tick Tock|Toothless|Trails|Twinkle Cakes|Two Guns|Two Holes|Wheels|Wild Child}" ({given} {family})']},d=s.keys(h);a.exports.getGangTypes=function(){return d.sort()},a.exports.assignNickname=o,a.exports.createGang=function(e){e=s.extend({},e||{});var a=e.type||s.random(d),t=h[a];if(s.isUndefined(t))throw new Error("Invalid gang type: "+a);var i=s.isNumber(e.count)?e.count:s.roll(t.count),l={kind:a};t.names&&(l.name=s.random(t.names));var m=new u(l);return s.times(i,function(){var e=c({profession:s.random(t.prof),traits:t.traits||{}});e.initiative=s.roll("2d6")+e.trait("Agile"),e.hp=10+e.trait("Tough"),s.test(t.nicks)&&o(e),e.inventory.filter(r),m.add(e)}),t.mil&&m.members.length&&n(t.mil,m),m.members.sort(function(e,a){return e.initiative<a.initiative?1:e.initiative>a.initiative?-1:0}),m}},{"../ion":24,"../models/gang":29,"./character":11,"./data":14}],17:[function(e,a,t){"use strict";function n(e,a){for(var t=new Date(e.getTime());a.dayOfWeek&&s[t.getDay()]!==a.dayOfWeek;)t.setDate(t.getDate()+1);return t}function r(e){if(e=e||{},e.period=e.period||"weekly",e.startDate=e.startDate||"1955-12-31",e.endDate=e.endDate||"1958-07-14",e.format=e.format||"full",!c[e.period])throw new Error(e.period+" is not a valid period.");e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate);for(var a=e.startDate,t=[];;){c[e.period](a,e);var r=n(a,e);if(r>=e.endDate)break;if("full"===e.format)var o=i.format("{0} {1} {2} {3}",s[r.getDay()],r.getDate(),l[r.getMonth()],r.getFullYear());else var o=i.format("{0} {1}",l[r.getMonth()],r.getFullYear());t.push(o)}return t}var i=e("../ion"),o=6048e5,s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c={weekly:function(e){e.setTime(e.getTime()+o)},monthly:function(e){1!==e.getDate()&&e.setDate(1),e.setMonth(e.getMonth()+1)},biweekly:function(e,a){var t=1===e.getDate()?15:1;e.setDate(t),1===t&&e.setMonth(e.getMonth()+1)},bimonthly:function(e){e.setMonth(e.getMonth()+2)}};a.exports=r},{"../ion":24}],18:[function(e,a,t){"use strict";function n(e,a){var t=parseInt(/#(\d+)/.exec(e)[1],10),n=parseInt(/#(\d+)/.exec(a)[1],10);return t-n}function r(e,a,t){var n="rare"===a?5:"uncommon"===a?3:1;d(t).forEach(function(t,r,i){p.add(a,{name:"news magazine",title:e+", "+t+", #"+r+" of "+i.length,enc:1,value:n,tags:["collectible"]})})}function i(e,a,t){var n="rare"===a?5:"uncommon"===a?3:1;d(t).forEach(function(t,r,i){g.add(a,{name:"comic book",title:e+", "+t+", #"+r+" of "+i.length,enc:1,value:n,tags:["collectible"]})})}function o(e,a,t,n){return e.map(function(r,i){var o=a+" poster",s=u.format("{0} #{1} of {2}",u.titleCase(r.replace(/_/g," ")),i+1,e.length);return{name:o,title:s,image:"images/"+a+"/"+r+t,value:n,enc:1,tags:["collectible"]}})}function s(e){var a=u.isString(e)?e:e&&e.type||u.random(l());if(!S[a])throw new Error(a+" is an invalid collectible, use "+Object.keys(S).join(", "));var t=S[a];return new m(t instanceof f?t.get():u.random(t))}function l(){return Object.keys(S)}function c(e){var a=u.isString(e)?e:e&&e.type||u.random(Object.keys(S)),t=S[a],r=Math.floor(u.gaussian(t.length/8,t.length/4));if("baseball  cards"===a&&u.test(20)){var i=u.random(Object.keys(k));return"Collector is looking for any team baseball card for the "+i+"."}for(var o=new h;o.size()<r;)o.add(u.random(t).title);var s=o.toArray();return s.sort(n),"Collector is looking for "+a+": "+s.join(", ")+"."}var u=e("../ion"),h=e("../models/ion_set"),m=e("../models/item"),d=e("./historical_time_series"),f=e("../tables/rarity_table"),g=new f(u.identity,!1),p=new f(u.identity,!1),y=["am_i_proud","america_calling","are_you_playing_square","be_a_victory_farm_volunteer","books_are_weapons_in_the_war_of_ideas","both_are_weapons","carry_on_don't_be_carried_out","do_the_job_he_left_behind","farm_scrap_builds_tanks_&_guns","fontana_dam","food_is_a_weapon","food_is_fighting_strength","for_service_in_civilian_defense","forgetfulness_helps_the_enemy","foxy_foreign_ideas","free_speech_doesn't_mean_careless_talk","groundwork_for_victory","harvest_war_crops","help_harvest","help_win_the_war","here's_a_war_job_for_you","hunger_breeds_madness","is_your_trip_necessary","it's_only_1000_minutes_from_cheyenned_to_berlin","join_the_schools_at_war_program","my_tank's_in_the_war_too","on_time_all_the_time","plan_a_victory_garden","plan_today_build_tomorrow","processed_food_is_ammunition","rationing_means_a_fair_share_for_all_of_us","report_faulty_wiring","right_is_might","save_your_cans","scrap","scrap_will_help_win","share_a_ride","share_your_car","shoot_to_kill","silence_means_security","soldiers_without_guns","stamp_out_black_markets","sucker","take_your_place_in_civilian_defense","the_2nd_front_depends_on_the_home_front","the_army_needs_more_lumber","the_inland_way_for_the_USA","the_key_to_victory","the_world_cry_food","this_war","today","together_we_can_do_it","together_we_win","vacation_at_home","victory_is_a_question_of_stamina","victory_patterns","wanted_for_victory","washington_beckons_you","we're_needed_again","we_are_helping_with_salvage","work_in_a_food_processing_plant","your_country_needs_soybeans","your_victory_garden"],b=["100_rifles","23_paces_to_baker_street","aces_high","atomic_city","atomic_kid","atomic_man","atomic_monster","atomic_submarine","atomictpistols","bad_mans_river","bandolero","bullet_for_a_badman","canadian_mounties_vs_atomic_invaders","cattle_empire","cheaper_by_the_dozen","count_five_and_die","crack_in_the_mirror","day_of_the_triffids","desert_hell","dig_that_uranium","east_of_eden","emmanuelle","england_made_me","family_doctor","frankenstein_and_the_monster_from_hell","gang_war","garden_of_evil","gone_with_the_wind","guns_for_san_sebastian","hombre","hotel_sahara","impulse","in_love_and_war","intent_to_kill","julius_caesar","junior_army","kiss_of_the_vampire","lion_of_the_desert","lost_lives","man_hunt","moon_zero_two","night_was_our_friend","nor_the_moon_by_night","operation_uranium","pretty_poison","return_of_the_texan","rocket_to_the_moon","rogues_yarn","sierra_baron","sumuru","sword_of_sherwood_forest","teenage_rebel","the_black_castle","the_brass_bottle","the_chalk_garden","the_curse_of_the_mummys_tomb","the_deep_blue_sea","the_dunwich_horror","the_fiend_who_walked_the_west","the_gamma_people","the_gift_of_love","the_hallelujah_trail","the_hellfire_club","the_hound_of_the_baskervilles","the_legend_of_frenchie_king","the_lieutenant_wore_skirts","the_long_hot_summer","the_man_who_never_was","the_man_with_the_x-ray_eyes","the_many_loves_of_hilda_crane","the_mummy","the_raid","the_reward","the_riddle_of_the_sands","the_sheriff_of_fractured_jaw","the_sleeping_tiger","the_sun_also_rises","the_viking_queen","the_wind_cannot_read","the_young_warriors","them","three_little_girls_in_blue","uraniumboom","villa","wolf_dog"],v=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XIV"].map(function(e,a){var t=23===a?"XYZ":String.fromCharCode(a+65),n="Encyclopedia Britannica vol. "+e+", letter "+t+", #"+(a+1)+" of 24";return{name:"encyclopedia",title:n,value:10,enc:5,tags:["collectible"]}}),k={"Baltimore Orioles":["George Zuverink","Jim Busby","George Kell","Joe Ginsberg","Billy O'Dell","Joe Durham","Billy Gardner","Jerry Walker","Eddie Miksis","Ken Lehman","Bob Nieman","Willy Miranda","Art Ceccarelli","Jack Harshman","Frank Zupo","Al Pilaik","Connie Johnson","Bob Boyd","Brooks Robinson","Bert Hamric","Billy Loes","Hal Brown","Gene Woodling","Foster Castleman","Gus Triandos","Jim Marshall","Milt Pappas","Arnie Portocarrero","Lenny Green"],"Boston Red Sox":["Ted Williams","Frank Sullivan","Ted Lepcio","Dick Gernert","Dave Sisler","Pete Daley","Billy Klaus","Jackie Jensen","Billy Consolo","Frank Baumann","George Susce","Haywood Sullivan","Leo Kiely","Tom Brewer","Gene Stephens","Frank Malzone","Pete Runnels","Jim Piersall","Don Buddin","Ike Delock","Bob Porterfield","Mike Fornieles","Marty Keough","Lou Berberet","Willard Nixon","Murray Wall","Sammy White","Bob Smith","Bill Renna","Frank Malzone","Ted Williams","Jackie Jensen"],"Chicago Cubs":["Dale Long","Cal Neeman","Dave Hillman","Lee Walls","Dick Drott","Chuck Tanner","Bobby Adams","Walt Moryn","Moe Drabowsky","Bobby Morgan","Taylor Phillips","Elvin Tappe","Jim Bolger","Bob Anderson","Jerry Kindall","Dick Littlefield","Turk Lown","Sammy Taylor","Ernie Banks","Jim Brosnan","Don Elston","John Goryl","Tony Taylor","Bobby Thomson","Gene Fodge","Ed Mayer","Glen Hobbie","Ernie Banks"],"Chicago White Sox":["Jim Rivera","Ron H. Jackson","Billy Piee","Bill Fischer","Luis Aparicio","Early Wynn","Jim Landis","Jim Derrington","Earl Torgeson","Les Moss","Jim Wilson","Al Smith","Bob Keegan","Bubba Phillips","Billy Goodman","Ray Moore","Sherm Lollar","Dick Donovan","Tito Francona","Walt Dropo","Don Rudolph","Earl Battey","Nellie Fox","Jerry Staley","Dixie Howell","Sammy Esposito","Tom Qualters","Nellie Fox","Luis Aparicio","Sherm Lollar"],"Cincinnati Reds":["George Crowe","Bud Freeman","Bob Thurman","Smoky Burgess","Joe Nuxhall","Gus Bell","Jerry Lynch","Harvey Haddix","Stan Palys","Bob Henrich","Tom Acker","Dee Fondy","Don Hoak","Johnny Temple","Willard Schmidt","Bill Wight","Johnny Klippstein","Alex Grammas","Frank Robinson","Hal Jeffcoat","Bob Purkey","Ed Bailey","Steve Bilko","Roy McMillan","Brooks Lawrence","Charley Rabe","Dutch Dotterer","Vada Pinson","Pete Whisenant","Johnny Temple","Frank Robinson","Ed Bailey"],"Cleveland Indians":["Bob Lemon","Hal Naragon","Don Mossi","Roger Maris","Chico Carrasquel","Dick Williams","George Strickland","Dick Tomanek","Russ Nixon","Vic Wertz","Joe Caffie","Mike Gaia","Cal McLish","Bud Daley","Mickey Vernon","Larry Raines","Bobby Avila","Minnie Minoso","Hoyt Wilhelm","Fred Hatfield","Herb Score","Rocky Colavito","Billy Moran","Mudcat Grant","Larry Doby","Ray Narleski","Billy Harrell","Carroll Hardy","Dick Brown","Gary Geiger","Don Ferrarese","Herb Score"],"Detroit Tigers":["Billy Hoeft","J.W. Porter","Lou Sleater","Tim Thompson","Al Kaline","Steve Boros","Frank Bolling","Gus Zernial","Jim Bunning","Harry Byrd","Ray Boone","Bob Shaw","Red Wilson","Reno Bertoia","Frank Lary","Johnny Groth","Billy Martin","Paul Foytack","Gail Harris","Lou Skizas","Hank Aguirre","Jim Hegan","Tom Morgan","Charlie Maxwell","Bill Taylor","Harvey Kuenn","Charley Lau","Vito Valentinetti"],"Kansas City Athletics":["Alex Kellner","Bill Tuttle","Bob Martyn","Joe DeMaestri","Wally Burnette","Billy Hunter","Harry Chiti","George Brunet","Hector Lopez","Ralph Terry","Milt Graff","Woodie Held","Duke Maas","Tom Gorman","Hal W. Smith","Virgil Trucks","Ned Garver","Mike Baxes","Frank House","Bob Cerv","Murry Dickson","Jack Urban","Ray Herbert","Dave Melton","Vic Power","Preston Ward"],"Los Angeles Dodgers":["Charlie Neal","Don Drysdale","John Roseboro","Don Zimmer","Duke Snider","Sandy Amoros","Johnny Podres","Dick Gray","Gil Hodges","Sandy Koufax","Roger Craig","Rube Walker","Jim Gilliam","Don Demeter","Carl Erskine","Gino Cimoli","Randy Jackson","Clem Labine","Elmer Valo","Don Newcombe","Danny McDevitt","Joe Pignatano","Pee Wee Reese","Don Bessent","Carl Furillo","Ed Roebuck"],"Milwaukee Braves":["Lou Burdette","Felix Mantilla","Hank Aaron","Del Rice","Ernie Johnson","Bob Hazle","Johnny Logan","Frank Torre","Wes Covington","Don McMahon","Bob Taylor","Bob Buhl","Red Schoendienst","Andy Pafko","Carl Sawatski","Casey Wise","Bob Trowbridge","Warrenahn","Ray Shearer","Bob Rush","Joe Adcock","Bill Bruton","Del Crandall","Carl Willey","Gene Conley","Eddie Mathews","Harry Hanebrink","Joe Jay","Eddie Mathews","Hank Aaron","Warrenahn"],"New York Yankees":["Hank Bauer","Gil McDougald","Sal Maglie","Norm Siebern","Darrell Johnson","Johnny Kucks","Bobby Richardson","Tom Sturdivant","Enos Slaughter","Mickey Mantle","Don Larsen","Marv Throneberry","Jerry Lumpe","Bob Grim","Bill Skowron","Bob Turley","Elston Howard","Ryne Duren","Harry Simpson","Whitey Ford","Andy Carey","Art Ditmar","Yogi Berra","Al Cicotte","Tony Kubek","Bobby Shantz","Bill Skowron","Mickey Mantle","Bob Turley"],"Philadelphia Phillies":["Rip Repulski","Ted Kazanski","Chuck Harmon","Joe Lonnett","Dick Farrell","Robin Roberts","Dave Philley","Harry Anderson","Willie Jones","Jack Meyer","Solly Hemus","Richiehburn","Warren Hacker","Jack Sanford","Granny Hamner","Mack Burk","Don Landrum","Jim Hearn","Bob Miller","Chico Fernandez","Stan Lopata","Don Cardwell","Wally Post","Curt Simmons","Bob Bowman","Pancho Herrera","Chuck Essegian","Ray Semproch"],"Pittsburgh Pirates":["Hank Foiles","Dick Groat","Robertoemente","Roy Face","Ron Kline","Bob Skinner","Jim Pendleton","Vern Law","Buddy Pritchard","Don Gross","Ted Kluszewski","Bill Virdon","Dick Rand","Bob Smith","Bill Mazeroski","Paul Smith","Gene Freese","Whammy Douglas","Bob Friend","Harding Peterson","Gene Baker","Bennie Daniels","Frank Thomas","Johnny O'Brien","John Powers","Danny Kravitz","Roman Mejias","Ron Blackburn","R.C. Stevens","Bob Friend"],"San Francisco Giants":["Willie Mays","Curt Balay","Mike McCormick","Darylencer","Valmy Thomas","Ozzie Virgil Sr.","Stu Miller","Willie Kirkland","Jim Finigan","Johnny Antonelli","Danny O'Connell","Dave Jolly","Whitey Lockman","Pete Burnside","Don Mueller","Eddie Bressoud","Ray Crone","Ray Katt","Paul Giel","Jim King","Ruben Gomez","Orlando Cepeda","Ray Jablonski","Hank Sa","Marv Grissom","Jim Davenport","Al Worthington","Bobeake","Ray Monzant","Bob Schmidt","Willie Mays"],"St. Louis Cardinals":["Eddie Kasko","Hobie Landrith","Morrie Martin","Del Ennis","Von McDaniel","Larry Jackson","Dick Schofield","Irv Noren","Alvin Dark","Billy Muffett","Joe Cunningham","Lindy McDaniel","Don Blasingame","Wally Moon","Lloyd Merritt","Herm Wehmeier","Hal R. Smith","Sam Jones","Ken Boyer","Gene Green","Wilmer Mizell","Bobby Gene Smith","Philark","Phil Paine","Joe Taylor","Curt Flood"],"Washington Senators":["Jim Lemon","Texevenger","Art Schult","Bud Byerly","Clint Courtney","Herb Plews","Bob Usher","Russ Kemmerer","Dick Hyde","Eddie Yost","Milt Bolling","Camilo Pascual","Ed Fitz Gerald","Chuck Stobbs","Roy Sievers","Rocky Bridges","Harmon Killebrew","Neil Chrisley","Albie Pearson","Pedro Ramos","Bobby Malkmus","Ralph Lumenti","Steve Koheck","Kenpromonte","Norm Zauchin","Whitey Herzog","Hal Griggs","Julio Becq"]},w=1,_=[];Object.keys(k).forEach(function(e){k[e].forEach(function(a){var t="Pennant brand 1958 baseball card{|s}",n=a+", "+e+", #"+w++ +" of 466";_.push({name:t,title:n,enc:0,value:3,tags:["collectible"]})})}),r("Atlantic Dispatch Magazine","uncommon",{period:"weekly"}),r("The Weekly Nation","uncommon",{period:"weekly",dayOfWeek:"Monday",startDate:"1953-12-31"}),r("Verve","common",{period:"monthly",format:"short",dayOfWeek:"Thursday"}),i("Atomic War Comics","common",{period:"bimonthly",startDate:"1953-11-31",format:"short"}),i("Atomic Age Combat","uncommon",{period:"monthly",startDate:"1956-11-31",format:"short"}),i("The Adventures of Captain Atom","common",{period:"monthly",format:"short"}),i("Space Action","common",{period:"monthly",format:"short"}),i("Giggle Comics","common",{period:"weekly"}),i("Midnight Mystery","uncommon",{period:"biweekly",startDate:"1955-06-06"}),i("The Hand of Fate","common",{period:"monthly",format:"short"}),i("Black Cobra","rare",{period:"monthly",format:"short"}),i("The Flame","uncommon",{period:"monthly",format:"short"}),i("Forbidden Worlds","uncommon",{period:"monthly",format:"short"}),i("Battlefield Action","uncommon",{period:"monthly",format:"short"}),i("War Stories","common",{period:"weekly",startDate:"1956-02-15"}),i("Blazing West","common",{period:"bimonthly",startDate:"1948-10-10"}),i("Madhouse Comics","rare",{period:"monthly",format:"short"}),i("Wonder Boy","uncommon",{period:"monthly",format:"short"});var S={"movie posters":o(b,"movie",".jpg",10),"propaganda posters":o(y,"propaganda",".gif",10),encyclopedias:v,"baseball cards":_,"news magazines":p,comics:g};a.exports={createMemorabilia:s,getMemorabiliaTypes:l,createMemorabiliaWanted:c}},{"../ion":24,"../models/ion_set":30,"../models/item":31,"../tables/rarity_table":40,"./historical_time_series":17}],19:[function(e,a,t){"use strict";function n(e){return i.random("River"===e&&i.test(100)?m:h)}function r(){var e=s();return i.test(10)?e.given:e.family}var i=e("../ion"),o=e("../tables/rarity_table"),s=e("./character_name"),l={Depression:["Alley","Arroyo","Basin","Canyon","Creek","Gap","Gulch","Gully","Hollow","Valley"],Flat:["Flat{|s}","Prairie","Meadow{|s}","Field","Range","Plain"],Elevation:["Butte","Bluffs","Cliff","Mountain{|s}","Point","Pass","Spur","Ridge","Butte","Mesa","Gap","Rock","Hill{|s}","Summit","Plateau"],Water:["Spring{|s}","Lake","Pond","Bar","Basin","Creek","River","Reservoir","Rapids","Stream","Wetlands","Swamp","Falls","Dam","Slough"],Junction:["Bend","Bridge","Junction","Crossing"],Woods:["Woods","Forest"]},c=["Adobe","{Agate|Amethyst|Geode|Diamond}","Alkali","Ant{|hill}","Antelope","Antler","Anvil","{Apple|Peach}","Arrow{|head|tail}","{Arlington|American|Army|Military|Soldier}","{Arapahoe|Navajo|Sioux}","{Alaska|Arizona|Wyoming|Colorado|California}","Artesian","{Ash|Pine|Oak|Aspen|Cottonwood}","Bachelor","Badger","Badlands","Bald","Bann{er|ock}","Bastard","Barber","Bard","Barrel","Battle","Bear{|paw|tooth|trap}","{Bear|Elk} Trap","Beaver","Bell","Bench","Berry","Big{| Hill| Horn| Chief| Cow}","Biscuit","Bison","Bobcat","Bone{|yard}","Boulder","Brush","Buck{|skin}","Buffalo","Bull","Burnt","Buzzard's","Calamity","Cedar","Chalk","Chief","Chimney","Cinder","Clay","Coal","Coffin","{Copper|Iron|Limestone|Sulphur}","Cornstalk","Cotton{|wood}","Cougar","Coyote","Crescent","Crooked","Crow","Deadwood","Deer","Dream","Dry","Eagle","{|Big |Little }Elk","Eureka","Fox","Frog","Gold Dust","Goose","Gopher","Granite","Green","Grinders","Grouse","Gypsum","Hawk","Hay{|stack}","Hells","Honey{|comb}","Horse{shoe| Pasture}","Indian","Juniper","{Little |}Sheep","Lone{| Tree}","Long","{Monolith|Monument}","Mud","{Mule|Burro}","Phantom","Pinnacle","Poker","Pole","Potter","Prairie Dog","Railroad","Rattlesnake","Rock{|y}","Round","Sage","Sawmill","Shady","Shotgun","Skeleton","Slaughter","Soda","Squaw","Stone","Tungsten","Twin","Wagon{|wheel|hound}","Wild","Willow","Wolf","Young","{Bad|Black|Dead|Mad} Dog","{Big |Little |}Pine{| Flat}","{Big|Black|Broken|Red} Rock","{Dead|Blind} Man's","{Saddle|Dead|Lame|Happy|Wild} Horse"],u=["Alfalfa","Big Curve","Bottom Dollar","Buckeye","Buzzard's Roost","Casa Diablo","Deadwood","Faraday","Harmony","Hidden Valley","Irondale","Jack Rabbit","Last Chance","Saddlestring","Leadville","Palo Verde","Pea Vine","Point Blank","Red-Eye","Sunshine","Tanglefoot","Utopia"],h=["Bad","{Bald|Bare}","Big","Dead","Happy","New","Middle","{North|South|East|West}","Lost","Old","Little","{Brown|Silver|Gold|Black|Red|Blue|White|Yellow}"],m="{North|South|East|West|Middle} Fork of the",d=new o(i.identity,!1);
d.add("rare",function(e){return i.random(h)+" "+i.random(l[e])}),d.add("uncommon",function(e){var a=i.random(l[e]);return n(a)+" "+r()+" "+i.random(l[e])}),d.add("uncommon",function(e){var a=i.random(l[e]);return n(a)+" "+i.random(c)+" "+a}),d.add("rare",function(e){var a=i.test(50)?i.random(c):r();return a+" Trail "+i.random(l[e])}),d.add("rare",function(e){return i.random(u)}),d.add("common",function(e){return i.random(c)+" "+i.random(l[e])}),d.add("common",function(e){return r()+" "+i.random(l[e])});var f=i.keys(l);a.exports.createPlaceName=function(e){return e=-1===f.indexOf(e)?i.random(f):e,i.random(d.get()(e))},a.exports.getLandformTypes=function(){return f}},{"../ion":24,"../tables/rarity_table":40,"./character_name":12}],20:[function(e,a,t){"use strict";function n(e,a,t){(100==e||i.test(e))&&a.push(i.random(t))}function r(){if(i.test(5))return"The "+i.titleCase(i.random(h));var e=[];return n(35,e,l),n(100,e,c),n(15,e,c),n(10,e,["fiction"]),i.test(80)||i.intersection(e,g).length?e.push(i.random(u)):e.push(i.random(f)),i.titleCase(i.unique(e).join(" "))}var i=e("../ion"),o=e("../models/item"),s=e("./data").itemDatabase,l=["all","amazing","astonishing","atomic","baffling","bolshevik","boy's","complete","dark","dynamic","exciting","favorite","gentleman's","girl's","glamorous","haunted","incredible","lady's","northwest","popular","railroad man's","ranch","saucy","spicy","startling","strange","thrilling","weird","women's","wonderful"],c=["adventure","air","combat","cowboy","detective","fantasy","far west","FBI","flying","frontier","wild frontier","ghost","high seas","horror","indian","jungle","library science","love","new love","northwest","outdoor","pirate","prison","ranch","romance{|s}","sci-fi","science","supernatural","sweetheart","war","western"],u=["almanac","weekly","magazine","quarterly","stories","tales","thrills"],h=["all-story","argosy","black mask","cavalier","keepsake","ladies home almanac","ocean","scrap book","apache trail"],m=["three","white","deep","away","back","beyond","great","lost","big","like","little","living","new","long","two","small","dead","never","last","best","dark","old","second","first","one","cold","red","bad","final","broken","just","perfect","green","blue"],d=["man","summer","witch","time","earth","house","heaven","mind","devil","flight","book","mother","star{|s}","king","thing{|s}","stairs","universe","glass","eye","darkness","lady","end","sun","call","woman","water","dance","mars","light","moon","black","winter","wind","queen","river","dragon","skin","ghost{|s}","alien","","garden","war","death","monster{|s}","dead","never","story","bones","soul","blood","mirror","children","beast","men","fire","hell","know","demon","planet","snow","dark","ice","god{|s}","way","heart","stone","door","world{|s}","human","dream{|s}","second","family","fall","boy","song","city","road","place","gift","sky","life","shadow{|s}","people","flesh","final","memory","tale","wings","day{|s}","home","game","space","tree","eyes","dust","room","name","rain","box","thing","sea","night","love","girl","machine","child","daughter","future","angel","magic","dream","hand"],f=["mysteries","westerns","thrillers","{love|ghost|true} stories"],g=["ghost","mystery","new love","western","high seas"];a.exports.createMagazine=function(){var e=s.find({tags:"magazine"});return e=new o(e),e.title=r(),e},a.exports.createBook=function(){throw new Error("Not implemented")},a.exports.createTitle=function(){return i.format("The {0} {1} of {2}",i.random(m),i.random(d),i.random(d))}},{"../ion":24,"../models/item":31,"./data":14}],21:[function(e,a,t){"use strict";function n(){return 18+d.nonNegativeGaussian(7)}function r(e,a){var t=e.male?"female":"male",n=w(),r=new g({name:_({gender:t,race:n}),race:n,profession:u(a[0].profession),gender:t,age:d.bounded(e.age+d.gaussian(3),18)});a.push(r);var i=new p({parent:e,other:r,relationship:"couple"});return e.family=r.family=i,d.test(80)&&(i.relationship="married",d.test(90)&&(i.female.name.family=i.male.name.family)),i}function i(){return d.nonNegativeGaussian(2.5,1)||i()}function o(e,a){var t=i();if(e.female.age<40){for(var n=0;t>n;n++)s(e,a);var r=d.nonNegativeGaussian(4,1);c(a,r)}}function s(e,a){var t=d.random(["male","female"]),n=new g({name:_({gender:t,race:e.female.race}),race:e.female.race,gender:t,age:d.roll("1d3")});a.push(n),n.name.family=e.male.name.family,c(a,n.age+d.roll("1d3-1")),e.children.push(n),n.family=e}function l(e,a){var t=d.random(e.children);if(!t)throw new Error("No child in this family");var r=n();return t.age>=r?t:(c(a,r-t.age),t)}function c(e,a){e.forEach(function(e){e.age+=a})}function u(e){if(!e)throw new Error("There should always be a related profession");if(d.test(40))return e;var a=d.intersection(["high","low","normal"],f.find(d.toTag(e)).tags);return f.find(a+" -pre -innate").names[0]}function h(e){e.forEach(function(a){var t=v({name:a.name,profession:a.profession||u(e[0].profession),age:a.age,gender:a.gender,equip:!1});d.extend(a,t);var n=a.family;delete a.family,n.isParent(a)?d.test(Math.sqrt(a.age))?(a.status="absent",n.relationship="married"===n.relationship?"divorced":"separated"):d.test(Math.sqrt(a.age))&&(a.status="deceased",n.relationship=n.male===a?"widow":"widower"):d.test(Math.sqrt(a.age))&&(a.status="deceased"),a.profession&&(a.inventory=k({profession:a.profession}))})}function m(e,a,t,n){if(o(e,a),n-1>t){var i=l(e,a),s=[i];s.forEach(function(i){var o=r(i,a);e.couples.push(o),e.children.splice(e.children.indexOf(i),1),m(o,a,t+1,n)})}}var d=e("../ion"),f=e("./data").professionDatabase,g=e("../models/character"),p=e("../models/family"),y=e("../tables/rarity_table"),b=e("../models/relationship"),v=e("./character").createCharacter,k=e("./bag").createKit,w=e("./character").createRace,_=e("./character_name"),S=(f.find("innate"),{grandmother:{g:"female",a:0,r:["grandson","granddaughter"],n:25},grandfather:{g:"male",a:0,r:["grandson","granddaughter"],n:25},aunt:{g:"female",a:1,r:["niece","nephew"],n:50},uncle:{g:"male",a:1,r:["niece","nephew"],n:50},mother:{g:"female",a:1,r:["son","daughter"],n:80},father:{g:"male",a:1,r:["son","daughter"],n:100},brother:{g:"male",a:2,r:["sister","brother"],n:100},sister:{g:"female",a:2,r:["sister","brother"],n:100},cousin:{g:null,a:2,r:["cousin"],n:25},niece:{g:"female",a:2,r:["aunt","uncle"]},nephew:{g:"male",a:2,r:["aunt","uncle"]},son:{g:"male",a:2,r:["mother","father"]},daughter:{g:"female",a:2,r:["mother","father"]},grandson:{g:"male",a:2,r:["grandmother","grandfather"]},granddaughter:{g:"female",a:2,r:["grandmother","grandfather"]}}),B=[];for(var C in S)S[C].name=C,B.push(d.titleCase(C));var M=(new y).add("common",S.mother).add("common",S.father).add("common",S.brother).add("common",S.sister).add("uncommon",S.aunt).add("uncommon",S.uncle).add("uncommon",S.cousin).add("rare",S.grandmother).add("rare",S.grandfather);a.exports.createFamily=function(e){e=e||{},e.generations=e.generations||2,e.parent=e.parent||{},e.parent.age=e.parent.age||n();var a=v(e.parent),t=[a],i=r(a,t),o=i;return e.generations>1&&m(i,t,1,e.generations),h(t),o},a.exports.getRelationships=function(){return B.sort()},a.exports.createRelationship=function(e){e=d.extend({},e||{}),e.equip=d.isBoolean(e.equip)?e.equip:!0;var a,t,r=e.older?S[e.older.toLowerCase()]:M.get(),i=S[d.random(r.r)],o=Math.abs(r.a-i.a);do{a=n(),t=n();for(var s=0;o>s;s++)t+=n()}while(o>0&&18*o>t-a);var l=v({age:t,gender:r.g,profession:e.profession,equip:e.equip}),c=v({age:a,race:d.test(r.n)?l.race:w(),gender:i.g,profession:e.profession,equip:e.equip}),u=r===i?r.name+"s":r.name+" and "+i.name;return e.familyName&&(l.name.family=e.familyName),d.test(r.n)&&(c.name.family=l.name.family),new b(l,c,u)}},{"../ion":24,"../models/character":27,"../models/family":28,"../models/relationship":36,"../tables/rarity_table":40,"./bag":10,"./character":11,"./character_name":12,"./data":14}],22:[function(e,a,t){"use strict";function n(e){var a=[];e.tags.forEach(function(e){S[e]&&(a=a.concat(S[e]))});var t=e.policy?[e.policy]:[];return t.push("Will trade for "+r.toList(a,r.identity,"or")+"."),e.tags.indexOf("trade:buylow")&&t.push("Unless receiving currency, this merchant buys low (half value)."),t.join(" ")}var r=e("../ion"),i=e("../models/bag"),o=e("../models/store"),s=e("../tables/table"),l=(e("../models/name"),e("./gang").getGangTypes),c=e("./gang").createGang,u=e("./place_name").createPlaceName,h=e("./data").storeDatabase,m=e("./gang").assignNickname,d=e("./character").createCharacter,f=e("./character_name"),g=e("./relationships").createRelationship,p=e("./bag").createContainer,y=e("./bag").createStockpile,b=e("../models/lib").deserializer,v=e("../models/lib").clone,k=[.2,.33,.4],w=new s,_=new s,S={"trade:any":["anything"],"trade:necessities":["food","ammo","medicine"],"trade:luxuries":["liquor","pre-collapse junk food","cigarettes"],"trade:currency":["greenbacks","casino chips","gold and silver"],"trade:stocked":["any item that would be stocked at this store"]},B={"clientele:lobrow":["{Bull's Head|Holy Moses}","{Red|Black|Blue} {Lightning|Cross}","{Snake|Scorpion} Pit"],"clientele:nobrow":["{Northern|Central|Southern|Western}","{Red|Blue|Black} Star","The {Buckaroo|Cowpoke}"],"clientele:hibrow":["{The |}{Luxe|Satellite|Asteroid|Galaxy|Nebula}"]};_.add(30,function(e,a,t,n){return a+" "+r.random(t)}),_.add(15,function(e,a,t,n){var i=/[sz]$/.test(e)?"'":"'s",o=r.test(70)?e.family:e.toString();return o+i+" "+r.random(t)}),_.add(15,function(e,a,t,n){var i=r.random(t),o=r.test(70)?e.family:e.toString();return o+" "+i}),_.add(40,function(e,a,t,n){var i=B[n];return r.random(i)+" "+r.random(t)}),w.add(20,function(e){return g(e)}),w.add(80,function(e){var a=d(e);return a.name=f({family:a.name.family,gender:a.gender}),r.test(20)&&m(a),a}),a.exports=function(e){e=r.extend({},e||{}),e.tags=e.tags||"*";var a=h.find(r.toTag(e.tags));r.isNumber(e.value)&&(a=v(a),a.inventory.totalValue=e.value);var t=e.owner;t||(t=l().indexOf(a.owner.profession)>-1?c({type:a.owner.profession}):w.get()(a.owner));var s;if(t.name)s=t.name;else if(t.kind)s=t.kind;else{if(!t.older)throw new Error("Could not find owner name for this type",a);s=t.older.name}var m=e.name;if(!m){var d=e.placeName||u(),f=a.typeOf("clientele");m=_.get()(s,d,r.random(a.names),f)}var g=p("Cash On Hand"),S=a.inventory?y(a.inventory):new i,B=S.value();Math.max.apply(Math,S.entries.map(function(e){return e.item.value}));a.tags.indexOf("trade:sellhigh")&&S.entries.forEach(function(e){var a=e.item.value;e.item=b(e.item,!1),e.item.value=Math.round(a+a*r.random(k))});var C=n(a);return new o({name:m,policy:C,owner:t,onhand:g,inventory:S,totalValue:B})}},{"../ion":24,"../models/bag":26,"../models/lib":32,"../models/name":34,"../models/store":37,"../tables/table":41,"./bag":10,"./character":11,"./character_name":12,"./data":14,"./gang":16,"./place_name":19,"./relationships":21}],23:[function(e,a,t){"use strict";var n=e("../ion"),r=e("../models/weather"),i=[{lo:34,hi:61,mn:48,rain:1},{lo:40,hi:69,mn:54,rain:1},{lo:46,hi:74,mn:60,rain:1},{lo:53,hi:83,mn:68,rain:1},{lo:61,hi:93,mn:77,rain:0},{lo:70,hi:103,mn:86,rain:0},{lo:77,hi:109,mn:93,rain:2},{lo:75,hi:107,mn:92,rain:2},{lo:68,hi:100,mn:84,rain:2},{lo:55,hi:87,mn:71,rain:0},{lo:43,hi:73,mn:57,rain:1},{lo:34,hi:62,mn:48,rain:1}],o=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];a.exports=function(e){var a=n.isUndefined(e)?(new Date).getMonth():o.indexOf(e.toLowerCase()),t=i[a],s=new r({low:t.lo+n.roll("1d10-5"),high:t.hi+n.roll("1d10-5"),rain:"clear skies"});return 0===t.rain&&n.test(8)?s.rain=n.random(["cloudy skies","high clouds"]):1===t.rain&&n.test(10)?s.rain=n.random(["light rain","strong winds"]):2===t.rain&&n.test(10)&&(s.rain="thunderstorms"),s}},{"../ion":24,"../models/weather":38}],24:[function(e,a,t){"use strict";function n(e){return/[x|s]$/.test(e)?e+"es":m.test(e)?e.substring(0,e.length-1)+"ies":e+"s"}function r(e,a){for(var t in a)e[t]=a[t];return e}var i=/\d+d\d+/g,o=/\{[^\|}]+\}/g,s=/\{[^\{\}]*\|[^\{\}]*\}/g,l=/^[aeiouAEIOU]/,c=/^[tT]he\s/,u=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i,h=/(\{[^\}]*\})/g,m=/[BCDFGHIJKLMNPQRSTVWXZbcdfghijklmnpqrstvwxz]y$/,d=Array.prototype.slice,f=Array.prototype.indexOf,g=Array.prototype.filter,p=Array.prototype.forEach,y={isUndefined:function(e){return"undefined"==typeof e},extend:r,identity:function(e){return e},transform:function(e){return e()},contains:function(e,a){return e?f.call(e,a)>-1:!1},find:function(e,a,t){for(var n=t||this,r=0;r<e.length;r++)if(a.call(t||n,e[r]))return e[r];return null},keys:function(e){return y.isObject(e)?Object.keys(e):[]},values:function(e){return y.keys(e).map(function(a){return e[a]})},times:function(e,a,t){for(var n=t||this,r=0;e>r;r++)a.call(t||n,r,e)},last:function(e){return e&&e.length?e[e.length-1]:null},unique:function(e){if(0===arguments.length||0===e.length)return[];var a=[];return p.call(e,function(e){-1===a.indexOf(e)&&a.push(e)}),a},intersection:function(e,a){if(2!==arguments.length)return[];e=d.call(e,0),a=d.call(a,0);for(var t=[],n=0;n<e.length;n++)a.indexOf(e[n])>-1&&-1===t.indexOf(e[n])&&(t[t.length]=e[n]);return t},union:function(e,a){return 2!==arguments.length?[]:(e=d.call(e,0),a=d.call(a,0),y.unique(e.concat(a)))},without:function(e){var a=d.call(arguments,1);return g.call(e||[],function(e){return-1===a.indexOf(e)})},define:function(e,a){1===arguments.length&&(a=e,e=null);var t=a.init||function(){};if(e){var n=function(){};n.prototype=e.prototype,t.prototype=new n}if(a.properties){for(var r in a.properties)Object.defineProperty(t.prototype,r,{enumerable:!1,configurable:!1,get:a.properties[r]});delete a.properties}delete a.init;for(var i in a)t.prototype[i]=a[i];return t.prototype.constructor=t,t},bounded:function(e,a,t){return t=t||Number.MAX_VALUE,a>e?a:e>t?t:e},sum:function(e){return(e||[]).reduce(function(e,a){return"number"==typeof a&&(e+=a),e},0)},article:function(e){return c.test(e)?e:l.test(e)?"an "+e:"a "+e},format:function(e,a){return"undefined"==typeof a?e:((arguments.length>2||"object"!=typeof a)&&(a=d.call(arguments),e=a.shift()),e.replace(o,function(e){var t=e.substring(1,e.length-1);return"function"==typeof a[t]?a[t]():a[t]}))},pluralize:function(e,a){e=e.name?e.name:e,a=a||1;var t={singular:"",plural:""},r="{|"!==e.substring(0,2);return a>1&&(t.plural+=a+" "),-1===e.indexOf("{")?(t.singular=e,t.plural+=n(e)):e.split(h).forEach(function(e,a){if(-1===e.indexOf("{"))t.singular+=e,t.plural+=e;else if(-1===e.indexOf("|"))t.plural+=e.substring(1,e.length-1);else{var n=e.substring(1,e.length-1).split("|");t.singular+=n[0],t.plural+=n[1]}}),r&&(t.singular=y.article(t.singular)),1===a?t.singular:t.plural},sentenceCase:function(e){return y.isString(e)?e.substring(0,1).toUpperCase()+e.substring(1):e},titleCase:function(e){return e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,a,t){return a>0&&a+e.length!==t.length&&e.search(u)>-1&&":"!==t.charAt(a-2)&&("-"!==t.charAt(a+e.length)||"-"===t.charAt(a-1))&&t.charAt(a-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})},toTag:function(e){return y.isString(e)?e.toLowerCase().replace(/\s/g,""):e},toList:function(e,a,t){t=t||"and",a=a||function(e){return e.toString()};var n=e.length;if(0===n)return"";if(1===n)return a(e[0]);if(2===n)return a(e[0])+" "+t+" "+a(e[1]);var r=e.map(a);return r[r.length-1]=t+" "+r[r.length-1],r.join(", ")},random:function(e){return y.isArray(e)?(e=e.length?e[~~(Math.random()*e.length)]:null,y.random(e)):y.isFunction(e)?y.random(e()):y.isString(e)?e.replace(s,function(e){return y.random(e.substring(1,e.length-1).split("|"))}):e},resolve:function(){if(1===arguments.length)return y.random(arguments[0]);var e=d.call(arguments,0);return e[0]=y.random(e[0]),y.format.apply(y.format,e)},roll:function(e){if("number"==typeof e)return e>0?~~(Math.random()*e)+1:0;if("string"==typeof e){e=e.replace(i,function(e){for(var a=e.split("d"),t=parseInt(a[0],10),n=parseInt(a[1],10),r=0,i=0;t>i;i++)r+=~~(Math.random()*n)+1;return r});try{return eval.call(null,e)}catch(a){return 0}}throw new Error("Invalid value: "+e)},shuffle:function(e){for(var a,t,n=e.length-1;n>0;n--)a=~~(Math.random()*(n+1)),t=e[n],e[n]=e[a],e[a]=t},test:function(e){if(0>e||e>100)throw new Error("Percentage must be between 0 and 100");return y.roll(100)<=e},gaussian:function(e,a){var t,n,r=0,i=0,o=a||0;do r=2*Math.random()-1,i=2*Math.random()-1,t=r*r+i*i;while(0===t||t>1);return n=Math.sqrt(-2*Math.log(t)/t),Math.round(r*n*e)+o},nonNegativeGaussian:function(e,a){a=0>a?0:a;var t;do t=y.gaussian(e,a);while(0>t);return t},newArray:function(e){return Array.apply(null,Array(e))}};["Array","Function","String","Date","RegExp","Boolean","Number","Object"].forEach(function(e){y["is"+e]=function(a){return Object.prototype.toString.call(a)==="[object "+e+"]"}}),a.exports=y},{}],25:[function(e,a,t){"use strict";var n=e("../ion"),r=e("./profession"),i=["","Seaman","Petty Officer","Ensign","Lieutenant","Lieutenant Commander","Commander","Captain","Admiral"],o=["Officer",["Officer","Trooper"],"Detective","Sergeant",["Captain","Deputy Marshal"],["Inspector","Marshal"],["Deputy Chief","Undersheriff"],["Chief","Sheriff"]],s=["","Private","Corporal","Sergeant","Lieutenant","Captain","Major","Colonel","General"];a.exports=n.define(r,{init:function(e){r.call(this,e||{})},assignRank:function(e){var a=this.names[0],t=null,r=Math.round(1.5*Math.max(e.trait("Military"),e.trait("Government")));"Navy"===a||"Coast Guard"===a?t=i[n.roll(r)]:"Police"===a?(t=o[n.roll(r)],t instanceof Array&&(t=n.random(t))):t=s[n.roll(r)],e.honorific=t?a+" "+t:a}})},{"../ion":24,"./profession":35}],26:[function(e,a,t){"use strict";function n(e,a){return e.item.name>a.item.name?1:e.item.name<a.item.name?-1:0}function r(e,a){return e.entries.filter(function(e){return e.item.name===a.name})[0]}function i(e){return"string"==typeof e?new c({name:e}):e}function o(e){return"number"==typeof e?e:1}function s(e,a,t){return a=i(a),e.entries.filter(function(e){return!a||a.name===e.item.name}).reduce(function(e,a){var n=t?a.item[t]:1;return e+n*a.count},0)}var l=e("../ion"),c=e("./item"),u=e("./model"),h=l.define(u,{init:function(e){u.call(this,e),this.entries=this.entries||[],this.type="Bag"},addBag:function(e){e instanceof h&&JSON.parse(JSON.stringify(e)).entries.forEach(function(e){this.add(e.item,e.count)},this)},removeBag:function(e){e instanceof h&&JSON.parse(JSON.stringify(e)).entries.forEach(function(e){this.remove(e.item,e.count)},this)},add:function(e,a){if(!e)throw new Error("No item passed to bag.add()");e=i(e),a=o(a);var t=r(this,e);if(0>a)throw new Error("Can't add negative items to bag: "+a);return t||(t={item:e,count:0,titles:{}},this.entries.push(t)),e.title&&(t.titles[e.title]=!0),t.count+=a,t.count},sort:function(e){this.entries.sort(e||n)},remove:function(e,a){e=i(e),a=o(a);var t=r(this,e);if(!t)throw new Error("Can't remove item that's not in the bag");if(0>=a)throw new Error("Can't remove a negative number of items from bag: "+a);if(a>t.count)throw new Error("Can't remove "+a+" items in bag that has only "+t.count);return t.count-=a,e.title&&delete t.titles[e.title],0===t.count&&this.entries.splice(this.entries.indexOf(t),1),t.count},filter:function(e){for(var a=new h,t=this.entries.length-1;t>=0;t--){var n=this.entries[t];if(e.call(this,n.item,n.count)){var r=n.item,i=n.count;this.remove(r,i),a.add(r,i)}}return a},value:function(e){return s(this,e,"value")},enc:function(e){return s(this,e,"enc")},count:function(e){return s(this,e)},typeOf:function(e){return this.entries.reduce(function(a,t){return t.item.typeOf(e)&&a.push(t.item),a},[])},toString:function(){var e="",a=0;if(this.entries.length){var t=!1,n=this.entries.filter(function(e){return e.item.not("cash")}).length;this.entries.forEach(function(r){r.item.is("cash")?a+=100*r.item.value*r.count:(t=!0,e+=l.pluralize(r.item,r.count),Object.keys(r.titles).length&&(e+=" ("+Object.keys(r.titles).join("; ")+")"),e+=1===n?".":2===n?", and ":", ",n--)},this),t&&a&&(e+=" "),a&&(e+="$"+a.toFixed(0)+" in cash."),e=l.sentenceCase(e)}return this.descriptor&&(e=this.descriptor+": "+e),e},toHTML:function(){return'<p class="bag">'+this.toString()+"</p>"}});a.exports=h},{"../ion":24,"./item":31,"./model":33}],27:[function(e,a,t){function n(e){return Object.keys(e).sort(function(e,a){return a>e?-1:e>a?1:0}).map(function(a){return i.format("{0} {1}",a,e[a])}).join(", ")}function r(e){return e("{0} ",this.honorific),e(!!this.name,function(e){e(this.name.toString())}),e(", {0}",this.degree),e(!this.honorific&&!!this.profession,", "+this.profession),e(". "),e(!!this.status,function(e){e("{0} (would be {1}). ",i.sentenceCase(this.status),this.age)},function(e){e("Age {0}. ",this.age+"")}),e("{0}. ",this.appearance),e("{0}. ",this.history.join(", ")),e}var i=e("../ion"),o=e("./model"),s=e("./bag"),l=e("../builder"),c=i.define(o,{init:function(e){this.gender="male",this.age=0,this.honorific=null,this.degree=null,this.inventory=new s,this.traits={},this.history=[],o.call(this,e),this.type="Character"},properties:{male:function(){return"male"===this.gender},points:function(){return i.sum(i.values(this.traits))},personal:function(){return"male"===this.gender?"he":"she"},objective:function(){return"male"===this.gender?"him":"her"},reflexive:function(){return"male"===this.gender?"himself":"herself"},possessive:function(){return"male"===this.gender?"his":"her"}},changeTrait:function(e,a){a=a||0,this.traits[e]=this.traits[e]||0,this.traits[e]+=a,this.traits[e]<=0&&delete this.traits[e]},trait:function(e){return this.traits[e]||0},toString:function(){var e=l(this);return r.call(this,e)("{0}. ",n(this.traits))("Possessions: {0}",this.inventory.toString()).toString()},toHTML:function(){var e=l(this);return e("p",{},function(e){r.call(this,e)}),e(!!this.inventory.count()||i.keys(this.traits).length>0,function(e){e("div",{"class":"more"},function(e){e("p",{},function(e){e("{0}. ",n(this.traits))}),e(!!this.inventory.count(),function(e){e("p",{},function(e){e("Possessions: {0}",this.inventory.toString())})})})}),e.toString()}});a.exports=c},{"../builder":2,"../ion":24,"./bag":26,"./model":33}],28:[function(e,a,t){function n(e,a,t){var n="";return n=e.name.family===a.name.family?i.format("{0} ({1}) & {2} ({3}) {4}",e.name.given,e.age,a.name.given,a.age,e.name.family):i.format("{0} ({1}) & {2} ({3})",e.name.toString(),e.age,a.name.toString(),a.age),t&&(n+=e.name.family===a.name.family?" ("+t+")":". "+i.sentenceCase(t)),n+". "}function r(e,a){var t=e.single;return null!==t?i.format("{0} ({1}), {2}. ",t.name.toString(),t.age,e.relationship):n(e.male,e.female,e.relationship)}var i=e("../ion"),o=e("../builder"),s=e("./model");a.exports=i.define({init:function(e){this.children=[],this.couples=[],s.call(this,e),this.type="Family"},properties:{childCount:function(){return this.children.length+this.couples.length},male:function(){return this.parent.male?this.parent:this.other},female:function(){return this.parent.male?this.other:this.parent},single:function(){return this.parent.status&&!this.other.status?this.other:this.other.status&&!this.parent.status?this.parent:null}},isParent:function(e){return e===this.parent||e===this.other},toString:function(){var e=o(this);return e(!!this.single,function(){e(this.single.toString())},function(){e(n(this.male,this.female,this.relationship))}),e(!!this.childCount,function(e){e("{|}{1 |}child{ren}: ",this.childCount),e(this.children,function(e,a,t){e(t>0," ")(a.toString())}),e(this.couples,function(e,a,t){e(t>0," ")(a.toString())})}).toString()},toHTML:function(){var e=o(this);return e("div",{"class":"family"},function(){e("p",{},r(this)),e("div",{"class":"more"},function(){e(!!this.single,function(){e(this.single.toHTML())},function(){e(this.male.toHTML()),e(" "),e(this.female.toHTML())})}),e(!!this.childCount,function(a){e("div",{"class":"children_preamble"},function(){e("{|}{1 |}child{ren}:",this.childCount)}),e("div",{"class":"children"},function(){e(this.children,function(a,t){e("div",{"class":"child"},function(){e(t.toHTML())})}),e(this.couples,function(e,a){e(a.toHTML())})})})}),e.toString()}})},{"../builder":2,"../ion":24,"./model":33}],29:[function(e,a,t){function n(e){var a=i.toList(this.members,function(e){return e.name});return e(!!this.name,function(e){e("The {0} ({1}; {2}): ",this.name,this.kind,a)},function(e){e("{0} member {1} ({2}): ",this.members.length,this.kind,a)}),e}function r(e,a){var t={};l.forEach(function(e){a.trait(e)>0&&(t[e]=a.trait(e))}),a.traits=t,e(a.toString())}var i=e("../ion"),o=e("./model"),s=e("../builder"),l=["Agile","Archery","Athletics","Cunning","Driving","Explosives","Firearms","Horseback Riding","Intimidate","Medicine","Melee Weapons","Military","Motorcycling","Stealth","Strong","Tough","Tracking","Trucking","Unarmed Combat"];a.exports=i.define(o,{init:function(e){this.members=[],o.call(this,e),this.type="Gang"},add:function(e){this.members.push(e)},toString:function(){var e=s(this);return n.call(this,e),e(this.members,function(e,a,t){r.call(a,e,a)}).toString()},toHTML:function(){var e=s(this);return e("p",{},function(e){n.call(this,e)}),e("div",{"class":"more"},function(e){e(this.members,function(e,a,t){e("p",{},function(e){r.call(a,e,a)})})}),e.toString()}})},{"../builder":2,"../ion":24,"./model":33}],30:[function(e,a,t){var n=e("../ion");a.exports=n.define({init:function(e){this.hash={};for(var a=0;a<(e||[]).length;a++)this.add(e[a])},clear:function(){this.hash={}},add:function(e){this.hash[e.toString()]=e},remove:function(e){delete this.hash[e.toString()]},has:function(e){return"undefined"!=typeof this.hash[e.toString()]},size:function(){return n.keys(this.hash).length},toArray:function(){return n.values(this.hash)}})},{"../ion":24}],31:[function(e,a,t){var n=e("../ion"),r=e("./model"),i=e("../builder");a.exports=n.define(r,{init:function(e){e=n.isString(e)?{name:e}:e,this.name=e.name,this.enc=0,this.value=0,r.call(this,e),this.type="Item"},toString:function(){return i(this)(this.name,1)(!!this.title," ("+this.title+")").toString()},toHTML:function(){return i(this)("p",{},function(e){e(this.name,1)(!!this.title," (<cite>"+this.title+"</cite>)")}).toString()}})},{"../builder":2,"../ion":24,"./model":33}],32:[function(e,a,t){function n(e,a){if(a!==!0&&i.isString(e)&&(e=JSON.parse(e)),i.isObject(e)||i.isArray(e)){e.type&&(e=new o[e.type](e));for(var t in e)e[t]=n(e[t],!0)}return e}function r(e,a){a=i.isBoolean(a)?a:Object.isFrozen(e);var t=n(JSON.stringify(e));return a?Object.freeze(t):t}var i=e("../ion"),o={Bag:e("./bag"),Character:e("./character"),Family:e("./family"),Gang:e("./gang"),Item:e("./item"),Model:e("./model"),Name:e("./name"),Profession:e("./profession"),Relationship:e("./relationship"),Store:e("./store"),Weather:e("./weather")};a.exports.clone=r,a.exports.deserializer=n},{"../ion":24,"./bag":26,"./character":27,"./family":28,"./gang":29,"./item":31,"./model":33,"./name":34,"./profession":35,"./relationship":36,"./store":37,"./weather":38}],33:[function(e,a,t){var n=e("../ion"),r=n.define({init:function(e){if(this.tags=[],n.isObject(e))for(var a in e)this[a]=e[a];this.type="Model"},is:function(e){return-1!==this.tags.indexOf(e)},has:function(e){return this.is(e)},not:function(e){return-1===this.tags.indexOf(e)},typeOf:function(e){var a=e+":";return this.tags.filter(function(e){return e.indexOf(a)>-1})[0]}});a.exports=r},{"../ion":24}],34:[function(e,a,t){var n=e("../ion"),r=e("./model");a.exports=n.define(r,{init:function(e){r.call(this,e),this.type="Name"},properties:{first:function(){return this.given},last:function(){return this.family}},toString:function(){return this.nickname?this.nickname:n.format("{given} {family}",this)}})},{"../ion":24,"./model":33}],35:[function(e,a,t){"use strict";function n(e,a,t){e[a]||(e[a]=t)}var r=e("../ion"),i=e("./model"),o=4;a.exports=r.define(i,{init:function(e){this.names=e.name?[e.name]:[],this.seeds=[],this.supplements=[],this.tags=[],this.postprocess=r.identity,i.call(this,e),this.type="Profession"},train:function(e,a){var t={};this.seeds.forEach(function(r){e.trait(r)<o&&(n(t,r,1),a--)});var i=Math.ceil(a/4)-this.seeds.length+r.roll("1d2");r.shuffle(this.supplements),this.supplements.forEach(function(e,a){i>=a&&n(t,e,0)});for(var s=r.keys(t);a>0&&s.length;){var l=r.random(s);t[l]+e.trait(l)>=o?s=r.without(s,l):(t[l]++,a--)}for(var c in t)t[c]>0&&e.changeTrait(c,t[c]);this.tags.forEach(function(a){e.tags.push(a)}),this.postprocess(e)}})},{"../ion":24,"./model":33}],36:[function(e,a,t){function n(e,a,t){return e.name.family===a.name.family?r.format("{0} ({1}) & {2} ({3}) {4} ({5}). ",e.name.given,e.age,a.name.given,a.age,e.name.family,t):r.format("{0} ({1}) & {2} ({3}). {4}. ",e.name.toString(),e.age,a.name.toString(),a.age,r.sentenceCase(t))}var r=e("../ion"),i=e("../builder");a.exports=function(e,a,t){this.older=e,this.younger=a,this.relationship=t,this.toString=function(){return n(this.older,this.younger,this.relationship)},this.toHTML=function(){var e=i(this);return e("p",{},function(e){e(n(this.older,this.younger,this.relationship))}),e("div",{"class":"more"},function(e){e("p",{},function(e){e(this.older.toString())})(" "),e("p",{},function(e){e(this.younger.toString())})}),e.toString()}}},{"../builder":2,"../ion":24}],37:[function(e,a,t){var n=e("../ion"),r=e("./bag"),i=e("./model"),o=e("../builder");a.exports=n.define(i,{init:function(e){this.name=null,this.owner=null,this.onhand=null,this.inventory=new r,i.call(this,e),this.type="Store"},toString:function(){var e=o(this);return e(this.name)(". "),e(!!this.owner,function(){e("Owner(s): "+this.owner.toString()+" ")}),e("For Trade: "),e(!!this.policy,this.policy+" "),e(this.inventory.toString()),e(0!==this.inventory.count()," "),e(!!this.onhand,function(){e(this.onhand.toString())}),e(" Total value: ")(this.totalValue)(". "),e.toString()},toHTML:function(){var e=o(this);return e("p",{"class":"title"},this.name),e("div",{"class":"owner"},function(e){e("p",{"class":"title"},function(e){e("Owner(s)")}),e(this.owner.toHTML())}),e("p",{"class":"title"},"For Trade"),e(!!this.policy,function(){e("p",{"class":"policy"},this.policy)}),e("ul",{"class":"inventory"},function(e){e(this.inventory.entries,function(e,a){var t=n.pluralize(a.item.name,a.count);")"===t.substring(t.length-1)?t=t.substring(0,t.length-1)+", ":t+=" (",t+=1===a.count?a.item.value+"T)":a.item.value+"T each)",e("li",{},t)})}),e("p",{},this.onhand.toString()),e.toString()}})},{"../builder":2,"../ion":24,"./bag":26,"./model":33}],38:[function(e,a,t){var n=e("../ion"),r=e("./model");a.exports=n.define(r,{init:function(e){r.call(this,e),this.type="Weather"}})},{"../ion":24,"./model":33}],39:[function(e,a,t){"use strict";var n=e("../ion");a.exports=n.define({init:function(e){this.outFunction=e||n.identity,this.hash={}},put:function(){for(var e=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)this.hash[arguments[a]]=e;return this},get:function(e){var a=this.hash[e];return a?this.outFunction(a):this.hash["default"]?this.outFunction(this.hash["default"]):null}})},{"../ion":24}],40:[function(e,a,t){"use strict";function n(e){return e[~~(Math.random()*e.length)]}var r=e("../ion"),i=e("./table");a.exports=r.define(i,{init:function(e,a){this.common=[],this.uncommon=[],this.rare=[],1===arguments.length&&(a=e),e=r.isFunction(e)?e:r.identity,this.useStrict=r.isBoolean(a)?a:!0,i.call(this,e)},add:function(e,a){switch(e){case"common":case"uncommon":case"rare":this[e].push(a),this.rows.push(a);break;default:throw new Error(e+" is not valid (use rare, uncommon, common)")}return this},get:function(){if(this.useStrict&&(0===this.rare.length||0===this.common.length||0===this.uncommon.length))throw new Error("RarityTable must have at least one common, uncommon, and rare element");var e=this.common.length?65:0,a=this.uncommon.length?30:0,t=this.rare.length?5:0,i=r.roll(e+a+t);return e>=i&&0!==e?this.outFunction(n(this.common)):e+a>=i&&0!==a?this.outFunction(n(this.uncommon)):e+a+t>=i&&0!==t?this.outFunction(n(this.rare)):null;
}})},{"../ion":24,"./table":41}],41:[function(e,a,t){"use strict";var n=e("../ion");a.exports=n.define({init:function(e){this.outFunction=e||n.identity,this.rows=[],this.sum=0},add:function(){var e,a,t,n;if(3===arguments.length){if(e=arguments[0],a=arguments[1],t=arguments[2],n=a-e+1,1>e||e>100||1>a||a>100)throw new Error("Dice ranges must be from 1 to 100")}else if(n=arguments[0],t=arguments[1],1>n||n>100)throw new Error("Dice ranges must be from 1 to 100");if("undefined"==typeof t)throw new Error("Object is undefined");return this.rows.push({chance:n,object:t}),this.sum+=n,this},get:function(){if(100!==Math.round(this.sum))throw new Error("Table elements do not add up to 100%, but rather to "+Math.round(this.sum));for(var e=n.roll(100),a=0,t=this.rows.length;t>a;a++){if(e<=this.rows[a].chance)return this.outFunction(this.rows[a].object);e-=this.rows[a].chance}},size:function(){return this.rows.length}})},{"../ion":24}]},{},[1])(1)});