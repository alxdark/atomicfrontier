!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.atomic=e()}}(function(){var define,module,exports;return function e(n,a,r){function t(i,s){if(!a[i]){if(!n[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[i]={exports:{}};n[i][0].call(u.exports,function(e){var a=n[i][1][e];return t(a?a:e)},u,u.exports,e,n,a,r)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)t(r[i]);return t}({1:[function(e,n,a){"use strict";var r={},t=e("./ion");t.extend(r,t),t.extend(r,{version:"1.0.0",Builder:e("./builder")}),r.db={Database:e("./db/database"),EncounterDatabase:e("./db/encounter_database"),ItemDatabase:e("./db/item_database"),ProfessionDatabase:e("./db/profession_database"),StoreDatabse:e("./db/store_database")},r.tables={Table:e("./tables/table"),HashTable:e("./tables/hash_table"),RarityTable:e("./tables/rarity_table")},r.models={Bag:e("./models/bag"),Character:e("./models/character"),Family:e("./models/family"),Gang:e("./models/gang"),IonSet:e("./models/ion_set"),Item:e("./models/item"),Model:e("./models/model"),Name:e("./models/name"),Profession:e("./models/profession"),Relationship:e("./models/relationship"),Store:e("./models/store"),Weather:e("./models/weather")},r.dice=e("./dice/dice"),r.createAppearance=e("./generators/appearance"),r.createCharacterName=e("./generators/character_name"),r.createCollectible=e("./generators/memorabilia"),r.createCorporateName=e("./generators/corporate_name"),r.createBizName=e("./generators/business_name"),r.createStore=e("./generators/store"),r.createWeather=e("./generators/weather"),r.createTimeSeries=e("./generators/historical_time_series"),t.extend(r,e("./generators/bag")),t.extend(r,e("./generators/character")),t.extend(r,e("./generators/data")),t.extend(r,e("./generators/gang")),t.extend(r,e("./generators/location")),t.extend(r,e("./generators/memorabilia")),t.extend(r,e("./generators/place_name")),t.extend(r,e("./generators/reading")),t.extend(r,e("./generators/relationships")),t.extend(r.models,e("./models/lib")),n.exports=r},{"./builder":2,"./db/database":3,"./db/encounter_database":4,"./db/item_database":5,"./db/profession_database":6,"./db/store_database":7,"./dice/dice":8,"./generators/appearance":9,"./generators/bag":10,"./generators/business_name":11,"./generators/character":12,"./generators/character_name":13,"./generators/corporate_name":14,"./generators/data":15,"./generators/gang":16,"./generators/historical_time_series":17,"./generators/location":19,"./generators/memorabilia":20,"./generators/place_name":21,"./generators/reading":22,"./generators/relationships":23,"./generators/store":24,"./generators/weather":25,"./ion":26,"./models/bag":29,"./models/character":30,"./models/family":31,"./models/gang":32,"./models/ion_set":33,"./models/item":34,"./models/lib":35,"./models/model":36,"./models/name":37,"./models/profession":38,"./models/relationship":39,"./models/store":40,"./models/weather":41,"./tables/hash_table":43,"./tables/rarity_table":44,"./tables/table":45}],2:[function(e,n,a){function r(e,n){var a=this.context;(e||[]).forEach(function(e,a){this.context=e,n.call(this.context,this,e,a)},this),this.context=a}function t(){1===arguments.length?this.str+=arguments[0]:arguments[1]&&(this.str+=h.format.apply(this.context,arguments))}function o(e,n,a){e?n.call(this.context,this):a.call(this.context,this)}function i(e,n){e&&n.call(this.context,this)}function s(e,n,a){this.str+="<"+e;for(var r in n)this.str+=" "+r+'="'+n[r]+'"';this.str+=">",a.call(this.context,this),this.str+="</"+e+">"}function l(e,n,a){this.str+="<"+e;for(var r in n)this.str+=" "+r+'="'+n[r]+'"';this.str+=">"+a+"</"+e+">"}function c(e,n){e&&(this.str+=n)}function u(e,n){this.str+=h.pluralize(e,n)}function m(){return this.str}var h=e("./ion"),d=Array.prototype.map;n.exports=function(e){if(!e)throw new Error("No context obj to Builder");var n=function(){var e=d.call(arguments,function(e){return e instanceof Array?"a":(typeof e).substring(0,1)}).join("");switch(e){case"af":r.apply(n,arguments);break;case"bf":i.apply(n,arguments);break;case"bff":o.apply(n,arguments);break;case"bs":c.apply(n,arguments);break;case"sof":s.apply(n,arguments);break;case"sos":l.apply(n,arguments);break;case"sn":u.apply(n,arguments);break;default:t.apply(n,arguments)}return n};return n.context=e,n.str="",n.toString=m,n}},{"./ion":26}],3:[function(e,n,a){function r(e){if(!c.isUndefined(arguments[1])&&arguments[1].ands)return arguments[1];for(var n=o(),a=0;a<arguments.length;a++)t(e,n,arguments[a]);return n}function t(e,n,a){if(c.isString(a)&&""!==a)n=i(a).reduce(e.cbTagCollector,n);else if(c.isArray(a))for(var r=0;r<a.length;r++)n=i(a[r]).reduce(e.cbTagCollector,n)}function o(){return{ands:[],nots:[]}}function i(e){return e.trim().toLowerCase().split(/\s+/)}function s(e,n){for(var a=new u(c.identity,!1),r=0,t=e.models.length;t>r;r++){var o=e.models[r];l(n.tags,o)&&e.matches(n,o)&&a.add(o.frequency,o)}return a}function l(e,n){var a=1===e.ands.length&&"*"===e.ands[0]||c.intersection(n.tags,e.ands).length===e.ands.length&&0===c.intersection(n.tags,e.nots).length;return!a&&e.or?l(e.or,n):a}var c=e("../ion"),u=e("../tables/rarity_table");n.exports=c.define({init:function(e,n){this.models=[],this.lookupArray=e||[],this.cbTagCollector=function(e,n){if("|"===n){var a=o();return e.or=a,a}return this.lookupArray&&(n=this.lookupArray[parseInt(n,10)]||n),"-"===n.charAt(0)?e.nots.push(n.substring(1)):e.ands.push(n),e}.bind(this)},matches:c.identity,register:c.identity,find:function(e){return this.findAll(e).get()},findAll:function(e){return(c.isString(e)||c.isArray(e))&&(e={tags:e}),e.tags=r(this,e.tags),s(this,e)}})},{"../ion":26,"../tables/rarity_table":44}],4:[function(e,n,a){var r=e("../ion"),t=e("./database");n.exports=r.define(t,{init:function(e){t.call(this,e)},register:function(){for(var e=0,n=arguments.length;n>e;e++){arguments[e].split("!");this.models[this.models.length]={}}}})},{"../ion":26,"./database":3}],5:[function(e,n,a){function r(e,n){var a=t();return s.isString(n)&&""!==n&&(a=o(n).reduce(e.cbTagCollector,a)),a.ands}function t(){return{ands:[],nots:[]}}function o(e){return e.trim().toLowerCase().split(/\s+/)}function i(e){return e.replace(u,"").replace(m,"").toLowerCase()}var s=e("../ion"),l=e("./database"),c=e("../models/item"),u=/\{.*\}|\(.*\)/g,m=/\W|\s/g;n.exports=s.define(l,{init:function(e){l.call(this,e)},matches:function(e,n){return!(s.isNumber(e.minValue)&&n.value<e.minValue||s.isNumber(e.maxValue)&&n.value>e.maxValue||s.isNumber(e.minEnc)&&n.enc<e.minEnc||s.isNumber(e.maxEnc)&&n.enc>e.maxEnc)},register:function(){for(var e=0,n=arguments.length;n>e;e++){for(var a=arguments[e],t=a.split("!"),o=t[0].trim().split(/\s*;\s*/),l=r(this,t[3]),u=l.indexOf("br")>-1,m={value:parseFloat(t[1]),enc:parseFloat(t[2]),frequency:l.shift()},h=0,d=o.length;d>h;h++)m.name=o[h],m.tags=s.without(l,"br"),m.tags.push(i(m.name)),this.models[this.models.length]=Object.freeze(new c(m));if(u)for(m.tags=m.tags.concat(["br"]),m.value=Math.max(.5,~~(m.value/2)),h=0,d=o.length;d>h;h++)m.name="broken "+o[h],m.tags=[i(m.name)].concat(l),this.models[this.models.length]=Object.freeze(new c(m))}}})},{"../ion":26,"../models/item":34,"./database":3}],6:[function(e,n,a){function r(e,n){var a=t();return i.isString(n)&&""!==n&&(a=o(n).reduce(e.cbTagCollector,a)),a.ands}function t(){return{ands:[],nots:[]}}function o(e){return e.trim().toLowerCase().split(/\s+/)}var i=e("../ion"),s=e("./database");n.exports=i.define(s,{init:function(e){s.call(this,e)},register:function(){for(var e=arguments[0],n=1,a=arguments.length;a>n;n+=2){for(var t=arguments[n].split("!"),o=t[0].trim().split(/\s*;\s*/),s=r(this,t[1]),l=r(this,t[2]),c=r(this,t[3]),u=c.shift(),m=arguments[n+1]?new Function("c",arguments[n+1]):i.identity,h=0;h<o.length;h++)c[c.length]=i.toTag(o[h]);this.models[this.models.length]=new e({names:o,tags:c,seeds:s,supplements:l,postprocess:m,frequency:u})}}})},{"../ion":26,"./database":3}],7:[function(e,n,a){function r(e,n){var a=t();return s.isString(n)&&""!==n&&(a=o(n).reduce(e.cbTagCollector,a)),a.ands}function t(){return{ands:[],nots:[]}}function o(e){return e.trim().toLowerCase().split(/\s+/)}function i(e){var n="cluster:";return e.filter(function(e){return e.indexOf(n)>-1})[0].substring(8)}var s=e("../ion"),l=e("../models/model"),c=e("./database");n.exports=s.define(c,{init:function(e){c.call(this,e)},register:function(){for(var e,n,a=0,t=arguments.length;t>a;a++){for(var o=arguments[a].split("!"),c=o[0].trim().split(/\s*;\s*/),u=o[1],m=o[2],h=o[3],d=o[4],f=o[5],g=o[6],p=o[7],y=r(this,o[8]),b=y.shift(),v=0;v<c.length;v++)y[y.length]=s.toTag(c[v]);var k={};m&&(k.profession=m),h&&(k.traits={},k.traits[h]=s.roll(3)+1),this.models[this.models.length]=e=new l({frequency:b,names:c,policy:u,owner:k,tags:y}),(d||f||g||p)&&(e.inventory=n={fillBag:!1,cluster:i(y)},d&&(n.tags=d),f&&(n.totalValue=parseInt(f,10)),g&&(n.minValue=parseInt(g,10)),p&&(n.maxValue=parseInt(p,10)))}}})},{"../ion":26,"../models/model":36,"./database":3}],8:[function(e,n,a){function r(e){e.value=[].reduce.call(e,function(e,n){return e+n.value},0)}var t=e("../ion"),o=t.define({init:function(e,n){this.faces=e,this.color=n,this.roll()},roll:function(){return this.value=t.roll(this.faces),this.value},symbol:function(){return this.value.toString()},toString:function(){return t.format("[{0} {1}]",this.color,this.symbol())}}),i=t.define(o,{init:function(e){o.call(this,6,e)},roll:function(){return this.value=t.roll(3)-2,this.value},symbol:function(){return-1===this.value?"-":1===this.value?"+":" "}}),s=t.define({init:function(){this.length=0;for(var e=0;e<arguments.length;e++){var n=arguments[e];if(n instanceof s||t.isArray(n))for(var a=0;a<n.length;a++)this[this.length++]=n[a];else this[this.length++]=arguments[e]}r(this)},push:function(e){this[this.length++]=e,r(this)},roll:function(){return[].map.call(this,function(e){return e.roll()}),r(this),this.value},toString:function(){return[].map.call(this,function(e){return e.toString()}).join(" ")}});n.exports.Die=o,n.exports.FudgeDie=i,n.exports.Dice=s},{"../ion":26}],9:[function(e,n,a){function r(e,n){var a=k.get(),r=null;"hispanic"===e.race&&"blond"===a&&(a=s.random(["brown","black"])),e.age>40&&s.test(e.age)&&(a=s.random(["gray","silver","white"])),r=e.is("low")&&e.male&&e.age<30&&s.test(25)?"{0} mohawk":e.male?w.get():_.get(),n.push(s.resolve(r,a))}function t(e,n){var a=v.get();a&&n.push(a)}function o(e,n){var a=e.has("glasses")?70:10;s.test(a)&&(s.test(20)?n.push(e.male?"wears browline glasses":"wears cat eye glasses"):s.test(30)?n.push("wears horn-rimmed glasses"):n.push("wears glasses"));var r=e.has("tattoos")||e.has("military:tattoos")||e.has("sailor:tattoos")?30:5;if(r+=e.male?15:0,s.test(r)){var t=null,o=u({gender:e.male?"female":"male"}).given;t=e.has("military:tattoo")&&s.test(80)?h:e.has("sailor:tattoo")&&s.test(80)?m:e.male&&s.test(20)?f:!e.male&&s.test(20)?g:d,t=s.resolve(t,{name:o});var i=s.format("has a tattoo of {0} on {1} {2} {3}",t,e.possessive,s.random(["left","right"]),s.random(["shoulder","bicep","forearm","arm"]));n.push(i)}var l=e.has("injuries")?15:3;s.test(l)&&n.push(s.resolve(p,e));var c=e.has("prosthetics")?5:1;s.test(c)&&n.push(s.resolve(y,e))}function i(e,n){s.test(30)&&n.push(s.resolve(b,e))}var s=e("../ion"),l=e("../tables/table"),c=e("../tables/rarity_table"),u=e("../generators/character_name"),m=['a sailing ship with the words "Homeward Bound" below it',"an anchor"],h=["an American {flag|eagle}","an eagle carrying an American flag"],d=["a skull{| in flames| with wings| and crossbones}","a chinese dragon","a {black panther|tiger|lion|wolf}","a mermaid","a snake wrapped around a {cross|rose}","a pair of dice",'a four leaf clover with the word "lucky" across it','a heart with the name "{name}" across it','the name "{name}"',"{a crystal|an eight} ball","a {star|cross|phoenix|lion|tiger|crown|fish|scorpion|lucky clover|yin-yang symbol}","an {angel|anchor|ankh}","a heart and dagger"],f=["a{| blonde| brunette| redhead} pin-up {girl|cowgirl}","a pin-up girl {in a sailor's suit|in a WAC uniform|in a space suit}","a woman on a clamshell"],g=["a {butterfly|swallow|dragonfly|rose|fairy|heart|lotus flower}","two intertwined roses"],p=["missing a tooth","missing {possessive} {left|right} {ear|foot|hand}","has been burnt on {possessive} {left|right} arm","walks with a limp","wears an eyepatch","cast on {left|right} arm","scar on {possessive} {left|right} arm","scar on {left|right} side of {possessive} {leg|torso|face}"],y=["hook for a {right|left} hand","artificial {hand|leg|arm}","glass eye"],b=["will {be very loyal to|betray or abandon} the players in a crisis","will trade generously with players","will demand compensation for minor tasks","if angered, will drag the player group into unnecessary fights","will fight to the death if necessary","if left alone, will {drink|gamble} away any money {personal} has","will expect {a share in profits|payment} to join the group","smokes when {personal} can get them","values fine wines and liquors","chews gum when {personal} can get it"],v=(new l).add(10,"tall stature").add(10,"short stature").add(5,"short and heavy-set").add(5,"tall and heavy-set").add(70,null),k=(new l).add(15,"black").add(50,"brown").add(15,"blond").add(3,"red").add(10,"auburn (brownish-red)").add(7,"chestnut (reddish-brown)"),w=(new l).add(30,"{0} crew cut haircut").add(25,"{0} side part haircut").add(25,"{0} ivy league haircut").add(20,"{0} pompadour haircut"),_=(new c).add("common","bobbed {0} hair").add("common","short {curly|straight} {0} hair").add("uncommon","long {curly|wavy|straight} {0} hair, usually worn {in a ponytail|under a scarf|in a bun}").add("uncommon","{0} pageboy haircut").add("rare","long {curly|wavy|straight} {0} hair").add("rare","cropped {0} hair");n.exports=function(e){if(!e)throw new Error("Character required");var n=[],a=[];return r.call(this,e,n),t.call(this,e,n),o.call(this,e,n),i.call(this,e,a),[n,a].reduce(function(e,n){return n.length&&e.push(s.sentenceCase(n.join(", "))),e},[]).join(". ")}},{"../generators/character_name":13,"../ion":26,"../tables/rarity_table":44,"../tables/table":45}],10:[function(e,n,a){function r(e,n){for(var a=n.totalValue;a>0;){n.maxValue=Math.max(Math.min(n.maxValue,a),n.minValue);var r=y.find(n);if(null===r||r.value>a)return e;e.add(r),a-=r.value}return e}function t(e){switch(e){case"low":return f.roll("2d3+5");case"medium":return f.roll("2d3+2");case"high":return f.roll("1d3+2")}}function o(e){switch(e){case"low":return f.roll("1d3*2");case"medium":return f.roll("(1d3*2)+2");case"high":return f.roll("(1d3*2)+4")}}function i(e,n){if(n>0)for(var a=y.findAll({tags:"currency",maxValue:n});n>0;){var r=a.get();if(null===r)return;e.add(r),n-=r.value}}function s(e,n){var a=f.test(60)?"firearm":"melee",r=y.find([a,n,"-br"]);if(r&&(e.add(r),r.is("firearm"))){var t=y.find(["ammo",r.typeOf("ammo"),"-bundled"]);t&&e.add(t,f.roll("4d4")),f.test(20)&&(r=y.find(["melee",n,"-scifi"]),r&&e.add(r))}}function l(e,n,a){for(var r=0;n>r;r++){var t=y.find(f.random(a));t&&e.add(t)}return e}function c(e,n,a){for(var r=new p,t=0;n>t;t++){var o=y.find(a);o&&r.add(o)}return u(e,r)}function u(e,n){return n.toArray().forEach(function(n){e.add(n)}),e}function m(e,n,a){return function(r,t,o){f.test(r)&&c(e,t,f.format(o,n,a))}}function h(e){if(e=b(e,{totalValue:20,fillBag:!0,minValue:0,maxValue:Number.MAX_VALUE,minEnc:0,maxEnc:Number.MAX_VALUE,cluster:"medium",tags:""}),e.maxValue<=0||e.maxEnc<=0||e.minValue>e.maxValue||e.minEnc>e.maxEnc)throw new Error("Conditions cannot match any taggable: "+JSON.stringify(e));if(e.totalValue<=0)throw new Error("Bag value must be more than 0");return e}function d(e){e=h(e);var n=r(new g,e);return e.fillBag!==!1&&i(n,e.totalValue-n.value()),n}var f=e("../ion"),g=e("../models/bag"),p=e("../models/ion_set"),y=e("./data").itemDatabase,b=e("../parameters"),v={Safe:{desc:["Safecracking+1","Safecracking","Safecracking-1","Safecracking-2","Safecracking-3","Safecracking-4"],query:{totalValue:"3d8+15",tags:"cash | firearm -scifi | secured | luxury -food",maxEnc:10,fillBag:!1}},Lockbox:{desc:["Unlocked","Lockpicking","Lockpicking-1","Lockpicking-2"],query:{totalValue:"2d6+2",tags:"cash | secured | firearm -scifi -br | asetofkeys | luxury -food",maxEnc:3,fillBag:!0}},Trunk:{desc:["Unlocked","Lockpicking+2, can be broken open","Lockpicking+3, can be broken open","Lockpicking+4, can be broken open"],query:{totalValue:"2d6",tags:"clothing | armor | firearm -scifi -br | unique",maxEnc:10,fillBag:!1}},"Cash Register":{desc:["easily opened"],query:{totalValue:"6d50/100",tags:"cash",fillBag:!0}},"Cash On Hand":{desc:["under the counter","in a lockbox"],query:{totalValue:"20+4d6",tags:"currency -cash | currency",fillBag:!0,maxValue:7}},"Clothes Closet":{desc:["no lock"],query:{totalValue:"1d8+5",tags:"clothing -research -industrial -military",fillBag:!1}}},k=f.keys(v).sort();n.exports.createKit=function(e){var n=new g,a=f.isString(e.profession)?"kit:"+e.profession:e.profession.typeOf("kit");s(n,a);var r=m(n,e.gender,a);return r(100,1,"body {0} {1}"),r(30,1,"head {0} {1}"),r(50,1,"coat {0} {1}"),r(30,1,"accessories {0} {1} -br"),r(100,1,"feet {0} {1}"),r(100,f.roll("1d3-1"),"{1} -clothing -firearm -melee -br | kit:personal -br"),l(n,f.roll("2d3-2"),["ration","ration","food -fresh"]),n.value()<20&&i(n,f.roll(20-n.value())),n},n.exports.createBag=d,n.exports.createStockpile=function(e){if(e=h(e),e.fillBag=!1,"none"===e.cluster)return d(e);var n=new g,a=t(e.cluster);"-currency ".concat(e.tags);return c(n,a,e.tags),n.entries.forEach(function(r){a=o(e.cluster),n.add(r.item,a)}),n},n.exports.createContainer=function(e){var n=b(e,"type",{type:k}),a=v[e],r=f.extend({},a.query);r.totalValue=f.roll(r.totalValue);var t=d(n);return a.desc&&(t.descriptor=f.format("{0} ({1})",f.titleCase(e),f.random(a.desc))),t},n.exports.getContainerTypes=function(){return k}},{"../ion":26,"../models/bag":29,"../models/ion_set":33,"../parameters":42,"./data":15}],11:[function(e,n,a){e("../ion");n.exports=function(e){}},{"../ion":26}],12:[function(e,n,a){function r(e,n,a){if(l.isString(e)){var r=e.split(" ");return new c({given:r[0],family:r[1]})}if(e instanceof c){var t=h({gender:n,race:a});return l.extend(t,e)}return h({gender:n,race:a})}function t(e){var n=l.extend({},e);return n.gender=n.gender||l.random(["male","female"]),n.equip=l.isBoolean(n.equip)?n.equip:!0,n.race=n.race||s(),n.name=r(n.name,n.gender,n.race),n.age=l.isNumber(n.age)?l.bounded(n.age,1,100):l.roll("14+3d12"),n.traits&&(n.traits=l.extend({},n.traits)),n.profession&&(n.profession=l.toTag(n.profession)),"soldier"===n.profession&&(n.profession=l.random(["airforce","marine","army","navy"])),n}function o(e,n){delete e.profession,delete e.honorific,e.age>4&&(g.train(e,l.roll("1d3-1")),delete e.traits.Attractive)}function i(e,n,a){var r=l.sum(l.values(a.traits)),t=8+~~(a.age/10)-r;g.train(e,l.roll("2d2-1"));var o=m.find("pre -innate"),i=l.intersection(o.tags,["low","normal","high"]),s=n?n:m.find(i+" post -pre -innate"),c=o.is("high")?30:27;if(s.not("pre")&&e.age>c){var u=(e.age-10)/e.age,h=Math.floor(t*u),f=t-h;if(o.train(e,h),o.names[0]!==s.names[0]){var y=e.honorific?e.honorific:l.random(o.names),b=l.random(p);e.history.push(l.format(b,l.article(y.toLowerCase())))}delete e.honorific,s.train(e,f)}else s.train(e,t);e.profession=l.random(s.names),a.equip&&(e.inventory=d({profession:s,gender:e.gender}))}function s(){return l.test(20)?"hispanic":"anglo"}var l=e("../ion"),c=e("../models/name"),u=e("../models/character"),m=e("./data").professionDatabase,h=e("./character_name"),d=e("./bag").createKit,f=e("./appearance"),g=m.find("innate"),p=["Before the collapse, was {0}","Was {0} up until the war","Was {0} before the war"];n.exports.getProfessions=function(){return m.findAll("post").rows.map(function(e){return e.names[0]},[]).sort()},n.exports.createCharacter=function(e){var n=null,a=t(e);if(a.profession&&(n=m.find(a.profession),null===n||n.not("post")))throw new Error("Invalid profession: "+a.profession+" (must be post-war profession)");var r=new u(a);return r.age<17?o(r,a):(i(r,n,a),r.appearance=f(r),r.initiative=l.roll("2d6")+r.trait("Agile"),r.hp=10+r.trait("Tough")),"hispanic"===r.race&&r.changeTrait("Spanish",l.nonNegativeGaussian(1.5)),r},n.exports.createRace=s},{"../ion":26,"../models/character":30,"../models/name":37,"./appearance":9,"./bag":10,"./character_name":13,"./data":15}],13:[function(e,n,a){function r(e,n){return o.random(s[o.format("hispanic"===n&&o.test(35)?"anglo {0}":"{1} {0}",e,n)])}function t(e){return o.random(s[e])}var o=e("../ion"),i=e("../models/name"),s={"anglo male":["Al","Andy","Arnie","Art","Austin","Bart","Beau","Ben","Bert","Bob","Brad","Bradley","Brock","Bruce","Bud","Burt","Caleb","Calvin","Carl","Cecil","Chuck","Clayton","Cliff","Conrad","Cooper","Cyril","Dakota","Dallas","Dalton","Dan","Dawson","Dean","Destry","Don","Doug","Dwain","Earl","Ed","Errol","Floyd","Frank","Fred","Gage","Garth","Gavin","Gene","Glen","Grady","Greg","Gus","Guy","Ha{l|nk|rlan}","Holden","Hoyt","Hudson","Hugh","Huxley","Ian","Isaac","Jack","Jake","Jason","Jeremy","Jerry","Jethro","Joe","John","Johnny","Ken","Kirk","Kurt","Kyle","Larson","Levi","Lloyd","Luke","Lyle","Mack","Mark","Marty","Mason","Matt","Max","Merle","Nate","Ned","Neil","Nick","Norm","Otis","Pat","Phil","Ray","Reed","Rex","Rick","Rod","Rodger","Roy","Russell","Sam","Scott","Slim","Stan","Stratton","Ted","Tim","Todd","Tony","Travis","Tyler","Vern","Wade","Wally","Ward","Wesley","Will","Wyatt"],"anglo female":["Ada","Agnes","Alice","Amy","Ann","Au{b|d}rey","Barb","Becky","Betty","Bev{|erly}","Carol","Cindy","Clara","Darla","Diane","Dona","Doris","Edith","Edna","Eileen","Ella","Ellen","Emma","Emily","Erma","Esther","Ethel","Eva","Fay","Flo","Flora","Gail","Grace","Gwen","Hazel","Helen","Holly","Ida","I{l|r}ene","Iris","Irma","Jan{|e|et|is}","Jean","Joan","Judy","June","Kathy","Kay","Lena","Linda","Lois","Lorna","Lucy","Mabel","Mae","Mary","Mavis","Nina","Nora","Norma","Olga","Pam","Patty","Paula","Pearl","Rita","Rose","Ruth","Sally","Sara","Stella","Sue","Sybil","Tina","Trudy","{V|Th}elma","Vera","Viola","Wanda","Wilma"],"hispanic male":["Alonso","Bruno","Camilo","Carlos","Dante","Diego","Emilio","Felipe","Franco","Iker","Jacobo","Javier","Jorge","Jose","Juan","Julian","Lucas","Luis","Manny","Manuel","Mario","Mateo","Matias","Miguel","Pablo","Pedro","Rafael","Samuel","Sergio","Tomas","Elias"],"hispanic female":["Abril","Alexa","Alma","Ana","Ariana","Ashley","Bianca","Camila","Carla","Elena","Emilia","Isabel","Jimena","Julia","Luana","Lucia","Maite","Malena","Maria","Mia","Regina","Renata","Sofia","Sophie","Valery"],anglo:["Adams","Alexander","Anderson","Bailey","Baker","Barnes","Barton","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Cleaver","Coleman","Collins","Cook","Cooper","Cox","Davis","Edwards","Evans","Flores","Foster","Gray","Green","Griffin","Hall","Harris","Haskell","Henderson","Hill","Howard","Hughes","Jackson","James","Jenkins","Reed","Richardson","Roberts","Robinson","Rogers","Ross","Russell","Sanders","Scott","Simmons","Smith","Stewart","Taylor","Thomas","Thompson","Turner","Walker","Ward","Washington","Watson","White","Williams","Wilson","Wood","Wright","Hayes"],hispanic:["Aguilar","Aguirre","Alvarado","Alvarez","Avila","Barrera","Cabrera","Calaveras","Calderon","Camacho","Campos","Cardenas","Carrillo","Castaneda","Castillo","Castro","Cervantes","Chavez","Contreras","Cortez","Delacruz","Deleon","Diaz","Dominguez","Escobar","Espinoza","Estrada","Fernandez","Flores","Fuentes","Gallegos","Garcia","Garza","Gomez","Gonzales","Guerra","Guerrero","Gutierrez","Guzman","Hernandez","Herrera","Ibarra","Jimenez","Juarez","Lopez","Lozano","Macias","Marquez","Martinez","Medina","Mejia","Melendez","Mendez","Mendoza","Mercado","Miranda","Molina","Montoya","Morales","Moreno","Navarro","Ochoa","Orozco","Ortega","Ortiz","Pacheco","Padilla","Perez","Ramirez","Ramos","Reyes","Rivera","Rodriguez","Romero","Rosales","Ruiz","Salas","Salazar","Salinas","Sanchez","Sandoval","Santiago","Serrano","Silva","Suarez","Torres","Trevino","Trujillo","Valdez","Valencia","Vargas","Vasquez","Velasquez","Velez","Villarreal","Zamora"]};n.exports=function(e){e=e||{};var n=e.gender||(o.test(50)?"male":"female"),a=e.race||(o.test(20)?"hispanic":"anglo");return new i({given:e.given||r(n,a),family:e.family||t(a)})}},{"../ion":26,"../models/name":37}],14:[function(e,n,a){function r(){return t.test(90)?h.get()+d.get():t.random(m)+" "+t.random(u)}var t=e("../ion"),o=e("../tables/table"),i=e("./character_name"),s="{Alpha|American|North American|National|General|Universal|International|Consolidated|Central|Western|Eastern|Union}",l="{Argon|Iridium|Micro|Radiation|Nuclear|Atomic|Radium|Uranium|Plutonium|Development|X-Ray|Gamma Ray}",c="{Engineering|Research|Scientific|Electronics|Instruments|Devices}",u="{Laboratory|Laboratories|Corporation|Supply Company|Company|Foundation|Inc.}",m=["Raytomic","Detectron","Gamma-O-Meter","Librascope","Micromatic","Micro Devices","Micro Specialties","Radiaphone","Radiometric","Ra-Tektor","Nucleonics","Scintillonics","Tracerlab"],h=new o(t.transform).add(60,function(){return t.random(s)+" "+t.random(l)}).add(10,function(){return t.random(l)}).add(15,function(){return i({race:"anglo"}).family+" "+t.random(l)}).add(15,function(){return i({race:"anglo"}).family}),d=new o(t.transform).add(25,function(){return" "+t.random(c)}).add(25,function(){return" "+t.random(u)}).add(50,function(){return" "+t.random(c)+" "+t.random(u)});n.exports=function(){for(var e=r();e.split(" ").length>4;)e=r();return e}},{"../ion":26,"../tables/table":45,"./character_name":13}],15:[function(e,n,a){var r=e("../db/item_database"),t=e("../db/profession_database"),o=e("../db/store_database"),i=e("../models/atomic_profession"),s=new r(["ammo","ammo:22","ammo:30","ammo:308","ammo:357","ammo:38","ammo:44","ammo:45","ammo:fusion","ammo:laser","ammo:pulse","ammo:shell","armor","agricultural","automotive","civic","criminal","garage","hospital","house","industrial","institution","lodging","military","office","public","research","restaurant","school","tourism","travel","br","bundled","heavy","nobr","unique","accessories","body","coat","feet","head","con","con:35mm","con:battery","con:polaroid","food","fresh","meat","prepared","preserved","ration","common","rare","uncommon","female","male","alcohol","camping","cash","clothing","communications","container","currency","drug","electronics","explosive","jewelry","medical","pottery","publication","sport","tool","toy","kit:courier","kit:craftsperson","kit:doctor","kit:electrician","kit:gunslinger","kit:homesteader","kit:leader","kit:mechanic","kit:miner","kit:personal","kit:police","kit:raider","kit:rancher","kit:scavenger","kit:scientist","kit:settler","kit:soldier","kit:thief","kit:trader","kit:vagrant","hand","huge","large","medium","miniscule","small","tiny","luxury","scifi","secured","useful","firearm","melee","pistol","rifle","shotgun","smg"]);s.register("$1 bill!.01!0!51 58 62","$1 casino chip!1!0!53 62","$10 bill!.1!0!53 58 62","$10 casino chip!10!0!53 62","$100 bill!1!0!52 58 62","$20 bill!.2!0!53 58 62","$25 casino chip!25!0!52 62","$5 bill!.05!0!51 58 62","$5 casino chip!5!0!52 62",".22 caliber bullet!1!.5!53 0 1",".30 caliber bullet!1!.5!53 0 2",".357 caliber bullet!1!.5!53 0 4",".38 caliber bullet!1!.5!53 0 5",".44 caliber bullet!1!.5!53 0 6",".45 caliber bullet!1!.5!53 0 7","American flag!1!3!51 15 21 23 25 28 35","Boss of the Plains hat!2!.5!52 59 40 79 88 55 25","Dutch Lad snack cake!6!1!52 45 19 100 49","Kit-Cat klock; Tiki statue!1!3!53 19 ","Kooba Kid comic book; Bubbles and Yanks comic book; Volto from Mars comic book; Clutch Cargo comic book!6!.5!52 17 19 82 69","M1 Rifle; M1 Carbine!12!10!52 2 31 104 89 107","M14 Rifle!12!10!52 3 31 104 89 107","M1911 Pistol!9!3!52 7 31 104 79 89 106","Remington .44 Magnum Pistol; Smith & Wesson .44 Magnum Pistol; Colt .44 Magnum Pistol!9!3!52 6 31 104 73 77 79 81 83 84 86 88 91 106","Remington 870 Shotgun; Winchester 1897 Shotgun; Winchester Model 12 Shotgun!9!10!52 11 31 104 17 19 73 81 83 84 86 88 91 108","Remington Rifle!12!10!52 13 1 31 104 17 19 73 77 78 81 84 85 86 88 91 107","Ruger .22 Pistol!9!3!52 1 31 104 75 81 87 88 90 91 106","Ruger Single Six Revolver!9!3!52 1 31 104 73 81 85 86 88 91 92 106","Smith & Wesson .357 Magnum Pistol; Colt .357 Magnum Pistol!9!3!52 4 31 104 77 79 81 83 84 86 88 90 91 106","Smith & Wesson .38 Special Revolver; Colt Detective Special Revolver!9!3!52 5 31 104 73 74 75 76 79 80 81 83 86 88 90 91 106","Smith & Wesson Service Revolver; Colt Service Pistol!9!3!52 7 31 104 73 74 75 76 80 81 83 86 87 88 91 92 106","Springfield Rifle!12!10!52 2 31 104 73 77 86 89 107","Thompson Submachine Gun; M3 Submachine Gun; Browning Automatic Rifle!12!10!52 7 31 104 89 109","Twinkle Cake!3!1!53 45 19 49 28 29 30","Winchester Rifle!12!10!52 13 3 31 104 17 19 73 77 78 81 85 86 88 91 107","apple pie; cherry pie; peach pie!3!3!53 13 45 46 48 ","apple; pear; nectarine; orange; peach{es}; plum!1!.5!51 45 46 88","ashtray!1!1!51 19","axe; pickaxe!3!20!53 13 57 17 33 81 105 71","backpack!11!10!51 61 19 73 86 92 22 23  30 103","bag{s} of sugar!11!3!52 45 19 49 103","bandana; baseball cap!2!.5!51 59 54 40 19 73 74 76 78 80 81 84 85 86 88 90 92 55","baseball bat!3!3!51 17 73 78 84 86 90 92 105 70","baseball; softball; tennis ball!1!1!51 19 25 28  70","batter{y|ies}!3!.5!53 41 43","bayonet!3!1!51 89 105","belt{s} with large silver buckle{s}!2!.5!53 36 59 77 85 55","beret; boonie hat; garrison cap; patrol cap!2!.5!51 59 54 40 89 55 23","boater's straw hat; Panama straw hat!2!.5!53 15 59 40 19 75 78 79 87 88 91 92 22 55 25","bolo tie!2!.5!51 36 59 19 77 85 91 22 55 ","book!1!3!51 69 28","book{s} of cattle brands!1!1!51 85 35","boomerang; bubble gum cigar; frisbee; hula hoop; Hopalong Cassidy cap gun; coonskin cap; slinky!1!3!53 19  72","bottle{s} of milk!1!3!51 45 46 19 88","bottle{s} of scotch; bottle{s} of whiskey; bottle{s} of vodka; bottle{s} of wine!13!10!53 56 63 19 82 100","bowling ball!6!20!52 33 19 25 70","box{es} of .22 ammo (20 rounds)!30!3!52 0 1 32","box{es} of .30 ammo (20 rounds)!30!3!52 0 2 32","box{es} of .308 ammo (20 rounds)!30!3!52 0 3 32","box{es} of .357 ammo (20 rounds)!30!3!52 0 4 32","box{es} of .38 ammo (20 rounds)!30!3!52 0 5 32","box{es} of .44 ammo (20 rounds)!30!3!52 0 6 32","box{es} of .45 ammo (20 rounds)!30!3!52 0 7 32","box{es} of Sugar Jets cereal!3!3!53 45 19 49","box{es} of Velveteena cheese!6!3!53 45 18 19 100 49 27","box{es} of candies!9!3!52 19 100","box{es} of candles!9!3!51 57 17 19 81 86 103","box{es} of chocolates!6!3!52 45 19 100 49","box{es} of hardtack!9!3!53 45 23 50 103","box{es} of matches!3!.5!51 57 16 17 19 82 84 85 86 88 90 71 103","box{es} of shotgun shells (20 shells)!30!3!52 0 11 32","box{|es} of toaster pastries!3!3!53 45 19 49","bracelet!10!1!53 66 102","briefcase!1!10!51 31 15 24 25 26","bucket hat; coonskin cap!2!.5!53 59 54 40 73 78 84 86 88 91 92 55","bulletproof vest!11!10!53 12 31 16 83 86 89 103","business suit!2!3!51 37 59 19 79 88 22 55","butcher's kni{fe|ves}!3!3!51 19 88 105 27","camera!3!3!53 31 42 82","canteen; water bottle!1!3!51 82 23","can{s} of Brylcreem!3!1!53 19 82","can{s} of Fido dog food!3!3!51 45 19 47 49","can{s} of Rinso Detergent!1!3!51 19","can{s} of coffee; jar{s} of instant coffee!6!3!52 45 19 100 49","can{s} of milk; can{s} of pork & beans; box{es} of crackers; can{s} of wham!3!3!51 45 19 49","can{|s} of mace; can{|s} of pepper spray!3!1!53 74 75 76 79 80 87 88 90 105","carton{s} of cigarettes!150!3!52 63 100","casualwear outfit!2!3!51 37 59 54 19 88 22 55","ceramic cup; ceramic plate; ceramic bowl; large ceramic bowl; pottery cup; pottery bowl; pottery vase; clay figurine!3!6!53 13 31 33 19 68 29","cigarette lighter!3!.5!51 16 19 82 88 71 103","clipboard!1!3!51 24","coat; overcoat; parka; windbreaker!2!3!51 13 15 59 38 54 18 19 20 21 78 82 83 22 55 24 25 27 ","coffee mug!1!1!51 19 24","coffee pot!1!3!51 19","coil{s} of rope (50 feet)!3!10!53 13 17  71","comb; handkerchief!1!.5!51 19 82","combat helmet!2!.5!51 12 59 54 40 84 86 89 55 23","compass!6!.5!52 57 17","cowboy hat!2!.5!51 13 59 54 40 77 85 55","crowbar; tire iron!3!6!51 17 33 84 86 105 71","crutch{es}!3!10!53 67","dagger!3!1!51 77 84 86 88 89 90 105","day pack!4!10!51 15 61 19 20 73 74 76 80 81 84 86 88 90 92 22 23 28  30 103","day{s} of C rations!11!6!51 45 33 23 49 50 103","death ray!27!3!52 8 31 104 106 26 101","deck{s} of playing cards!6!1!51 16 19 82 103","denim jacket!2!.5!51 59 38 54 74 76 80 90 92 55","doctor's bag!2!10!51 36 59 61 54 18 75 55","duster; buckskin coat; poncho!2!.5!53 13 59 38 54 73 77 84 85 91 55","egg; potato{es}!1!.5!51 45 46","empty fuel can!1!10!51 14 61 17 20 73","fedora; flat cap; porkpie hat!2!.5!51 59 40 19 75 79 87 88 91 92 22 55 25  30","fire axe!3!10!53 14 15 16 18 20 21 74 76 80 81 86 92 105 23","fire extinguisher!1!15!51 14 15 16 33 18 20 21 22 23 24 25 26 28 30","first aid kit!13!10!53 67 103","flashlight!6!1!51 14 31 57 15 43 17 19 20 21 82 26  71 103","floral dress; jumper{s} with {a |}blouse{s}; jumper{s} with {a |}T-shirt{s}; skirt{s} and blouse{s}; prairie skirt{s} and blouse{s}; shirtwaist dress!2!.5!51 37 59 54 74 75 78 79 87 88 91 92","football; tennis racket!1!10!51 19 25 28  70","force field belt!15!1!52 12 31 26 101","gas mask!1!3!53 12 31 83 89 23","geiger counter!11!3!53 31 64 20 81 86 87 89 26 71 103","gold krugerrand!10!1!53 62 33 102","gravity rifle!36!20!52 8 31 104 33 23 26 107 101","hand grenade!5!1!53 65 84 86 89 23","hard hat{s} with lamp{s}; hard hat!2!.5!53 59 54 40 20 81 55","hockey mask!1!3!53 12 84","hoe; rake; shovel!3!10!53 13 17 88 105 71","holster!2!1!53 36 59 54 77 82 89 55 35","house deed!6!1!52 102","hunting kni{fe|ves}!3!1!51 77 78 79 85 86 88 91 92 105","ice pick!3!20!53 17 33 105 71","jar{s} of Ersatz instant coffee!6!3!52 15 45 19 100 24 49 30","jar{s} of Gusto pasta sauce; box{es} of Gusto spaghetti; jar{s} of Gusto olives; box{es} of Gusto bread sticks; can{s} of Gusto ravioli!3!3!51 45 19 49 27","jar{s} of jam!1!1!51 45 46 19 48 27","jug{s} of moonshine!10!10!53 13 63 82","jumpsuit; {|}work coveralls!2!3!51 13 14 37 59 54 20 21 74 76 80 81 86 55","knife; fork; spoon!1!1!51 19 27","lab coat!2!3!51 59 38 54 18 21 75 87 55 26","lamb chop; {|}lamb ribs{|}; lamb roast; {|}lamb spareribs{|}!3!10!53 45 46 47","lariat!1!3!51 85 35","laser pistol!27!3!52 9 31 104 87 89 106 26 101","laser rifle!36!10!52 9 31 104 89 26 107 101","letter sweater!2!.5!53 59 38 54 88 55","loa{f|ves} of bread!1!3!51 45 46 88 48","lockpick set!11!1!52 16 90 71 103","lunchbox{es}!3!10!53 19","magazine!1!3!51 69 30","medical brace!3!10!53 67","metal detector!6!10!52 31 17 86 23  71 35","military helmet!9!3!53 12 86 89 103","motorcycle helmet; football helmet!9!3!53 12 17 84 86 103","motorcycle jacket!10!3!53 59 38 54 17 73 77 84 86 55 103","mouse trap!3!1!53 17 19 71","necklace!12!1!53 66 102","newspaper!1!3!51 14 15 16 17 18 19 20 21 22 23 24 25 69 27 29 30","notebook; journal; sketchbook!6!3!52 14 15 18 19 21 82 23 24 26 28  29 35","package{s} of hot dogs!3!3!51 45 47 49","pack{s} of chemical light sticks (5 sticks)!8!1!53 57 17 73 76 80 81 83 86 92  71 103","pack{s} of chewing gum; pack{s} of Blackjack chewing gum!6!.5!52 45 82 100 49 29 30","pack{s} of cigarettes!13!1!53 63 82 100","pair{s} of safety goggles!2!1!52 59 54 40 20 87 55 26","peaked cap; campaign hat!2!.5!51 15 59 54 40 83 55","pencil; pen!1!1!51 24 28","pipe; chain!3!3!53 17 20 84 105","pitchfork!3!10!53 13 71","plastic cup; glass!1!3!51 31 19 27 28 ","plate!1!3!51 19 27","polaroid camera!3!3!53 31 15 44 19 21 82 22 25 26  29 30","police baton; nightstick!3!3!53 83 105","police uniform!2!3!51 37 15 59 54 83 55","pool table!24!80!52 33 19 103","pork chop; {|}pork ribs{|}; pork roast; {|}pork spareribs{|}; pork loin chop{|s}; pork sausage!3!10!51 45 46 47","portable stove!3!3!53 31 57 17 73 86 91 92 70","portable water purification filter!14!3!52 31  71 103","pressure cooker; hot plate!6!10!52 31 19","pulse pistol!27!6!52 10 31 104 33 87 89 106 26 101","pulse rifle!36!20!52 10 31 104 33 89 26 107 101","purse; handbag!1!3!51 15 61 19 22 24 25 30","rabbit's {foot|feet}; {|pairs of }Starlight Casino dice; deck{s} of Elvis Presley playing cards; poker chip{s} from the Sands Casino in Reno; Gideon's bible; pocket crucifix; St. Jude pendant; St. Christopher figurine; Star of David necklace; {|pairs of }Masonic cufflinks; Order of Odd Fellows tie clip; class ring!3!.5!53 82 35","radiation suit!12!10!53 31 59 38 54 20 81 86 89 55 26 103","red Gingham dress; blue Gingham dress; yellow Gingham dress; green Gingham dress; black and white Gingham dress!2!.5!51 37 59 54 74 75 78 79 87 88 91 92","rifle scope!8!1!53 13 31 19 85 88 103","ring!7!.5!53 66 102","road map!1!1!51 14 17 73 77 86 91 92 22 30","roll{s} of 35mm film (24 shots)!6!.5!52 41 42","roll{s} of polaroid film (10 shots)!3!1!53 41 44","safe-cracking kit!20!20!52 31 15 16 86 90 71 103","scalpel!1!1!51 67 71","set{s} of horse tack!1!20!51 13","set{|s} of keys!1!.5!51 14 15 19 20 21 22 23 24 26 28 35","shawl!2!.5!53 13 59 38 54 19 75 78 79 88 91 92","shiv; switchblade!3!1!51 16 84 86 90 105","shotgun shell!1!.5!53 0 11","slab{s} of bacon!3!1!51 45 19 47 49","sleeping bag; tent!1!10!51 57 17 73 86 92","sombrero!2!.5!52 13 59 40 77 85 92 55","stick{s} of beef jerky!3!1!51 45 19 47 49","stick{s} of dynamite!3!1!53 65 20 81","straw sun hat!2!.5!53 15 59 54 40 19 75 78 79 87 88 91 92 22 25","stun baton!11!3!52 83 89 105 103","suit{|s} of riot gear!15!20!53 12 31 15 16 83 86 23 103","sword; machete!3!3!52 73 88 89 105","tabletop radio!1!10!51 14 31 15 60 64 17 19 21 23 ","teargas grenade!3!1!53 15 65 83","thermos!11!3!53 57 17 19 85 86 103","toaster!1!10!51 31 19","toy robot!6!3!52 31 43 19 72","trenchcoat; sports jacket!2!.5!53 59 38 79 55","walkie-talkie!6!3!52 31 15 60 64 20 21 79 83 86 89 23 26","wanted poster!3!.5!53 73 77 83","whole chicken!3!10!51 45 46 47","will; contract; war bond; passport!1!1!51 102","wrench{es}; hammer!1!3!51 14 17 20 74 80 86  71","{|pairs of }Mary Jane shoes!2!.5!51 15 59 39 54 19 21 74 75 79 87 88 90 91 92 23","{|pairs of }black leather shoes!2!.5!51 15 59 39 54 19 21 73 74 75 76 79 80 83 87 88 89 90 91 92 55 23","{|pairs of }blue suede loafers; {|pairs of }saddle shoes!2!.5!53 59 39 54 88 55","{|pairs of }chaps!2!.5!51 36 13 59 54 85 55","{|pairs of }combat boots!2!.5!51 12 59 39 54 73 77 83 84 86 89 92 55 23","{|pairs of }cowboy boots!2!.5!51 59 39 54 19 73 77 78 79 80 81 84 85 86 88 90 91 92 22 55 ","{|pairs of }dice!3!.5!51 16 19 82 35 103","{|pairs of }dog tags!1!.5!51 89 23 35","{|pairs of }forceps!3!3!53 67 71","{|pairs of }military fatigues!2!3!51 37 59 54 86 89 55 23","{|pairs of }night vision goggles!10!3!52 36 31 59 43 54 83 86 89 55 23 103","{|pairs of }slacks {and a|with} button up shirt{s}!2!.5!51 37 59 19 74 75 87 88 91 92 55","{|pairs of }work boots!2!.5!51 12 59 39 54 73 77 78 81 83 84 86 88 90 92 55 23","{|sets of }football pads!11!10!53 12 17 84 86 103","{|suits of }makeshift metal armor!15!20!52 12 31 16 84 86 103","{|}beef brisket{|s}; beek flank steak{|s}; beef sirloin steak; beef prime rib; beef pot roast; beef rib roast; beef T-Bone steak!3!10!51 45 46 47","{|}binoculars!11!3!53 31 19 73 86 89 103","{|}bongos; flute!3!3!53 92 35","{|}brass knuckles!3!1!52 16 84 105","{|}jeans and a T-shirt; {|}jeans and a button up work shirt; {|}jeans and a flannel shirt; {|}jeans and a western shirt!2!.5!51 37 59 54 19 73 74 76 77 78 80 84 85 86 88 90 91 92 55");
var l=new t(["post","pre","glasses","injuries","military:tattoo","sailor:tattoo","tattoo","high","low","normal","common","rare","uncommon","kit:courier","kit:craftsperson","kit:doctor","kit:electrician","kit:gunslinger","kit:homesteader","kit:leader","kit:mechanic","kit:miner","kit:police","kit:raider","kit:rancher","kit:scavenger","kit:scientist","kit:settler","kit:soldier","kit:thief","kit:trader","kit:vagrant","innate","Agile","Attractive","Cunning","Persuasive","Smart","Strong","Tough","Willpower","Art","Athletics","Bargain","Business","Camouflage","Electrical Repair","Foraging","Forensics","Government","Homesteading","Horseback Riding","Humanities","Law","Maritime","Mathematics","Mechanical Repair","Medicine","Mining","Negotiate","Observation","Research","Scavenging","Spelunking","Tracking","Wayfinding","Archery","Explosives","Firearms","Melee Weapons","Military","Unarmed Combat","Blacksmith","Brewer","Cook","Glassblower","Leatherworker","Potter","Weaver","Woodworker","Chemical Engineering","Civil Engineering","Eletrical Engineering","Mechanical Engineering","Mining Engineering","Nuclear Engineering","Chinese","French","German","Italian","Russian","Spanish","Biology","Chemistry","Geology","Physics","Science","Social Science","Deceive","Forgery","Intimidate","Lockpicking","Pickpocket","Safe Cracking","Stealth","Streetwise","Communications","Computers","Cryptography","Programming","Robotics","Rocketry","Butcher","Carpenter","Clothier","Gunsmith","Machinist","Mason","Plumber","Wagonwright","Driving","Motorcycling","Pilot Aircraft","Trucking"]);l.register(i,"Air Force!68 70 122!59 69 71!10 28 4 9 0 1","this.assignRank(c);","Army!68 70!59 69 71 45!10 28 4 9 0 1","this.assignRank(c);","Bounty Hunter!68 100!43 45 51 64 65 69 71 104 105 121!12 3 17 8 0","","Business Executive; Manager!43 44!49 53 55 59 86 87 88 89 90 91!12 9 1","","Carnie!43 98!60 62 105 120!12 8 1 6","","Clerk; Sales Clerk; Secretary; Salesman; Hotel Clerk; Motel Clerk; Warehouse Clerk!44!43!10 8 1","","Coast Guard!54 68 70!59 69 71!11 28 4 9 0 1 5","this.assignRank(c);","Courier!51 65!66 68 120 121 122 123!12 13 9 0","","Craftsperson!43!41 44 72 73 74 75 76 77 78 79!10 14 9 0","","Doctor!57!61 92 93 96 48!11 7 15 0 1","c.honorific = 'Doctor';","Elementary school teacher; Middle school teacher; high school teacher!61!41 42 52 55 92 93 94 95 96 97!10 2 9 1","","Engineer!55 61!107 110 111 80 81 82 83 84 85!12 9 1","","Homesteader; Farmer!50!42 43 46 56 60 72 73 74 75 76 77 78 79 120 123!10 18 9 0","","Innate!!33 34 35 36 37 38 39 40!10 32","","Librarian; Archivist!61!86 87 88 89 90 91 107!12 2 9 1","","Locksmith!101!43 44 56 103 107!11 16 20 9 0 1","","Marine!68 70!59 69 71 65 45!10 28 4 9 0 1 5","this.assignRank(c);","Mayor; Council Member!43 49!44 60!11 7 19 0","","Mechanic!46 56!43 106 107 108 109 110 111!10 20 9 0 1","","Miner!58!46 56 63 67!10 21 8 0 1","","Navy!54 68 70 122!59 69 71!12 28 9 0 1 5","this.assignRank(c);","Newspaper Reporter!60 61!49 98 105 106!12 2 9 1","","Police!68!42 49 59 60 71 100 105!12 22 9 0 1","this.assignRank(c);","Professor!61!41 52 53 55 57 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 106 107 108 109 110 111!11 2 7 26 1","c.degree = 'Ph.D.'","Raider!68 69!45 51 64 66 67 71 98 100 104 121!12 3 23 8 0 6","","Rancher; Cowhand!51 68!42 43 47 50 60 64 65!10 24 9 0 1","","Scavenger!62 65!47 60 101 103 66 69 68!10 3 25 9 0","","Scientist!61!55 92 93 94 95 96 97 106 107 108 109 110 111!11 2 7 26 0 1","","Settler!50!42 43 46 56 60 72 73 74 75 76 77 78 79 120 123 105!10 27 9 0","","Thief!98 100 105!35 101 99 102 103 104 69 108 43!10 29 8 0 1","","Trader!43 44!35 46 53 56 59 62 91 98 105 106 36!12 2 30 9 0","","Tradesperson!43!44 112 113 114 115 116 117 118 119!10 14 9 0","");var c=new o(["clientele:lobrow","clientele:nobrow","cluster:low","cluster:medium","cluster:none","common","rare","uncommon","encampment","roadside","settlement","town","trade:any","trade:buylow","trade:currency","trade:luxuries","trade:necessities","trade:sellhigh","trade:stocked"]);c.register("Bar; Tavern; Saloon!May have bottles to purchase.!trader!!alcohol -bottleofwine!50!!!5 0 1 4 5 10 14","Biker Shop!!Biker Gang!!kit:raider | weapon | ammo | drug!100!!!6 0 2 6 9 12 13","Blacksmith!Will forge custom work or repair items.!Craftsperson!blacksmith!!!!!7 1 9 10 11 14 16 7","Bookstore!!trader!!publication!100!!!7 1 4 10 13 14 16 18 7","Butcher Shop; Meat Market!Will slaughter livestock (chickens 1T; pigs/goats 3T; cattle 6T).!trader!Butcher!meat -canoffidodogfood -preserved!100!!!7 1 2 10 14 15 16 17 7","Clothing Store; Outfitters; Mercantile!!trader!!clothing -military -industrial!100!!!5 1 2 5 8 10 13 14 16 18","Diner; Cafe; Restaurant; Drive-Thru; Roadhouse!A hot meal for 4T.!trader!!prepared food!!!!6 1 4 6 9 14","Diner; Cafe; Restaurant; Eatery; Luncheonette!A hot meal for 3T.!trader!!prepared food!!!!5 1 4 5 10 11 14","Feed Store!Bags of feed for 4T.!trader!!!!!!5 1 5 9 10 12 13","General Store; Mercantile; Trading Post!!trader!!-kit:personal -publication -military -food -firearm -ammo -research -br!50!3!!5 1 4 5 10 12 13","Gunsmith; Gun Shop; Firearms; Shooting Range!!tradesperson!Gunsmith!firearm -br!30!!10!7 1 4 10 14 15 16 17 18 7","Hardware Store!!tradesperson!Mechanical Repair!tool | toy | camping!50!1!20!7 1 3 9 10 11 14 16 18 7","Icehouse!They sell ice.!trader!!!!!!6 1 6 11 14 16","Liquor Store!!trader!!alcohol!100!!!6 0 1 4 8 6 9 10 14","Livestock!Will have some combination of chickens (4T), pigs (10T), goats (10T), and/or cattle (18T) for sale. Will not generally buy livestock (find a slaughterhouse or butcher).!trader!!!!!!5 1 5 10 12 13","Locksmith!Can open anything you bring to them, no questions asked (3T).!locksmith!!!!!!6 1 4 6 10 11 14 15 16","Mart; Market; Groceries!!trader!!food -ration!100!!!5 1 2 5 8 10 13 14 16","Pawn Shop; Antique Store!!trader!!-food -rare -ammo -weapon -luxury -scifi!50!3!!5 6 1 4 5 6 10 12 17","Pottery Shop!!tradesperson!Potter!-br pottery!100!!!7 1 2 10 14 16 7","Repair Shop; Electronics Shop!Electrical repair (2-6T).!mechanic!Electrical Repair!electronics | communications!20!!!7 1 4 10 11 12 13 18 7","Repair Shop; Service Station!Mechanical repair (2-6T).!mechanic!Mechanical Repair!br -firearm -house -electronics!10!!!7 1 4 10 11 12 13 18 7","Sporting Goods Store!!trader!!sport | camping!!!!6 1 3 6 9 10 12 13","Tattoo Parlor; Tattoos!3-5T for a tattoo.!trader!Art!!!!!7 0 10 14 15 16 7"),n.exports={getPlaces:function(){return["Agricultural","Automotive","Civic","Criminal","Garage","Hospital","House","Industrial","Institution","Lodging","Military","Office","Public","Research","Restaurant","School","Tourism","Travel"]},itemDatabase:s,professionDatabase:l,storeDatabase:c}},{"../db/item_database":5,"../db/profession_database":6,"../db/store_database":7,"../models/atomic_profession":28}],16:[function(e,n,a){function r(e,n){var a=l.find(e);n.members.forEach(function(e){e.traits.Military=.5,a.assignRank(e),e.traits.Military=1});var r=s.last(n.members),t=n.members[0].honorific;r.traits.Military=4;do a.assignRank(r);while(r.honorific===t)}function t(e,n){return e.is("food")||e.is("kit:personal")}function o(e){return h[s.test(80)?"both":e.male?"male":"female"]}function i(e){var n=o(e),a=s.random(n);return e.name.nickname=s.format(a,e.name),a}var s=e("../ion"),l=e("./data").professionDatabase,c=e("./character").createCharacter,u=e("../models/gang"),m={"Biker Gang":{prof:"raider",nicks:100,traits:{Motorcycling:1},count:"3d4-2",mil:!1,names:["Pagans","Outlaws","Bandidos","Mongols","Vagos Motorcycle Club","Free Souls","{Grim |}Reapers","Gypsy Jokers","Highwaymen","Iron Horsemen","Rebels","Comanchero","Devil's Disciples","Diablos","Finks","58s","Road Devils","{Lone |}Legion","Road {Devils|Knights}","Skeleton Crew","Low Riders"]},"Street Gang":{prof:"thief",nicks:100,count:"1d4+1",mil:!1,names:["Magnificents","Purple Hearts","Coasters","Businessmen","Gladiators","{Earls|Dukes|Counts|Barons|Lords}","Daggers","Big Dogs","Young Lords","Imperial Hoods","Bulls","Lightenings","Crowns","Senators","Hawks","Savages","Lucky Seven","Gents","Enchanters"]},"Raiding Gang":{prof:"raider",count:"3d4-1",nicks:90},"Scavenger Party":{prof:"scavenger",count:"1d4+1",nicks:50},"Cowboy Posse":{prof:"rancher",count:"1d5+1",nicks:20},"Cattle Rustler Gang":{prof:["rancher","rancher","scavenger","thief"],count:"1d3+1",nicks:50},"Army Patrol":{prof:"army",count:"1d3*4",mil:"army",nicks:5},"Marine Patrol":{prof:"marine",count:"1d3*4",mil:"marine",nicks:15}},h={female:['{given} "The {Queen|Vixen|Waitress|Witch}" {family}','"{Ma|Baby Blue Eyes|Fat Girl|Gold Digger|Hot Lips|Monkey Girl|Repo Girl|Roxy|Sweet Cakes|Wild Woman}" ({given} {family})'],male:['{given} "{Wild|Repo|Hatchet|Ice} Man" {family}','"{Bugsy|Pa|Bag Man|Monkey Boy|Muscles|Caveman|Maverick|Music Man|Nice Guy|Pretty Boy}" ({given} {family})','{given} "The {Hitman|Sandman|Watchman|Rifleman|Gunman|Trigger Man}" {family}','{given} "{Lil|Fat|Big} {Loco|Man|Boy|Daddy|Tuna} {family}"'],both:['"{Big|Fat|Little|Skinny|Greedy|Crazy|Trigger|Two-Finger|Three-Finger|Young|Old|Doc|Lowdown|Rowdy} {given}" {family}','{given} "The {Agitator|Ant|Bag|Banker|Barber|Blast|Bloodhound|Boot|Brain|Brains|Bug|Bull|Burnout|Bystander|Cartridge|Cheater|Clown|Cruiser|Dasher|Dentist|Duke|Fence|Ghost|Reaper|Groundhog|Hammer|Hatchet|Joker|Kid|Killer|Knife|Lead Foot|Machine|Menace|Monster|Mouse|Rat|Prairie Dog|Mouthpiece|Mumbler|Ox|Rabbit|Razor|Rev|Roach|Saint|Show|Shotgun|Snake|Sore|Suit|Trigger|Unwanted|Viper|Waiter|Wall|Watcher|Weasel|Whisperer|Wire|Wolf|Zealot|Zero|Zookeeper|Plumber|Kleaner}" {family}','"{Ammo|Angel|Animal|Baby Face|Babycakes|Baldo|Bananas|Band-Aid|Bats|Beans|Beef|Bench|Bix|Black Eye|Blackjack|Blaze|Bloody|Blue Eyes|Blue Nose|Books|Boxcars|Bugs|Bugsy|Butterfingers|Candles|Coins|Cold Finger|Crackers|Cranky|Creaky|Cue Ball|Cuts|Dasher|Devious|Dice|Digger|Droopy|Eyes|Fangs|Fast Trigger|Flames|Flowers|Foot Long|Framed|Freckles|Free Style|Frosty|Goldie|Greasy Thumb|Great White|Ha-Ha|Half Full|Happy|Hell Raiser|Holy Smoke|Hot Shot|Icepick|Itchy|Jezebel|Kid Blast|Kid Twist|King Kool|Knots|Knuckles|Ladykiller|Lefty|Long Hair|Looney|Lucky|Machine Gun|Maniac|Matches|Midnight|Moneybags|Needles|Nitro|Numbers|Old Creepy|One Arm|Patch-Eye|Payola|Peanuts|Pee Wee|Pinky|Popcorn|Pork \'n Beans|Roadkill|Roulette|Scarface|Scars|Scumbag|Seven Clip|Shades|Shady Eyes|Shaggy|Sharp Edge|Sharpie|Shiny|Shocker|Short Stack|Side Step|Silver Dollar|Skidmarks|Slingshot|Sluggo|Smiley|Smokey|Sneakers|Spanky|Sparkey|Spinner|Squeaky|Squinty|Sticks|Sticky Fingers|Stonewall|Tick Tock|Toothless|Trails|Twinkle Cakes|Two Guns|Two Holes|Wheels|Wild Child}" ({given} {family})']},d=s.keys(m);n.exports.getGangTypes=function(){return d.sort()},n.exports.assignNickname=i,n.exports.createGang=function(e){e=s.extend({},e||{});var n=e.type||s.random(d),a=m[n];if(s.isUndefined(a))throw new Error("Invalid gang type: "+n);var o=s.isNumber(e.count)?e.count:s.roll(a.count),l={kind:n};a.names&&(l.name=s.random(a.names));var h=new u(l);return s.times(o,function(){var e=c({profession:s.random(a.prof),traits:a.traits||{}});e.initiative=s.roll("2d6")+e.trait("Agile"),e.hp=10+e.trait("Tough"),s.test(a.nicks)&&i(e),e.inventory.filter(t),h.add(e)}),a.mil&&h.members.length&&r(a.mil,h),h.members.sort(function(e,n){return e.initiative<n.initiative?1:e.initiative>n.initiative?-1:0}),h}},{"../ion":26,"../models/gang":32,"./character":12,"./data":15}],17:[function(e,n,a){function r(e,n){for(var a=new Date(e.getTime());n.dayOfWeek&&s[a.getUTCDay()]!==n.dayOfWeek;)a.setUTCDate(a.getUTCDate()+1);return a}function t(e,n){var a=l[e.getUTCMonth()]+" "+e.getUTCFullYear();return"full"===n?s[e.getUTCDay()]+" "+e.getUTCDate()+" "+a:a}function o(e){e=e||{},e.period=e.period||"weekly";var n=c[e.period];if(!n)throw new Error(e.period+" is not a valid period.");e.startDate=e.startDate||"1956-01-01",e.endDate=e.endDate||"1958-07-14",e.format=e.format||"full",e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate);for(var a=[],o=e.startDate;o<e.endDate;n(o,e)){var i=r(o,e);if(i<e.endDate){var s=t(i,e.format);a.push(s)}}return a}var i=(e("../ion"),6048e5),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c={weekly:function(e){e.setTime(e.getTime()+i)},monthly:function(e){1!==e.getUTCDate()&&e.setUTCDate(1),e.setUTCMonth(e.getUTCMonth()+1)},biweekly:function(e,n){var a=1===e.getUTCDate()?15:1;e.setUTCDate(a),1===a&&e.setUTCMonth(e.getUTCMonth()+1)},bimonthly:function(e){e.setUTCMonth(e.getUTCMonth()+2)}};n.exports=o},{"../ion":26}],18:[function(e,n,a){n.exports={name:"Root","abstract":!0,children:[{name:"Natural","abstract":!0,type:"rarity",children:[{name:"Canyon",freq:"common"},{name:"Cave",freq:"rare"},{name:"Caverns",freq:"rare",descr:"cave complex"},{name:"Crater","abstract":!0,freq:"rare",type:"rarity",children:[{name:"Asteroid Crater",freq:"rare"},{name:"Crash Site",freq:"uncommon",descr:"Plane or rocket"}]},{name:"Forest",freq:"uncommon"},{name:"Prairie",freq:"common"},{name:"Lake",freq:"uncommon"},{name:"Radioactive Area",freq:"rare"},{name:"Rest Area",freq:"common"},{name:"Scenic Overlook",freq:"uncommon"},{name:"River",freq:"rare"},{name:["Dry riverbed","Gulch"],freq:"uncommon"}]},{name:"Rural","abstract":!0,type:"rarity",children:[{name:"Farm",freq:"uncommon",type:"rarity",children:[{name:"Barn",freq:"common"},{name:"Garage",freq:"common"},{name:"Stable",freq:"common"},{name:"Storm Cellar",freq:"common"},{name:"Root Cellar",freq:"common"},{name:"Shed",freq:"common"},{name:"Chicken Coop",freq:"uncommon"},{name:"Silo",freq:"uncommon"},{name:"Grainery",freq:"uncommon"},{name:"Greenhouse",freq:"rare"},{name:"Fallout Shelter",freq:"rare"},{name:"Well House",freq:"rare"},{name:"Water Mill",freq:"rare"},{name:"Windmill",freq:"rare"},{name:"Horsemill",freq:"rare"},{name:["Pigpen","Sty"],freq:"rare"}]},{name:"Ranch",freq:"uncommon",children:[{name:"Ranch House"},{name:"Bunkhouse"},{name:"Chow Wagon"},{name:"Holding Pen"},{ref:"Farm"}]},{name:"Dairy Farm",freq:"rare"},{name:"Water trough with windmill pump",freq:"common"},{name:"Shack",freq:"common"},{name:"Fairground",freq:"rare"},{name:"Grange Building",freq:"rare"},{name:"Church",freq:"uncommon",type:"listed",children:[{name:"Restroom",count:1,type:"listed",children:[{name:"Men's Restroom",count:1},{name:"Women's Restroom",count:1}]},{name:"Chapel",count:1},{name:"Industrial Kitchen",count:"1d2-1"},{name:"Meeting Hall",count:"1d2-1"}]},{name:"Stables",freq:"rare"},{name:"Cemetery",freq:"rare"},{name:["Landfill","Dump"],freq:"uncommon"},{name:"Race Track",freq:"rare"},{name:"Luxury Home",freq:"rare"},{name:"Mobile Home Park",freq:"common"},{name:"Prison",freq:"uncommon"},{name:"Reformatory School",freq:"rare"},{name:"Ranger Station",freq:"rare"},{name:"Power Station",freq:"uncommon"},{name:"Power Line",freq:"common"},{name:"Dam",freq:"rare"},{name:"Reservoir",freq:"rare"},{name:"Water Tower",freq:"common"},{name:"Cistern",freq:"common"},{name:"Indian Teepee",freq:"rare"}]},{name:"Road","abstract":!0,descr:"What is around roads between destinations",children:[{name:"Roadside Stand"},{name:"Highway Patrol Station"},{name:"Battle Wreckage"},{name:"Car Accident"},{name:"Roadside Memorial"},{name:"Roadside Service Building","abstract":!0,children:[{name:"Gas Station"},{name:"Motel"},{name:"Diner",children:[{ref:"Restroom"}]},{name:"Drive-In Diner"},{name:"Truck Stop"},{name:"Rest Stop"},{name:"Gun Shop"},{name:"Car Dealership"},{name:"Roadside Chapel"},{name:"Dude Ranch"},{name:"Gift Shop"},{name:"Campground",children:[{ref:"Restroom"}]},{name:"Boat Shop"},{name:"Bait Shop"},{name:"Casino",type:"listed",children:[{ref:"Restroom",count:1},{name:"Cashier Pen",count:1},{name:"Game Floor",count:"1d3"}]},{name:"Mini Golf"},{name:"Slaughterhouse"},{name:"Grain Silo"},{name:"Grain Storage Depot",children:[{ref:"Silo"}]},{name:"Feed Store"},{name:"Radio Station",freq:"rare",type:"listed",descr:"TODO: name of station",children:[{name:"Broadcast Building",count:1,type:"listed",children:[{name:"Break Room",count:"1d2-1"},{name:"Lobby",count:1},{name:"Office",count:"1d3"},{ref:"Restroom",count:1},{name:"Storage Room",count:"1d2-1"}]},{name:"Radio Towers",count:1}]}]}]},{name:"Rail","abstract":!0,children:[{name:"Train Station"},{name:"Grain Transfer Depot",children:[{ref:"Silo"}]},{name:"Trainyard",children:[{name:["Roundhouse","Engine House"]},{name:"Rail Yard"},{name:"Repair Building"},{name:"Administrative Offices"}]},{name:"Wreckage","abstract":!0,children:[{name:"Abandoned Train Cars"},{name:"Derailed Train Cars"}]}]},{name:"Rural Industrial","abstract":!0,type:"rarity",children:[{name:"Military Installation","abstract":!0,freq:"rare",type:"rarity",children:[{name:"ICBM Missile Silo",freq:"uncommon"},{name:"Underground Bunker Complex",freq:"uncommon"},{name:"Ammunition Factory",freq:"rare"},{name:"Army Base",freq:"common"},{name:"Air Force Base",freq:"common"}]},{name:"Research Facility","abstract":!0,freq:"rare",children:[{name:"Astronomical Observatory",freq:"rare"},{name:"University Campus",freq:"uncommon"},{name:"Light-Industrial Research Facility",freq:"uncommon"}]},{name:"Mine",freq:"uncommon"},{name:"Quarry",freq:"uncommon"},{name:"Oil Field",freq:"uncommon"},{name:"Airport",freq:"rare"}]},{name:"Surburb","abstract":!0,children:[{name:"Housing tract",children:[{name:"House",children:[{name:"Bathroom"}]}]},{name:"Business District",type:"unique",count:"3d3",children:[{name:"Grocery Store",freq:"common"},{name:"Restaurant",freq:"common"},{name:["Barber Shop","Beauty Salon"],freq:"uncommon"},{name:"Drug Store",freq:"common"},{name:"Bookstore",freq:"rare"},{name:"Liquor Store",freq:"uncommon"},{name:"Pet Shop",freq:"rare"},{name:"Record Shop",freq:"rare"},{name:"Instrumental Music Store",freq:"rare"},{name:"Bank",freq:"uncommon"},{name:"Bakery",freq:"uncommon"},{name:"Library",freq:"uncommon"},{name:"History Museum",freq:"rare"},{name:"Movie Theater",freq:"uncommon"},{name:"Theater",freq:"rare"},{name:"Florist",freq:"rare"},{name:"Bar",freq:"common"},{ref:"Diner",freq:"common"},{name:"Hotel",freq:"uncommon"}]},{ref:"Church"},{name:"Synagogue"},{ref:"Cemetery"},{name:"Drive-In Movie Theater"},{ref:"Mobile Home Park"},{name:"Elementary School"},{name:"High School"},{name:"College Campus"},{name:"Produce Stands"},{name:"Police Station"},{name:"Fire Station"},{name:"Apartment Building"},{name:"Retirement Home"},{name:"Sanitarium"},{name:"Nurseries"},{name:"Hospital"},{name:"City Park",children:[{name:"Playground"},{name:"Pool"},{name:"Sports Field"},{name:"Picnic Area"},{name:"Swimming Pool"}]}]},{name:"Urban Ruins","abstract":!0,children:[{name:"Factory","abstract":!0,children:[{name:"Junk Yard"},{name:"Salvage Yard"},{name:"Scrap Yard"},{name:"Warehouse"},{name:"Manufacturing Plant"},{name:"Soda Bottling Plant"},{name:"Business Headquarters"},{name:"Industrial Bakery"},{name:"Trucking Facilities"},{name:"Foundry"},{name:"Power Transfer Station"},{name:"Bus Station"},{ref:"Train Station"}]},{ref:"Business District"}]},{name:"Settlement","abstract":!0,children:[{name:"Semi-Permanent Camp"},{name:"Hobo Encampment"},{name:"Bunker"},{ref:"Fallout Shelter"},{name:"Camp Site"},{name:"Makeshift Fortification"},{name:"Cabin"},{name:"Tent City"},{name:"RV Encampment"}]}]}},{}],19:[function(e,n,a){function r(e,n){(e.children||R).forEach(n)}function t(e,n){n["abstract"]||(_.isArray(n.name)?e.push(_.random(n.name)):e.push(n.name))}function o(e,n){n=n||[],t(n,e);var a=[];return r(e,function(e){o(e,a)}),a.length&&(e["abstract"]?n.push(a.join(", ")):n.push("("+a.join(", ")+")")),n.join(", ").replace(/\, \(/g," (")}function i(e){r(e,function(n){if(!M.has(n.freq))throw new Error("Rarity node "+e.name+" has child without valid 'freq' attribute: "+n.name)})}function s(e){r(e,function(n){if(!n.count)throw new Error("Listed node "+e.name+" has child without 'count' attribute: "+n.name)})}function l(e){if(!e.count)throw new Error("Unique node requires count property: "+child.name)}function c(e){if(e.name&&C.has(e.name))throw new Error("Node has been defined twice: "+e.name);return!e.ref}function u(e,n){if(!e.ref)return!1;if(!C.has(e.ref))throw new Error("Node reference hasn't been defined: "+e.ref);for(var a=n;null!=a;a=a.parent)if(a.name===e.ref)throw new Error("Cyclical reference to "+e.ref);return!0}function m(e){var n=D[e.type];if(n)n(e);else if("undefined"!=typeof e.type)throw new Error("No validator for node type: "+e.type)}function h(e){var n=_.random(e.children||[]);e.children=[n]}function d(e){x[e.name]||(x[e.name]=new S(_.identity,!1),r(e,function(n){x[e.name].add(n.freq,n)})),e.children=[x[e.name].get()]}function f(e){}function g(e){for(var n=new Set,a=_.roll(e.count),r=[],t=0;r.length<a&&100>t;){var o=_.random(e.children);n.has(o)||(n.add(o),r.push(e))}e.children=r}function p(e){e.children&&e.children.length&&((T[e.type]||h)(e),r(e,p))}function y(e){var n=JSON.stringify(JSON.decycle(e)),a=JSON.retrocycle(JSON.parse(n));return p(a),a}function b(e){var n=Object.assign({},e);if(e.children)for(var a=0;a<e.children.length;a++)e.children[a]=b(e.children[a]);return n}function v(e,n){var a=C.get(n.ref),r=b(a);return Object.assign(r,n),r.parent=e,delete r.ref,r}function k(e){r(e,function(n,a){if(D.isValidRef(n,e))e.children[a]=v(e,n),m(e.children[a]);else{if(!D.isValidNode(n))throw new Error("Node is not a valid reference or a new node: "+n);C.set(n.name,n),n.parent=e,m(n),k(n)}})}function w(){B.parsed||(k(B),B.parsed=!0)}var _=e("../ion");e("../lib/cycle");var S=e("../tables/rarity_table"),B=e("./location-data");B.parsed=!1;var C=new Map,M=new Set(["common","uncommon","rare"]),R=Object.freeze([]),D={rarity:i,listed:s,unique:l,isValidNode:c,isValidRef:u},x={},T={rarity:d,listed:f,unique:g};n.exports={createLocation:function(e){w(),e||(e=_.random(B.children).name);var n=C.get(e);return n?o(y(n)):null},getAllLocations:function(){return w(),B}}},{"../ion":26,"../lib/cycle":27,"../tables/rarity_table":44,"./location-data":18}],20:[function(e,n,a){function r(e,n){var a=parseInt(/#(\d+)/.exec(e)[1],10),r=parseInt(/#(\d+)/.exec(n)[1],10);return a-r}function t(e,n){return function(a,r,t){var o="rare"===r?5:"uncommon"===r?3:1;f(t).forEach(function(t,i,s){var l=a+", "+t+", #"+i+" of "+s.length;n.add(r,{name:e,title:l,enc:1,value:o,tags:["collectible"]})})}}function o(e){var n=R[e];return new d(n instanceof g?n.get():m.random(n))}function i(e){var n=R[e];return n instanceof g?n.size():n.length}function s(e,n,a,r){return e.map(function(t,o){var i=n+" poster",s=m.format("{0} #{1} of {2}",m.titleCase(t.replace(/_/g," ")),o+1,e.length);return{name:i,title:s,image:"images/"+n+"/"+t+a,value:r,enc:1,tags:["collectible"]}})}function l(e){var e=p(e,"type",{type:D});if(!R[e.type])throw new Error(e.type+" is an invalid collectible, use "+D.join(", "));return o(e.type)}function c(){return D}function u(e){var e=p(e,"type",{type:D,format:"long"}),n=i(e.type),a=Math.floor(m.gaussian(n/8,n/4));if("baseball cards"===e.type&&m.test(20)){var t=m.random(m.keys(B));return"Collector is looking for any team baseball card for the "+t+"."}for(var s=new h;s.size()<a;){var l=o(e.type);s.add(l.title)}var c=s.toArray();return c.sort(r),"short"===e.format&&(c=c.map(function(e){return e.match(/#\d+/)[0]})),"Collector is looking for "+e.type+": "+c.join(", ")+"."}var m=e("../ion"),h=e("../models/ion_set"),d=e("../models/item"),f=e("./historical_time_series"),g=e("../tables/rarity_table"),p=e("../parameters"),y=new g(m.identity,!1),b=new g(m.identity,!1),v=t("news magazine",b),k=t("comic book",y),w=["am_i_proud","america_calling","are_you_playing_square","be_a_victory_farm_volunteer","books_are_weapons_in_the_war_of_ideas","both_are_weapons","carry_on_don't_be_carried_out","do_the_job_he_left_behind","farm_scrap_builds_tanks_&_guns","fontana_dam","food_is_a_weapon","food_is_fighting_strength","for_service_in_civilian_defense","forgetfulness_helps_the_enemy","foxy_foreign_ideas","free_speech_doesn't_mean_careless_talk","groundwork_for_victory","harvest_war_crops","help_harvest","help_win_the_war","here's_a_war_job_for_you","hunger_breeds_madness","is_your_trip_necessary","it's_only_1000_minutes_from_cheyenned_to_berlin","join_the_schools_at_war_program","my_tank's_in_the_war_too","on_time_all_the_time","plan_a_victory_garden","plan_today_build_tomorrow","processed_food_is_ammunition","rationing_means_a_fair_share_for_all_of_us","report_faulty_wiring","right_is_might","save_your_cans","scrap","scrap_will_help_win","share_a_ride","share_your_car","shoot_to_kill","silence_means_security","soldiers_without_guns","stamp_out_black_markets","sucker","take_your_place_in_civilian_defense","the_2nd_front_depends_on_the_home_front","the_army_needs_more_lumber","the_inland_way_for_the_USA","the_key_to_victory","the_world_cry_food","this_war","today","together_we_can_do_it","together_we_win","vacation_at_home","victory_is_a_question_of_stamina","victory_patterns","wanted_for_victory","washington_beckons_you","we're_needed_again","we_are_helping_with_salvage","work_in_a_food_processing_plant","your_country_needs_soybeans","your_victory_garden"],_=["100_rifles","23_paces_to_baker_street","aces_high","atomic_city","atomic_kid","atomic_man","atomic_monster","atomic_submarine","bad_mans_river","bandolero","bullet_for_a_badman","canadian_mounties_vs_atomic_invaders","cattle_empire","cheaper_by_the_dozen","count_five_and_die","crack_in_the_mirror","day_of_the_triffids","desert_hell","dig_that_uranium","east_of_eden","emmanuelle","england_made_me","family_doctor","frankenstein_and_the_monster_from_hell","gang_war","garden_of_evil","gone_with_the_wind","guns_for_san_sebastian","hombre","hotel_sahara","impulse","in_love_and_war","intent_to_kill","julius_caesar","junior_army","kiss_of_the_vampire","lion_of_the_desert","lost_lives","man_hunt","moon_zero_two","night_was_our_friend","nor_the_moon_by_night","operation_uranium","pretty_poison","return_of_the_texan","rocket_to_the_moon","rogues_yarn","sierra_baron","sumuru","sword_of_sherwood_forest","teenage_rebel","the_black_castle","the_brass_bottle","the_chalk_garden","the_curse_of_the_mummys_tomb","the_deep_blue_sea","the_dunwich_horror","the_fiend_who_walked_the_west","the_gamma_people","the_gift_of_love","the_hallelujah_trail","the_hellfire_club","the_hound_of_the_baskervilles","the_legend_of_frenchie_king","the_lieutenant_wore_skirts","the_long_hot_summer","the_man_who_never_was","the_man_with_the_x-ray_eyes","the_many_loves_of_hilda_crane","the_mummy","the_raid","the_reward","the_riddle_of_the_sands","the_sheriff_of_fractured_jaw","the_sleeping_tiger","the_sun_also_rises","the_viking_queen","the_wind_cannot_read","the_young_warriors","them","three_little_girls_in_blue","uraniumboom","villa","wolf_dog"],S=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XIV"].map(function(e,n){var a=23===n?"XYZ":String.fromCharCode(n+65),r="Encyclopedia Britannica vol. "+e+", letter "+a+", #"+(n+1)+" of 24";return{name:"encyclopedia",title:r,value:10,enc:5,tags:["collectible"]}}),B={"Baltimore Orioles":["George Zuverink","Jim Busby","George Kell","Joe Ginsberg","Billy O'Dell","Joe Durham","Billy Gardner","Jerry Walker","Eddie Miksis","Ken Lehman","Bob Nieman","Willy Miranda","Art Ceccarelli","Jack Harshman","Frank Zupo","Al Pilaik","Connie Johnson","Bob Boyd","Brooks Robinson","Bert Hamric","Billy Loes","Hal Brown","Gene Woodling","Foster Castleman","Gus Triandos","Jim Marshall","Milt Pappas","Arnie Portocarrero","Lenny Green"],"Boston Red Sox":["Ted Williams","Frank Sullivan","Ted Lepcio","Dick Gernert","Dave Sisler","Pete Daley","Billy Klaus","Jackie Jensen","Billy Consolo","Frank Baumann","George Susce","Haywood Sullivan","Leo Kiely","Tom Brewer","Gene Stephens","Frank Malzone","Pete Runnels","Jim Piersall","Don Buddin","Ike Delock","Bob Porterfield","Mike Fornieles","Marty Keough","Lou Berberet","Willard Nixon","Murray Wall","Sammy White","Bob Smith","Bill Renna","Frank Malzone","Ted Williams","Jackie Jensen"],"Chicago Cubs":["Dale Long","Cal Neeman","Dave Hillman","Lee Walls","Dick Drott","Chuck Tanner","Bobby Adams","Walt Moryn","Moe Drabowsky","Bobby Morgan","Taylor Phillips","Elvin Tappe","Jim Bolger","Bob Anderson","Jerry Kindall","Dick Littlefield","Turk Lown","Sammy Taylor","Ernie Banks","Jim Brosnan","Don Elston","John Goryl","Tony Taylor","Bobby Thomson","Gene Fodge","Ed Mayer","Glen Hobbie","Ernie Banks"],"Chicago White Sox":["Jim Rivera","Ron H. Jackson","Billy Piee","Bill Fischer","Luis Aparicio","Early Wynn","Jim Landis","Jim Derrington","Earl Torgeson","Les Moss","Jim Wilson","Al Smith","Bob Keegan","Bubba Phillips","Billy Goodman","Ray Moore","Sherm Lollar","Dick Donovan","Tito Francona","Walt Dropo","Don Rudolph","Earl Battey","Nellie Fox","Jerry Staley","Dixie Howell","Sammy Esposito","Tom Qualters","Nellie Fox","Luis Aparicio","Sherm Lollar"],"Cincinnati Reds":["George Crowe","Bud Freeman","Bob Thurman","Smoky Burgess","Joe Nuxhall","Gus Bell","Jerry Lynch","Harvey Haddix","Stan Palys","Bob Henrich","Tom Acker","Dee Fondy","Don Hoak","Johnny Temple","Willard Schmidt","Bill Wight","Johnny Klippstein","Alex Grammas","Frank Robinson","Hal Jeffcoat","Bob Purkey","Ed Bailey","Steve Bilko","Roy McMillan","Brooks Lawrence","Charley Rabe","Dutch Dotterer","Vada Pinson","Pete Whisenant","Johnny Temple","Frank Robinson","Ed Bailey"],"Cleveland Indians":["Bob Lemon","Hal Naragon","Don Mossi","Roger Maris","Chico Carrasquel","Dick Williams","George Strickland","Dick Tomanek","Russ Nixon","Vic Wertz","Joe Caffie","Mike Gaia","Cal McLish","Bud Daley","Mickey Vernon","Larry Raines","Bobby Avila","Minnie Minoso","Hoyt Wilhelm","Fred Hatfield","Herb Score","Rocky Colavito","Billy Moran","Mudcat Grant","Larry Doby","Ray Narleski","Billy Harrell","Carroll Hardy","Dick Brown","Gary Geiger","Don Ferrarese","Herb Score"],"Detroit Tigers":["Billy Hoeft","J.W. Porter","Lou Sleater","Tim Thompson","Al Kaline","Steve Boros","Frank Bolling","Gus Zernial","Jim Bunning","Harry Byrd","Ray Boone","Bob Shaw","Red Wilson","Reno Bertoia","Frank Lary","Johnny Groth","Billy Martin","Paul Foytack","Gail Harris","Lou Skizas","Hank Aguirre","Jim Hegan","Tom Morgan","Charlie Maxwell","Bill Taylor","Harvey Kuenn","Charley Lau","Vito Valentinetti"],"Kansas City Athletics":["Alex Kellner","Bill Tuttle","Bob Martyn","Joe DeMaestri","Wally Burnette","Billy Hunter","Harry Chiti","George Brunet","Hector Lopez","Ralph Terry","Milt Graff","Woodie Held","Duke Maas","Tom Gorman","Hal W. Smith","Virgil Trucks","Ned Garver","Mike Baxes","Frank House","Bob Cerv","Murry Dickson","Jack Urban","Ray Herbert","Dave Melton","Vic Power","Preston Ward"],"Los Angeles Dodgers":["Charlie Neal","Don Drysdale","John Roseboro","Don Zimmer","Duke Snider","Sandy Amoros","Johnny Podres","Dick Gray","Gil Hodges","Sandy Koufax","Roger Craig","Rube Walker","Jim Gilliam","Don Demeter","Carl Erskine","Gino Cimoli","Randy Jackson","Clem Labine","Elmer Valo","Don Newcombe","Danny McDevitt","Joe Pignatano","Pee Wee Reese","Don Bessent","Carl Furillo","Ed Roebuck"],"Milwaukee Braves":["Lou Burdette","Felix Mantilla","Hank Aaron","Del Rice","Ernie Johnson","Bob Hazle","Johnny Logan","Frank Torre","Wes Covington","Don McMahon","Bob Taylor","Bob Buhl","Red Schoendienst","Andy Pafko","Carl Sawatski","Casey Wise","Bob Trowbridge","Warrenahn","Ray Shearer","Bob Rush","Joe Adcock","Bill Bruton","Del Crandall","Carl Willey","Gene Conley","Eddie Mathews","Harry Hanebrink","Joe Jay","Eddie Mathews","Hank Aaron","Warrenahn"],"New York Yankees":["Hank Bauer","Gil McDougald","Sal Maglie","Norm Siebern","Darrell Johnson","Johnny Kucks","Bobby Richardson","Tom Sturdivant","Enos Slaughter","Mickey Mantle","Don Larsen","Marv Throneberry","Jerry Lumpe","Bob Grim","Bill Skowron","Bob Turley","Elston Howard","Ryne Duren","Harry Simpson","Whitey Ford","Andy Carey","Art Ditmar","Yogi Berra","Al Cicotte","Tony Kubek","Bobby Shantz","Bill Skowron","Mickey Mantle","Bob Turley"],
"Philadelphia Phillies":["Rip Repulski","Ted Kazanski","Chuck Harmon","Joe Lonnett","Dick Farrell","Robin Roberts","Dave Philley","Harry Anderson","Willie Jones","Jack Meyer","Solly Hemus","Richiehburn","Warren Hacker","Jack Sanford","Granny Hamner","Mack Burk","Don Landrum","Jim Hearn","Bob Miller","Chico Fernandez","Stan Lopata","Don Cardwell","Wally Post","Curt Simmons","Bob Bowman","Pancho Herrera","Chuck Essegian","Ray Semproch"],"Pittsburgh Pirates":["Hank Foiles","Dick Groat","Robertoemente","Roy Face","Ron Kline","Bob Skinner","Jim Pendleton","Vern Law","Buddy Pritchard","Don Gross","Ted Kluszewski","Bill Virdon","Dick Rand","Bob Smith","Bill Mazeroski","Paul Smith","Gene Freese","Whammy Douglas","Bob Friend","Harding Peterson","Gene Baker","Bennie Daniels","Frank Thomas","Johnny O'Brien","John Powers","Danny Kravitz","Roman Mejias","Ron Blackburn","R.C. Stevens","Bob Friend"],"San Francisco Giants":["Willie Mays","Curt Balay","Mike McCormick","Darylencer","Valmy Thomas","Ozzie Virgil Sr.","Stu Miller","Willie Kirkland","Jim Finigan","Johnny Antonelli","Danny O'Connell","Dave Jolly","Whitey Lockman","Pete Burnside","Don Mueller","Eddie Bressoud","Ray Crone","Ray Katt","Paul Giel","Jim King","Ruben Gomez","Orlando Cepeda","Ray Jablonski","Hank Sa","Marv Grissom","Jim Davenport","Al Worthington","Bobeake","Ray Monzant","Bob Schmidt","Willie Mays"],"St. Louis Cardinals":["Eddie Kasko","Hobie Landrith","Morrie Martin","Del Ennis","Von McDaniel","Larry Jackson","Dick Schofield","Irv Noren","Alvin Dark","Billy Muffett","Joe Cunningham","Lindy McDaniel","Don Blasingame","Wally Moon","Lloyd Merritt","Herm Wehmeier","Hal R. Smith","Sam Jones","Ken Boyer","Gene Green","Wilmer Mizell","Bobby Gene Smith","Philark","Phil Paine","Joe Taylor","Curt Flood"],"Washington Senators":["Jim Lemon","Texevenger","Art Schult","Bud Byerly","Clint Courtney","Herb Plews","Bob Usher","Russ Kemmerer","Dick Hyde","Eddie Yost","Milt Bolling","Camilo Pascual","Ed Fitz Gerald","Chuck Stobbs","Roy Sievers","Rocky Bridges","Harmon Killebrew","Neil Chrisley","Albie Pearson","Pedro Ramos","Bobby Malkmus","Ralph Lumenti","Steve Koheck","Kenpromonte","Norm Zauchin","Whitey Herzog","Hal Griggs","Julio Becq"]},C=1,M=[];m.keys(B).forEach(function(e){B[e].forEach(function(n){var a="Pennant brand 1958 baseball card{|s}",r=n+", "+e+", #"+C++ +" of 466";M.push({name:a,title:r,enc:0,value:3,tags:["collectible"]})})}),v("Atlantic Dispatch Magazine","uncommon",{period:"weekly"}),v("The Weekly Nation","uncommon",{period:"weekly",dayOfWeek:"Monday",startDate:"1953-12-31"}),v("Verve","common",{period:"monthly",format:"short",dayOfWeek:"Thursday"}),k("Atomic Age Combat","uncommon",{period:"monthly",startDate:"1956-11-31",format:"short"}),k("Atomic War Comics","common",{period:"bimonthly",startDate:"1953-11-31",format:"short"}),k("Battlefield Action","uncommon",{period:"monthly",format:"short"}),k("Black Cobra","rare",{period:"monthly",format:"short"}),k("Blazing West","common",{period:"bimonthly",startDate:"1948-10-10"}),k("Forbidden Worlds","uncommon",{period:"monthly",format:"short"}),k("Giggle Comics","common",{period:"weekly"}),k("Madhouse Comics","rare",{period:"monthly",format:"short"}),k("Midnight Mystery","uncommon",{period:"biweekly",startDate:"1955-06-06"}),k("Space Action","common",{period:"monthly",format:"short"}),k("The Adventures of Captain Atom","common",{period:"monthly",format:"short"}),k("The Flame","uncommon",{period:"monthly",format:"short"}),k("The Hand of Fate","common",{period:"monthly",format:"short"}),k("War Stories","common",{period:"weekly",startDate:"1956-02-15"}),k("Wonder Boy","uncommon",{period:"monthly",format:"short"});var R={"movie posters":s(_,"movie",".jpg",10),"propaganda posters":s(w,"propaganda",".gif",10),encyclopedias:S,"baseball cards":M,"news magazines":b,comics:y},D=m.keys(R).sort();n.exports={createMemorabilia:l,getMemorabiliaTypes:c,createMemorabiliaWanted:u}},{"../ion":26,"../models/ion_set":33,"../models/item":34,"../parameters":42,"../tables/rarity_table":44,"./historical_time_series":17}],21:[function(e,n,a){function r(e){return o.random("River"===e&&o.test(100)?h:m)}function t(){var e=s();return o.test(10)?e.given:e.family}var o=e("../ion"),i=e("../tables/rarity_table"),s=e("./character_name"),l={Depression:["Alley","Arroyo","Basin","Canyon","Creek","Gap","Gulch","Gully","Hollow","Valley"],Flat:["Flat{|s}","Prairie","Meadow{|s}","Field","Range","Plain"],Elevation:["Butte","Bluffs","Cliff","Mountain{|s}","Point","Pass","Spur","Ridge","Butte","Mesa","Gap","Rock","Hill{|s}","Summit","Plateau"],Water:["Spring{|s}","Lake","Pond","Bar","Basin","Creek","River","Reservoir","Rapids","Stream","Wetlands","Swamp","Falls","Dam","Slough"],Junction:["Bend","Bridge","Junction","Crossing"],Woods:["Woods","Forest","Grove"]},c=["Adobe","{Agate|Amethyst|Geode|Diamond}","Alkali","Ant{|hill}","Antelope","Antler","Anvil","{Apple|Peach}","Arrow{|head|tail}","{Arlington|American|Army|Military|Soldier}","{Arapahoe|Navajo|Sioux}","{Alaska|Arizona|Wyoming|Colorado|California}","Artesian","{Ash|Pine|Oak|Aspen|Cottonwood}","Bachelor","Badger","Badlands","Bald","Bann{er|ock}","Bastard","Barber","Bard","Barrel","Battle","Bear{|paw|tooth|trap}","{Bear|Elk} Trap","Beaver","Bell","Bench","Berry","Big{| Hill| Horn| Chief| Cow}","Biscuit","Bison","Bobcat","Bone{|yard}","Boulder","Brush","Buck{|skin}","Buffalo","Bull","Burnt","Buzzard's","Calamity","Cedar","Chalk","Chief","Chimney","Cinder","Clay","Coal","Coffin","{Copper|Iron|Limestone|Sulphur}","Cornstalk","Cotton{|wood}","Cougar","Coyote","Crescent","Crooked","Crow","Deadwood","Deer","Dream","Dry","Eagle","{|Big |Little }Elk","Eureka","Fox","Frog","Gold Dust","Goose","Gopher","Granite","Green","Grinders","Grouse","Gypsum","Hawk","Hay{|stack}","Hells","Honey{|comb}","Horse{shoe| Pasture}","Indian","Juniper","{Little |}Sheep","Lone{| Tree}","Long","{Monolith|Monument}","Mud","{Mule|Burro}","Phantom","Pinnacle","Poker","Pole","Potter","Prairie Dog","Railroad","Rattlesnake","Rock{|y}","Round","Sage","Sawmill","Shady","Shotgun","Skeleton","Slaughter","Soda","Squaw","Stone","Tungsten","Twin","Wagon{|wheel|hound}","Wild","Willow","Wolf","Young","{Bad|Black|Dead|Mad} Dog","{Big |Little |}Pine{| Flat}","{Big|Black|Broken|Red} Rock","{Dead|Blind} Man's","{Saddle|Dead|Lame|Happy|Wild} Horse"],u=["Alfalfa","Big Curve","Bottom Dollar","Buckeye","Buzzard's Roost","Casa Diablo","Deadwood","Faraday","Harmony","Hidden Valley","Irondale","Jack Rabbit","Last Chance","Saddlestring","Leadville","Palo Verde","Pea Vine","Point Blank","Red-Eye","Sunshine","Tanglefoot","Utopia"],m=["Bad","{Bald|Bare}","Big","Dead","Happy","New","Middle","{North|South|East|West}","Lost","Old","Little","{Brown|Silver|Gold|Black|Red|Blue|White|Yellow}"],h="{North|South|East|West|Middle} Fork of the",d=new i(o.identity,!1).add("rare",function(e){return o.random(m)+" "+o.random(l[e])}).add("uncommon",function(e){var n=o.random(l[e]);return r(n)+" "+t()+" "+o.random(l[e])}).add("uncommon",function(e){var n=o.random(l[e]);return r(n)+" "+o.random(c)+" "+n}).add("rare",function(e){var n=o.test(50)?o.random(c):t();return n+" Trail "+o.random(l[e])}).add("rare",function(e){return o.random(u)}).add("common",function(e){return o.random(c)+" "+o.random(l[e])}).add("common",function(e){return t()+" "+o.random(l[e])}),f=o.keys(l).sort();n.exports.createPlaceName=function(e){return e=-1===f.indexOf(e)?o.random(f):e,o.random(d.get()(e))},n.exports.getLandformTypes=function(){return f}},{"../ion":26,"../tables/rarity_table":44,"./character_name":13}],22:[function(e,n,a){function r(e,n,a){(100==e||o.test(e))&&n.push(o.random(a))}function t(){if(o.test(5))return"The "+o.titleCase(o.random(m));var e=[];return r(35,e,l),r(100,e,c),r(15,e,c),r(10,e,["fiction"]),o.test(80)||o.intersection(e,d).length?e.push(o.random(u)):e.push(o.random(h)),o.titleCase(o.unique(e).join(" "))}var o=e("../ion"),i=e("../models/item"),s=e("./data").itemDatabase,l=["all","amazing","astonishing","atomic","baffling","bolshevik","boy's","complete","dark","dynamic","exciting","favorite","gentleman's","girl's","glamorous","haunted","incredible","lady's","northwest","popular","railroad man's","ranch","saucy","spicy","startling","strange","thrilling","weird","women's","wonderful"],c=["adventure","air","combat","cowboy","detective","fantasy","far west","FBI","flying","frontier","wild frontier","ghost","high seas","horror","indian","jungle","library science","love","new love","northwest","outdoor","pirate","prison","ranch","romance{|s}","sci-fi","science","south seas","supernatural","sweetheart","war","western"],u=["almanac","weekly","magazine","quarterly","stories","tales","thrills"],m=["all-story","argosy","black mask","cavalier","keepsake","ladies home almanac","ocean","scrap book","apache trail"],h=["mysteries","westerns","thrillers","{love|ghost|true} stories"],d=["ghost","mystery","new love","western","high seas"],f=["Medical Planning & Response Manual for a Nuclear Detonation Incident: A Practical Guide","Nuclear Dangers: Myths and Facts","Nuclear Detonation Preparedness","Nuclear War Survival Skills","Nuclear War Survival","Planning Guidance for Response to a Nuclear Detonation","Protection in the Nuclear Age","Recovery from Nuclear Attack","U.S. Army Survival Manual","Communism, Hypnotism, and the Beatles","How You Can Fight Communism"];n.exports.createMagazine=function(){var e=s.find({tags:"magazine"});return e=new i(e),e.title=t(),e},n.exports.createBook=function(){var e=o.random(f);return new i({name:"book",title:e,value:3,enc:2,tags:["reading"]})}},{"../ion":26,"../models/item":34,"./data":15}],23:[function(e,n,a){function r(){return 18+d.nonNegativeGaussian(7)}function t(e,n){var a=e.male?"female":"male",r=w(),t=new g({name:_({gender:a,race:r}),race:r,profession:u(n[0].profession),gender:a,age:d.bounded(e.age+d.gaussian(3),18)});n.push(t);var o=new p({parent:e,other:t,relationship:"couple"});return e.family=t.family=o,d.test(80)&&(o.relationship="married",d.test(90)&&(o.female.name.family=o.male.name.family)),o}function o(){return d.nonNegativeGaussian(2.5,1)||o()}function i(e,n){var a=o();if(e.female.age<40){for(var r=0;a>r;r++)s(e,n);var t=d.nonNegativeGaussian(4,1);c(n,t)}}function s(e,n){var a=d.random(["male","female"]),r=new g({name:_({gender:a,race:e.female.race}),race:e.female.race,gender:a,age:d.roll("1d3")});n.push(r),r.name.family=e.male.name.family,c(n,r.age+d.roll("1d3-1")),e.children.push(r),r.family=e}function l(e,n){var a=d.random(e.children);if(!a)throw new Error("No child in this family");var t=r();return a.age>=t?a:(c(n,t-a.age),a)}function c(e,n){e.forEach(function(e){e.age+=n})}function u(e){if(!e)throw new Error("There should always be a related profession");if(d.test(40))return e;var n=d.intersection(["high","low","normal"],f.find(d.toTag(e)).tags);return f.find(n+" -pre -innate").names[0]}function m(e){e.forEach(function(n){var a=v({name:n.name,profession:n.profession||u(e[0].profession),age:n.age,gender:n.gender,equip:!1});d.extend(n,a);var r=n.family;delete n.family,r.isParent(n)?d.test(Math.sqrt(n.age))?(n.status="absent",r.relationship="married"===r.relationship?"divorced":"separated"):d.test(Math.sqrt(n.age))&&(n.status="deceased",r.relationship=r.male===n?"widow":"widower"):d.test(Math.sqrt(n.age))&&(n.status="deceased"),n.profession&&(n.inventory=k({profession:n.profession}))})}function h(e,n,a,r){if(i(e,n),r-1>a){var o=l(e,n),s=[o];s.forEach(function(o){var i=t(o,n);e.couples.push(i),e.children.splice(e.children.indexOf(o),1),h(i,n,a+1,r)})}}var d=e("../ion"),f=e("./data").professionDatabase,g=e("../models/character"),p=e("../models/family"),y=e("../tables/rarity_table"),b=e("../models/relationship"),v=e("./character").createCharacter,k=e("./bag").createKit,w=e("./character").createRace,_=e("./character_name"),S=(f.find("innate"),{grandmother:{g:"female",a:0,r:["grandson","granddaughter"],n:25},grandfather:{g:"male",a:0,r:["grandson","granddaughter"],n:25},aunt:{g:"female",a:1,r:["niece","nephew"],n:50},uncle:{g:"male",a:1,r:["niece","nephew"],n:50},mother:{g:"female",a:1,r:["son","daughter"],n:80},father:{g:"male",a:1,r:["son","daughter"],n:100},brother:{g:"male",a:2,r:["sister","brother"],n:100},sister:{g:"female",a:2,r:["sister","brother"],n:100},cousin:{g:null,a:2,r:["cousin"],n:25},niece:{g:"female",a:2,r:["aunt","uncle"]},nephew:{g:"male",a:2,r:["aunt","uncle"]},son:{g:"male",a:2,r:["mother","father"]},daughter:{g:"female",a:2,r:["mother","father"]},grandson:{g:"male",a:2,r:["grandmother","grandfather"]},granddaughter:{g:"female",a:2,r:["grandmother","grandfather"]}}),B=d.keys(S).map(function(e){return S[e].name=e,d.titleCase(e)}).sort(),C=(new y).add("common",S.mother).add("common",S.father).add("common",S.brother).add("common",S.sister).add("uncommon",S.aunt).add("uncommon",S.uncle).add("uncommon",S.cousin).add("rare",S.grandmother).add("rare",S.grandfather);n.exports.createFamily=function(e){e=d.extend({},e||{}),e.generations=e.generations||2,e.parent=e.parent||{},e.parent.age=e.parent.age||r();var n=v(e.parent),a=[n],o=t(n,a),i=o;return e.generations>1&&h(o,a,1,e.generations),m(a),i},n.exports.getRelationships=function(){return B},n.exports.createRelationship=function(e){e=d.extend({},e||{}),e.equip=d.isBoolean(e.equip)?e.equip:!0;var n,a,t=e.older?S[e.older.toLowerCase()]:C.get(),o=S[d.random(t.r)],i=Math.abs(t.a-o.a);do{n=r(),a=r();for(var s=0;i>s;s++)a+=r()}while(i>0&&18*i>a-n);var l=v({age:a,gender:t.g,profession:e.profession,equip:e.equip}),c=v({age:n,race:d.test(t.n)?l.race:w(),gender:o.g,profession:e.profession,equip:e.equip}),u=t===o?t.name+"s":t.name+" and "+o.name;return e.familyName&&(l.name.family=e.familyName),d.test(t.n)&&(c.name.family=l.name.family),new b(l,c,u)}},{"../ion":26,"../models/character":30,"../models/family":31,"../models/relationship":39,"../tables/rarity_table":44,"./bag":10,"./character":12,"./character_name":13,"./data":15}],24:[function(e,n,a){function r(e){var n=[];e.tags.forEach(function(e){S[e]&&(n=n.concat(S[e]))});var a=e.policy?[e.policy]:[];return a.push("Will trade for "+t.toList(n,t.identity,"or")+"."),e.tags.indexOf("trade:buylow")&&a.push("Unless receiving currency, this merchant buys low (half value)."),a.join(" ")}var t=e("../ion"),o=e("../models/bag"),i=e("../models/store"),s=e("../tables/table"),l=(e("../models/name"),e("./gang").getGangTypes),c=e("./gang").createGang,u=e("./place_name").createPlaceName,m=e("./data").storeDatabase,h=e("./gang").assignNickname,d=e("./character").createCharacter,f=e("./character_name"),g=e("./relationships").createRelationship,p=e("./bag").createContainer,y=e("./bag").createStockpile,b=e("../models/lib").deserializer,v=e("../models/lib").clone,k=[.2,.33,.4],w=new s,_=new s,S={"trade:any":["anything"],"trade:necessities":["food","ammo","medicine"],"trade:luxuries":["liquor","pre-collapse junk food","cigarettes"],"trade:currency":["greenbacks","casino chips","gold and silver"],"trade:stocked":["any item that would be stocked at this store"]},B={"clientele:lobrow":["{Bull's Head|Holy Moses}","{Red|Black|Blue} {Lightning|Cross}","{Snake|Scorpion} Pit"],"clientele:nobrow":["{Northern|Central|Southern|Western}","{Red|Blue|Black} Star","The {Buckaroo|Cowpoke}"],"clientele:hibrow":["{The |}{Luxe|Satellite|Asteroid|Galaxy|Nebula}"]};_.add(30,function(e,n,a,r){return n+" "+t.random(a)}),_.add(15,function(e,n,a,r){var o=/[sz]$/.test(e)?"'":"'s",i=t.test(70)?e.family:e.toString();return i+o+" "+t.random(a)}),_.add(15,function(e,n,a,r){var o=t.random(a),i=t.test(70)?e.family:e.toString();return i+" "+o}),_.add(40,function(e,n,a,r){var o=B[r];return t.random(o)+" "+t.random(a)}),w.add(20,function(e){return g(e)}),w.add(80,function(e){var n=d(e);return n.name=f({family:n.name.family,gender:n.gender}),t.test(20)&&h(n),n}),n.exports=function(e){e=t.extend({},e||{}),e.tags=e.tags||"*";var n=m.find(t.toTag(e.tags));t.isNumber(e.value)&&(n=v(n),n.inventory.totalValue=e.value);var a=e.owner;a||(a=l().indexOf(n.owner.profession)>-1?c({type:n.owner.profession}):w.get()(n.owner));var s;if(a.name)s=a.name;else if(a.kind)s=a.kind;else{if(!a.older)throw new Error("Could not find owner name for this type",n);s=a.older.name}var h=e.name;if(!h){var d=e.placeName||u(),f=n.typeOf("clientele");h=_.get()(s,d,t.random(n.names),f)}var g=p("Cash On Hand"),S=n.inventory?y(n.inventory):new o,B=S.value();Math.max.apply(Math,S.entries.map(function(e){return e.item.value}));n.tags.indexOf("trade:sellhigh")&&S.entries.forEach(function(e){var n=e.item.value;e.item=b(e.item,!1),e.item.value=Math.round(n+n*t.random(k))});var C=r(n);return new i({name:h,policy:C,owner:a,onhand:g,inventory:S,totalValue:B})}},{"../ion":26,"../models/bag":29,"../models/lib":35,"../models/name":37,"../models/store":40,"../tables/table":45,"./bag":10,"./character":12,"./character_name":13,"./data":15,"./gang":16,"./place_name":21,"./relationships":23}],25:[function(e,n,a){var r=e("../ion"),t=e("../models/weather"),o=[{lo:34,hi:61,mn:48,rain:1},{lo:40,hi:69,mn:54,rain:1},{lo:46,hi:74,mn:60,rain:1},{lo:53,hi:83,mn:68,rain:1},{lo:61,hi:93,mn:77,rain:0},{lo:70,hi:103,mn:86,rain:0},{lo:77,hi:109,mn:93,rain:2},{lo:75,hi:107,mn:92,rain:2},{lo:68,hi:100,mn:84,rain:2},{lo:55,hi:87,mn:71,rain:0},{lo:43,hi:73,mn:57,rain:1},{lo:34,hi:62,mn:48,rain:1}],i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];n.exports=function(e){var n=r.isUndefined(e)?(new Date).getMonth():i.indexOf(e.toLowerCase()),a=o[n],s=new t({low:a.lo+r.roll("1d10-5"),high:a.hi+r.roll("1d10-5"),rain:"clear skies"});return 0===a.rain&&r.test(8)?s.rain=r.random(["cloudy skies","high clouds"]):1===a.rain&&r.test(10)?s.rain=r.random(["light rain","strong winds"]):2===a.rain&&r.test(10)&&(s.rain="thunderstorms"),s}},{"../ion":26,"../models/weather":41}],26:[function(e,n,a){function r(e){return/[x|s]$/.test(e)?e+"es":d.test(e)?e.substring(0,e.length-1)+"ies":e+"s"}function t(e,n){for(var a in n)e[a]=n[a];return e}var o=/\d+d\d+/g,i=/\{[^\|}]+\}/g,s=/\{[^\{\}]*\|[^\{\}]*\}/g,l=/^[aeiouAEIOU]/,c=/^[tT]he\s/,u=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i,m=/(\{[^\}]*\})/g,h=[1,2,3,4,5,6,7,8],d=/[BCDFGHIJKLMNPQRSTVWXZbcdfghijklmnpqrstvwxz]y$/,f=Array.prototype.slice,g=Array.prototype.indexOf,p=Array.prototype.filter,y=Array.prototype.forEach,b={isUndefined:function(e){return"undefined"==typeof e},extend:t,identity:function(e){return e},transform:function(e){return e()},contains:function(e,n){return e?g.call(e,n)>-1:!1},find:function(e,n,a){for(var r=a||this,t=0;t<e.length;t++)if(n.call(a||r,e[t]))return e[t];return null},keys:function(e){return b.isObject(e)?Object.keys(e):[]},values:function(e){return b.keys(e).map(function(n){return e[n]})},times:function(e,n,a){for(var r=a||this,t=0;e>t;t++)n.call(a||r,t,e)},last:function(e){return e&&e.length?e[e.length-1]:null},unique:function(e){if(0===arguments.length||0===e.length)return[];var n=[];return y.call(e,function(e){-1===n.indexOf(e)&&n.push(e)}),n},intersection:function(e,n){if(2!==arguments.length)return[];e=f.call(e,0),n=f.call(n,0);for(var a=[],r=0;r<e.length;r++)n.indexOf(e[r])>-1&&-1===a.indexOf(e[r])&&(a[a.length]=e[r]);return a},union:function(e,n){return 2!==arguments.length?[]:(e=f.call(e,0),n=f.call(n,0),b.unique(e.concat(n)))},without:function(e){var n=f.call(arguments,1);return p.call(e||[],function(e){return-1===n.indexOf(e)})},define:function(e,n){1===arguments.length&&(n=e,e=null);var a=n.init||function(){};if(e){var r=function(){};r.prototype=e.prototype,a.prototype=new r}if(n.properties){for(var t in n.properties)Object.defineProperty(a.prototype,t,{enumerable:!1,configurable:!1,get:n.properties[t]});delete n.properties}if(n["static"]){for(var o in n["static"])a[o]=n["static"][o];delete n["static"]}delete n.init;for(var i in n)a.prototype[i]=n[i];return a.prototype.constructor=a,a},bounded:function(e,n,a){return a=a||Number.MAX_VALUE,n>e?n:e>a?a:e},sum:function(e){return(e||[]).reduce(function(e,n){return"number"==typeof n&&(e+=n),e},0)},article:function(e){return c.test(e)?e:l.test(e)?"an "+e:"a "+e},format:function(e,n){return"undefined"==typeof n?e:((arguments.length>2||"object"!=typeof n)&&(n=f.call(arguments),e=n.shift()),e.replace(i,function(e){var a=e.substring(1,e.length-1);return"function"==typeof n[a]?n[a]():n[a]}))},pluralize:function(e,n){e=e.name?e.name:e,n=n||1;var a={singular:"",plural:""},t="{|"!==e.substring(0,2);return n>1&&(a.plural+=n+" "),-1===e.indexOf("{")?(a.singular=e,a.plural+=r(e)):e.split(m).forEach(function(e,n){if(-1===e.indexOf("{"))a.singular+=e,a.plural+=e;else if(-1===e.indexOf("|"))a.plural+=e.substring(1,e.length-1);else{var r=e.substring(1,e.length-1).split("|");a.singular+=r[0],a.plural+=r[1]}}),t&&(a.singular=b.article(a.singular)),1===n?a.singular:a.plural},sentenceCase:function(e){return b.isString(e)?e.substring(0,1).toUpperCase()+e.substring(1):e},titleCase:function(e){return e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,a){return n>0&&n+e.length!==a.length&&e.search(u)>-1&&":"!==a.charAt(n-2)&&("-"!==a.charAt(n+e.length)||"-"===a.charAt(n-1))&&a.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})},toTag:function(e){return b.isString(e)?e.toLowerCase().replace(/\s/g,""):e},toList:function(e,n,a){a=a||"and",n=n||function(e){return e.toString()};var r=e.length;if(0===r)return"";if(1===r)return n(e[0]);if(2===r)return n(e[0])+" "+a+" "+n(e[1]);var t=e.map(n);return t[t.length-1]=a+" "+t[t.length-1],t.join(", ")},random:function(e){return b.isArray(e)?(e=e.length?e[~~(Math.random()*e.length)]:null,b.random(e)):b.isFunction(e)?b.random(e()):b.isString(e)?e.replace(s,function(e){return b.random(e.substring(1,e.length-1).split("|"))}):e},resolve:function(){if(1===arguments.length)return b.random(arguments[0]);var e=f.call(arguments,0);return e[0]=b.random(e[0]),b.format.apply(b.format,e)},roll:function(e){if("number"==typeof e)return e>0?~~(Math.random()*e)+1:0;if("string"==typeof e){e=e.replace(o,function(e){for(var n=e.split("d"),a=parseInt(n[0],10),r=parseInt(n[1],10),t=0,o=0;a>o;o++)t+=~~(Math.random()*r)+1;return t});try{return eval.call(null,e)}catch(n){return 0}}throw new Error("Invalid value: "+e)},shuffle:function(e){for(var n,a,r=e.length-1;r>0;r--)n=~~(Math.random()*(r+1)),a=e[r],e[r]=e[n],e[n]=a},test:function(e){if(0>e||e>100)throw new Error("Percentage must be between 0 and 100");return b.roll(100)<=e},gaussian:function(e,n){var a,r,t=0,o=0,i=n||0;do t=2*Math.random()-1,o=2*Math.random()-1,a=t*t+o*o;while(0===a||a>1);return r=Math.sqrt(-2*Math.log(a)/a),Math.round(t*r*e)+i},nonNegativeGaussian:function(e,n){n=0>n?0:n;var a;do a=b.gaussian(e,n);while(0>a);return a},newArray:function(e){return Array.apply(null,Array(e))},newUID:function(){return h.map(function(){return b.roll(36).toString(36)}).join("")+((new Date).getTime()-1463775673773).toString(36)}};["Array","Function","String","Date","RegExp","Boolean","Number","Object"].forEach(function(e){b["is"+e]=function(n){return Object.prototype.toString.call(n)==="[object "+e+"]"}}),n.exports=b},{}],27:[function(require,module,exports){"function"!=typeof JSON.decycle&&(JSON.decycle=function(e,n){var a=[],r=[];return function t(e,o){var i,s;return void 0!==n&&(e=n(e)),"object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String?e:(i=a.indexOf(e),i>=0?{$ref:r[i]}:(a.push(e),r.push(o),Array.isArray(e)?(s=[],e.forEach(function(e,n){s[n]=t(e,o+"["+n+"]")})):(s={},Object.keys(e).forEach(function(n){s[n]=t(e[n],o+"["+JSON.stringify(n)+"]")})),s))}(e,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){value&&"object"==typeof value&&(Array.isArray(value)?value.forEach(function(element,i){if("object"==typeof element&&null!==element){var path=element.$ref;"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(element)}}):Object.keys(value).forEach(function(name){var item=value[name];if("object"==typeof item&&null!==item){var path=item.$ref;"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)}}))}($),$})},{}],28:[function(e,n,a){var r=e("../ion"),t=e("./profession"),o=["","Seaman","Petty Officer","Ensign","Lieutenant","Lieutenant Commander","Commander","Captain","Admiral"],i=["Officer",["Officer","Trooper"],"Detective","Sergeant",["Captain","Deputy Marshal"],["Inspector","Marshal"],["Deputy Chief","Undersheriff"],["Chief","Sheriff"]],s=["","Private","Corporal","Sergeant","Lieutenant","Captain","Major","Colonel","General"];n.exports=r.define(t,{init:function(e){t.call(this,e||{})},assignRank:function(e){var n=this.names[0],a=null,t=Math.round(1.5*Math.max(e.trait("Military"),e.trait("Government")));"Navy"===n||"Coast Guard"===n?a=o[r.roll(t)]:"Police"===n?(a=i[r.roll(t)],a instanceof Array&&(a=r.random(a))):a=s[r.roll(t)],e.honorific=a?n+" "+a:n}})},{"../ion":26,"./profession":38}],29:[function(e,n,a){function r(e,n){return e.item.name>n.item.name?1:e.item.name<n.item.name?-1:0}function t(e,n){return e.entries.filter(function(e){return e.item.name===n.name})[0]}function o(e){return"string"==typeof e?new c({name:e}):e}function i(e){return"number"==typeof e?e:1}function s(e,n,a){return n=o(n),e.entries.filter(function(e){return!n||n.name===e.item.name}).reduce(function(e,n){var r=a?n.item[a]:1;return e+r*n.count},0)}var l=e("../ion"),c=e("./item"),u=e("./model"),m=l.define(u,{init:function(e){u.call(this,e),this.entries=this.entries||[],this.type="Bag"},addBag:function(e){e instanceof m&&JSON.parse(JSON.stringify(e)).entries.forEach(function(e){this.add(e.item,e.count)},this)},removeBag:function(e){e instanceof m&&JSON.parse(JSON.stringify(e)).entries.forEach(function(e){this.remove(e.item,e.count)},this)},add:function(e,n){if(!e)throw new Error("No item passed to bag.add()");e=o(e),n=i(n);var a=t(this,e);if(0>n)throw new Error("Can't add negative items to bag: "+n);return a||(a={item:e,count:0,titles:{}},this.entries.push(a)),e.title&&(a.titles[e.title]=!0),a.count+=n,a.count},sort:function(e){this.entries.sort(e||r)},remove:function(e,n){e=o(e),n=i(n);var a=t(this,e);if(!a)throw new Error("Can't remove item that's not in the bag");if(0>=n)throw new Error("Can't remove a negative number of items from bag: "+n);if(n>a.count)throw new Error("Can't remove "+n+" items in bag that has only "+a.count);return a.count-=n,e.title&&delete a.titles[e.title],0===a.count&&this.entries.splice(this.entries.indexOf(a),1),a.count},filter:function(e){for(var n=new m,a=this.entries.length-1;a>=0;a--){var r=this.entries[a];if(e.call(this,r.item,r.count)){var t=r.item,o=r.count;this.remove(t,o),n.add(t,o)}}return n},value:function(e){return s(this,e,"value")},enc:function(e){return s(this,e,"enc")},count:function(e){return s(this,e)},typeOf:function(e){return this.entries.reduce(function(n,a){return a.item.typeOf(e)&&n.push(a.item),n},[])},toString:function(){var e="",n=0;if(this.entries.length){var a=!1,r=this.entries.filter(function(e){return e.item.not("cash")}).length;this.entries.forEach(function(t){t.item.is("cash")?n+=100*t.item.value*t.count:(a=!0,e+=l.pluralize(t.item,t.count),l.keys(t.titles).length&&(e+=" ("+l.keys(t.titles).join("; ")+")"),e+=1===r?".":2===r?", and ":", ",r--)},this),a&&n&&(e+=" "),n&&(e+="$"+n.toFixed(0)+" in cash."),e=l.sentenceCase(e)}return this.descriptor&&(e=this.descriptor+": "+e),e},toHTML:function(){return'<p class="bag">'+this.toString()+"</p>"}});n.exports=m},{"../ion":26,"./item":34,"./model":36}],30:[function(e,n,a){function r(e){return o.keys(e).sort(function(e,n){return n>e?-1:e>n?1:0}).map(function(n){return o.format("{0} {1}",n,e[n])}).join(", ")}function t(e){return e("{0} ",this.honorific),e(!!this.name,function(e){e(this.name.toString())}),e(", {0}",this.degree),e(!this.honorific&&!!this.profession,", "+this.profession),e(". "),e(!!this.status,function(e){e("{0} (would be {1}). ",o.sentenceCase(this.status),this.age)},function(e){e("Age {0}. ",this.age+"")}),e("{0}. ",this.appearance),e("{0}. ",this.history.join(", ")),e}var o=e("../ion"),i=e("./model"),s=e("./bag"),l=e("../builder"),c=o.define(i,{init:function(e){this.gender="male",this.age=0,this.honorific=null,this.degree=null,this.inventory=new s,this.traits={},this.history=[],i.call(this,e),this.type="Character"},properties:{male:function(){return"male"===this.gender},points:function(){return o.sum(o.values(this.traits))},personal:function(){return"male"===this.gender?"he":"she"},objective:function(){return"male"===this.gender?"him":"her"},reflexive:function(){return"male"===this.gender?"himself":"herself"},possessive:function(){return"male"===this.gender?"his":"her"}},changeTrait:function(e,n){n=n||0,this.traits[e]=this.traits[e]||0,this.traits[e]+=n,this.traits[e]<=0&&delete this.traits[e]},trait:function(e){return this.traits[e]||0},toString:function(){var e=l(this);return t.call(this,e)("{0}. ",r(this.traits))("Possessions: {0}",this.inventory.toString()).toString()},toHTML:function(){var e=l(this);return e("p",{},function(e){t.call(this,e)}),e(!!this.inventory.count()||o.keys(this.traits).length>0,function(e){e("div",{"class":"more"},function(e){e("p",{},function(e){e("{0}. ",r(this.traits))}),e(!!this.inventory.count(),function(e){e("p",{},function(e){e("Possessions: {0}",this.inventory.toString())})})})}),e.toString()}});n.exports=c},{"../builder":2,"../ion":26,"./bag":29,"./model":36}],31:[function(e,n,a){function r(e,n,a){var r="";return r=e.name.family===n.name.family?o.format("{0} ({1}) & {2} ({3}) {4}",e.name.given,e.age,n.name.given,n.age,e.name.family):o.format("{0} ({1}) & {2} ({3})",e.name.toString(),e.age,n.name.toString(),n.age),a&&(r+=e.name.family===n.name.family?" ("+a+")":". "+o.sentenceCase(a)),r+". "}function t(e,n){var a=e.single;return null!==a?o.format("{0} ({1}), {2}. ",a.name.toString(),a.age,e.relationship):r(e.male,e.female,e.relationship)}var o=e("../ion"),i=e("../builder"),s=e("./model");n.exports=o.define({init:function(e){this.children=[],this.couples=[],s.call(this,e),this.type="Family"},properties:{childCount:function(){return this.children.length+this.couples.length},male:function(){return this.parent.male?this.parent:this.other},female:function(){return this.parent.male?this.other:this.parent},single:function(){return this.parent.status&&!this.other.status?this.other:this.other.status&&!this.parent.status?this.parent:null}},isParent:function(e){return e===this.parent||e===this.other},toString:function(){var e=i(this);return e(!!this.single,function(){e(this.single.toString())},function(){e(r(this.male,this.female,this.relationship))}),e(!!this.childCount,function(e){e("{|}{1 |}child{ren}: ",this.childCount),e(this.children,function(e,n,a){e(a>0," ")(n.toString())}),e(this.couples,function(e,n,a){e(a>0," ")(n.toString())})}).toString()},toHTML:function(){var e=i(this);return e("div",{"class":"family"},function(){e("p",{},t(this)),e("div",{"class":"more"},function(){e(!!this.single,function(){e(this.single.toHTML())},function(){e(this.male.toHTML()),e(" "),e(this.female.toHTML())})}),e(!!this.childCount,function(n){e("div",{"class":"children_preamble"},function(){e("{|}{1 |}child{ren}:",this.childCount)}),e("div",{"class":"children"},function(){e(this.children,function(n,a){e("div",{"class":"child"},function(){e(a.toHTML())})}),e(this.couples,function(e,n){e(n.toHTML())})})})}),e.toString()}})},{"../builder":2,"../ion":26,"./model":36}],32:[function(e,n,a){function r(e){var n=o.toList(this.members,function(e){return e.name});return e(!!this.name,function(e){e("The {0} ({1}; {2}): ",this.name,this.kind,n)},function(e){e("{0} member {1} ({2}): ",this.members.length,this.kind,n)}),e}function t(e,n){var a={};l.forEach(function(e){n.trait(e)>0&&(a[e]=n.trait(e))}),n.traits=a,e(n.toString())}var o=e("../ion"),i=e("./model"),s=e("../builder"),l=["Agile","Archery","Athletics","Cunning","Driving","Explosives","Firearms","Horseback Riding","Intimidate","Medicine","Melee Weapons","Military","Motorcycling","Stealth","Strong","Tough","Tracking","Trucking","Unarmed Combat"];
n.exports=o.define(i,{init:function(e){this.members=[],i.call(this,e),this.type="Gang"},add:function(e){this.members.push(e)},toString:function(){var e=s(this);return r.call(this,e),e(this.members,function(e,n,a){t.call(n,e,n)}).toString()},toHTML:function(){var e=s(this);return e("p",{},function(e){r.call(this,e)}),e("div",{"class":"more"},function(e){e(this.members,function(e,n,a){e("p",{},function(e){t.call(n,e,n)})})}),e.toString()}})},{"../builder":2,"../ion":26,"./model":36}],33:[function(e,n,a){var r=e("../ion");n.exports=r.define({init:function(e){this.hash={};for(var n=0;n<(e||[]).length;n++)this.add(e[n])},clear:function(){this.hash={}},add:function(e){this.hash[e.toString()]=e},remove:function(e){delete this.hash[e.toString()]},has:function(e){return"undefined"!=typeof this.hash[e.toString()]},size:function(){return r.keys(this.hash).length},toArray:function(){return r.values(this.hash)}})},{"../ion":26}],34:[function(e,n,a){var r=e("../ion"),t=e("./model"),o=e("../builder");n.exports=r.define(t,{init:function(e){e=r.isString(e)?{name:e}:e,this.name=e.name,this.enc=0,this.value=0,t.call(this,e),this.type="Item"},toString:function(){return o(this)(this.name,1)(!!this.title," ("+this.title+")").toString()},toHTML:function(){return o(this)("p",{},function(e){e(this.name,1)(!!this.title," (<cite>"+this.title+"</cite>)")}).toString()}})},{"../builder":2,"../ion":26,"./model":36}],35:[function(e,n,a){function r(e,n){if(n!==!0&&o.isString(e)&&(e=JSON.parse(e)),o.isObject(e)||o.isArray(e)){e.type&&(e=new i[e.type](e));for(var a in e)e[a]=r(e[a],!0)}return e}function t(e,n){n=o.isBoolean(n)?n:Object.isFrozen(e);var a=r(JSON.stringify(e));return n?Object.freeze(a):a}var o=e("../ion"),i={Bag:e("./bag"),Character:e("./character"),Family:e("./family"),Gang:e("./gang"),Item:e("./item"),Model:e("./model"),Name:e("./name"),Profession:e("./profession"),Relationship:e("./relationship"),Store:e("./store"),Weather:e("./weather")};n.exports.clone=t,n.exports.deserializer=r},{"../ion":26,"./bag":29,"./character":30,"./family":31,"./gang":32,"./item":34,"./model":36,"./name":37,"./profession":38,"./relationship":39,"./store":40,"./weather":41}],36:[function(e,n,a){var r=e("../ion"),t=r.define({init:function(e){if(this.tags=[],r.isObject(e))for(var n in e)this[n]=e[n];this.type="Model"},is:function(e){return-1!==this.tags.indexOf(e)},has:function(e){return this.is(e)},not:function(e){return-1===this.tags.indexOf(e)},typeOf:function(e){var n=e+":";return this.tags.filter(function(e){return e.indexOf(n)>-1})[0]}});n.exports=t},{"../ion":26}],37:[function(e,n,a){var r=e("../ion"),t=e("./model");n.exports=r.define(t,{init:function(e){t.call(this,e),this.type="Name"},properties:{first:function(){return this.given},last:function(){return this.family}},toString:function(){return this.nickname?this.nickname:r.format("{given} {family}",this)}})},{"../ion":26,"./model":36}],38:[function(e,n,a){function r(e,n,a){e[n]||(e[n]=a)}var t=e("../ion"),o=e("./model"),i=4;n.exports=t.define(o,{init:function(e){this.names=e.name?[e.name]:[],this.seeds=[],this.supplements=[],this.tags=[],this.postprocess=t.identity,o.call(this,e),this.type="Profession"},train:function(e,n){var a={};this.seeds.forEach(function(t){e.trait(t)<i&&(r(a,t,1),n--)});var o=Math.ceil(n/4)-this.seeds.length+t.roll("1d2");t.shuffle(this.supplements),this.supplements.forEach(function(e,n){o>=n&&r(a,e,0)});for(var s=t.keys(a);n>0&&s.length;){var l=t.random(s);a[l]+e.trait(l)>=i?s=t.without(s,l):(a[l]++,n--)}for(var c in a)a[c]>0&&e.changeTrait(c,a[c]);this.tags.forEach(function(n){e.tags.push(n)}),this.postprocess(e)}})},{"../ion":26,"./model":36}],39:[function(e,n,a){function r(e,n,a){return e.name.family===n.name.family?t.format("{0} ({1}) & {2} ({3}) {4} ({5}). ",e.name.given,e.age,n.name.given,n.age,e.name.family,a):t.format("{0} ({1}) & {2} ({3}). {4}. ",e.name.toString(),e.age,n.name.toString(),n.age,t.sentenceCase(a))}var t=e("../ion"),o=e("../builder");n.exports=function(e,n,a){this.older=e,this.younger=n,this.relationship=a,this.toString=function(){return r(this.older,this.younger,this.relationship)},this.toHTML=function(){var e=o(this);return e("p",{},function(e){e(r(this.older,this.younger,this.relationship))}),e("div",{"class":"more"},function(e){e("p",{},function(e){e(this.older.toString())})(" "),e("p",{},function(e){e(this.younger.toString())})}),e.toString()}}},{"../builder":2,"../ion":26}],40:[function(e,n,a){var r=e("../ion"),t=e("./bag"),o=e("./model"),i=e("../builder");n.exports=r.define(o,{init:function(e){this.name=null,this.owner=null,this.onhand=null,this.inventory=new t,o.call(this,e),this.type="Store"},toString:function(){var e=i(this);return e(this.name)(". "),e(!!this.owner,function(){e("Owner(s): "+this.owner.toString()+" ")}),e("For Trade: "),e(!!this.policy,this.policy+" "),e(this.inventory.toString()),e(0!==this.inventory.count()," "),e(!!this.onhand,function(){e(this.onhand.toString())}),e(" Total value: ")(this.totalValue)(". "),e.toString()},toHTML:function(){var e=i(this);return e("p",{"class":"title"},this.name),e("div",{"class":"owner"},function(e){e("p",{"class":"title"},function(e){e("Owner(s)")}),e(this.owner.toHTML())}),e("p",{"class":"title"},"For Trade"),e(!!this.policy,function(){e("p",{"class":"policy"},this.policy)}),e("ul",{"class":"inventory"},function(e){e(this.inventory.entries,function(e,n){var a=r.pluralize(n.item.name,n.count);")"===a.substring(a.length-1)?a=a.substring(0,a.length-1)+", ":a+=" (",a+=1===n.count?n.item.value+"T)":n.item.value+"T each)",e("li",{},a)})}),e("p",{},this.onhand.toString()),e.toString()}})},{"../builder":2,"../ion":26,"./bag":29,"./model":36}],41:[function(e,n,a){var r=e("../ion"),t=e("./model");n.exports=r.define(t,{init:function(e){t.call(this,e),this.type="Weather"}})},{"../ion":26,"./model":36}],42:[function(e,n,a){function r(e,n,a){if(!t.isObject(e)&&t.isString(n)){var r={};r[n]=e,e=r}t.isObject(n)&&(a=n);var o=t.extend({},e);return t.keys(a).forEach(function(e){var n=a[e];if(t.isUndefined(o[e]))o[e]=t.random(n);else if(t.isArray(n)&&!t.contains(n,o[e]))throw new Error(o[e]+" is an invalid "+e+", use "+n.join(", "))}),o}var t=e("./ion");n.exports=r},{"./ion":26}],43:[function(e,n,a){var r=e("../ion");n.exports=r.define({init:function(e){this.outFunction=e||r.identity,this.hash={}},put:function(){for(var e=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)this.hash[arguments[n]]=e;return this},get:function(e){var n=this.hash[e];return n?this.outFunction(n):this.hash["default"]?this.outFunction(this.hash["default"]):null}})},{"../ion":26}],44:[function(e,n,a){function r(e){return e[~~(Math.random()*e.length)]}var t=e("../ion"),o=e("./table");n.exports=t.define(o,{init:function(e,n){this.common=[],this.uncommon=[],this.rare=[],1===arguments.length&&(n=e),e=t.isFunction(e)?e:t.identity,this.useStrict=t.isBoolean(n)?n:!0,o.call(this,e)},add:function(e,n){switch(e){case"common":case"uncommon":case"rare":this[e].push(n),this.rows.push(n);break;default:throw new Error(e+" is not valid (use rare, uncommon, common)")}return this},get:function(){if(this.useStrict&&(0===this.rare.length||0===this.common.length||0===this.uncommon.length))throw new Error("RarityTable must have at least one common, uncommon, and rare element");var e=this.common.length?65:0,n=this.uncommon.length?30:0,a=this.rare.length?5:0,o=t.roll(e+n+a);return e>=o&&0!==e?this.outFunction(r(this.common)):e+n>=o&&0!==n?this.outFunction(r(this.uncommon)):e+n+a>=o&&0!==a?this.outFunction(r(this.rare)):null}})},{"../ion":26,"./table":45}],45:[function(e,n,a){var r=e("../ion");n.exports=r.define({init:function(e){this.outFunction=e||r.identity,this.rows=[],this.sum=0},add:function(){var e,n,a,r;if(3===arguments.length){if(e=arguments[0],n=arguments[1],a=arguments[2],r=n-e+1,1>e||e>100||1>n||n>100)throw new Error("Dice ranges must be from 1 to 100")}else if(r=arguments[0],a=arguments[1],1>r||r>100)throw new Error("Dice ranges must be from 1 to 100");if("undefined"==typeof a)throw new Error("Object is undefined");return this.rows.push({chance:r,object:a}),this.sum+=r,this},get:function(){if(100!==Math.round(this.sum))throw new Error("Table elements do not add up to 100%, but rather to "+Math.round(this.sum));for(var e=r.roll(100),n=0,a=this.rows.length;a>n;n++){if(e<=this.rows[n].chance)return this.outFunction(this.rows[n].object);e-=this.rows[n].chance}},size:function(){return this.rows.length}})},{"../ion":26}]},{},[1])(1)});